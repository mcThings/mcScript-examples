****** BUILD Of 'BME280Test' (2016-10-22 1:05:48 PM)


****** EVENT HANDLERS
                                                                                                                                                                               0:    0x0072   Address Priority 0 Event.   Code for 'Boot' starts at 114.
                                                                                                                                                                               1:    0x0099   Address Priority 1 Event.   Code for 'NewGateway' starts at 153.
                                                                                                                                                                               2:    0x00A3   Address Priority 2 Event.   Code for 'SubscriptionDelivery' starts at 163.
                                                                                                                                                                               3:    0x00F6   Address Priority 3 Event.   Code for 'Publish' starts at 246.
                                                                                                                                                                               4:    0x0000   Address Priority 4 Event.   No Event defined.
                                                                                                                                                                               5:    0x0000   Address Priority 5 Event.   No Event defined.
                                                                                                                                                                               6:    0x0000   Address Priority 6 Event.   No Event defined.
                                                                                                                                                                               7:    0x0000   Address Priority 7 Event.   No Event defined.
                                                                                                                                                                               8:    0x0000   Address Priority 8 Event.   No Event defined.
                                                                                                                                                                               9:    0x0000   Address Priority 9 Event.   No Event defined.
                                                                                                                                                                               10:   0x0000   Address Priority 10 Event.  No Event defined.
                                                                                                                                                                               11:   0x0000   Address Priority 11 Event.  No Event defined.
                                                                                                                                                                               12:   0x0000   Address Priority 12 Event.  No Event defined.
                                                                                                                                                                               13:   0x0000   Address Priority 13 Event.  No Event defined.
                                                                                                                                                                               14:   0x0000   Address Priority 14 Event.  No Event defined.
                                                                                                                                                                               15:   0x0000   Address Priority 15 Event.  No Event defined.
                                                                                                                                                                               16:   0x0000   Address Priority 16 Event.  No Event defined.
                                                                                                                                                                               17:   0x0000   Address Priority 17 Event.  No Event defined.
                                                                                                                                                                               18:   0x0000   Address Priority 18 Event.  No Event defined.
                                                                                                                                                                               19:   0x0000   Address Priority 19 Event.  No Event defined.
                                                                                                                                                                               20:   0x0000   Address Priority 20 Event.  No Event defined.
                                                                                                                                                                               21:   0x0000   Address Priority 21 Event.  No Event defined.
                                                                                                                                                                               22:   0x0000   Address Priority 22 Event.  No Event defined.
                                                                                                                                                                               23:   0x0000   Address Priority 23 Event.  No Event defined.
                                                                                                                                                                               24:   0x0000   Address Priority 24 Event.  No Event defined.
                                                                                                                                                                               25:   0x0000   Address Priority 25 Event.  No Event defined.
                                                                                                                                                                               26:   0x0000   Address Priority 26 Event.  No Event defined.
                                                                                                                                                                               27:   0x0000   Address Priority 27 Event.  No Event defined.
                                                                                                                                                                               28:   0x0000   Address Priority 28 Event.  No Event defined.
                                                                                                                                                                               29:   0x0000   Address Priority 29 Event.  No Event defined.
                                                                                                                                                                               30:   0x0000   Address Priority 30 Event.  No Event defined.
                                                                                                                                                                               31:   0x0000   Address Priority 31 Event.  No Event defined.

****** RUNTIME INFORMATION
                                                                                                                                                                               32:   0x08FB   ScriptSizeLS (Size of the code in 2-byte instructions = 2299)
                                                                                                                                                                               33:   0x0000   CodeSizeMS (Size of the code in 2-byte instructions = 2299)
                                                                                                                                                                               34:   0x0024   CodeSizeInBlocks = 36
                                                                                                                                                                               35:   0x0004   StringSizeInBlocks = 4
                                                                                                                                                                               36:   0x0000   Reserved
                                                                                                                                                                               37:   0x0000   Reserved
                                                                                                                                                                               38:   0x20AC   Compile Date and Time 2016-10-22 13:05:48
                                                                                                                                                                               39:   0x1F9E   Compile Date and Time 2016-10-22 13:05:48
                                                                                                                                                                               40:   0x0000   Reserved
                                                                                                                                                                               41:   0x0000   Reserved
                                                                                                                                                                               42:   0x0000   Reserved
                                                                                                                                                                               43:   0x0000   Reserved
                                                                                                                                                                               44:   0x0000   Reserved
                                                                                                                                                                               45:   0x0000   PinMode Pin0=NotUsed  Pin1=NotUsed
                                                                                                                                                                               46:   0x0000   PinMode Pin2=NotUsed  Pin3=NotUsed
                                                                                                                                                                               47:   0x0000   PinMode Pin4=NotUsed  Pin5=NotUsed
                                                                                                                                                                               48:   0x0000   PinMode Pin6=NotUsed  Pin7=NotUsed
                                                                                                                                                                               49:   0x0000   PinMode Pin8=NotUsed   Pin9=NotUsed
                                                                                                                                                                               50:   0x0000   PinMode Pin10=NotUsed   Pin11=NotUsed
                                                                                                                                                                               51:   0x0000   PinMode Pin12=NotUsed   Pin13=NotUsed
                                                                                                                                                                               52:   0x0000   PinMode Pin14=NotUsed   Pin15=NotUsed
                                                                                                                                                                               53:   0x0000   PinMode Pin16=NotUsed   Pin17=NotUsed
                                                                                                                                                                               54:   0x0000   PinMode Pin18=NotUsed   Pin19=NotUsed
                                                                                                                                                                               55:   0x0000   PinMode Pin20=NotUsed   Pin21=NotUsed
                                                                                                                                                                               56:   0x0000   PinMode Pin22=NotUsed   Pin23=NotUsed
                                                                                                                                                                               57:   0x0000   Reserved
                                                                                                                                                                               58:   0x0000   Reserved
                                                                                                                                                                               59:   0x0000   Reserved
                                                                                                                                                                               60:   0x0000   Reserved
                                                                                                                                                                               61:   0x1800   IdleThread EntryPoint ValTypParams=0, RefTypParams=0
                                                                                                                                                                               62:   0x0015   SystemIdle
                                                                                                                                                                               63:   0x5002   BranchBack 62

****** CLASS INFORMATION
                                                                                                                                                                               64:   0x0049   Class Descriptor for class 'Global'. Next Descriptor at 73.
                                                                                                                                                                               65:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                               66:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                               67:   0x0008   Size of RefObject data.(8).
                                                                                                                                                                               68:   0x0020   Size of all data.(32).
                                                                                                                                                                               69:   0x6C47   Part of the class name 'Global'.
                                                                                                                                                                               70:   0x626F   Part of the class name 'Global'.
                                                                                                                                                                               71:   0x6C61   Part of the class name 'Global'.
                                                                                                                                                                               72:   0x0000   Part of the class name 'Global'.
                                                                                                                                                                               73:   0x0051   Class Descriptor for class 'Main'. Next Descriptor at 81.
                                                                                                                                                                               74:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                               75:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                               76:   0x0000   Size of RefObject data.(0).
                                                                                                                                                                               77:   0x0000   Size of all data.(0).
                                                                                                                                                                               78:   0x614D   Part of the class name 'Main'.
                                                                                                                                                                               79:   0x6E69   Part of the class name 'Main'.
                                                                                                                                                                               80:   0x0000   Part of the class name 'Main'.
                                                                                                                                                                               81:   0x005C   Class Descriptor for class 'TempSensor'. Next Descriptor at 92.
                                                                                                                                                                               82:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                               83:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                               84:   0x0000   Size of RefObject data.(0).
                                                                                                                                                                               85:   0x0000   Size of all data.(0).
                                                                                                                                                                               86:   0x6554   Part of the class name 'TempSensor'.
                                                                                                                                                                               87:   0x706D   Part of the class name 'TempSensor'.
                                                                                                                                                                               88:   0x6553   Part of the class name 'TempSensor'.
                                                                                                                                                                               89:   0x736E   Part of the class name 'TempSensor'.
                                                                                                                                                                               90:   0x726F   Part of the class name 'TempSensor'.
                                                                                                                                                                               91:   0x0000   Part of the class name 'TempSensor'.
                                                                                                                                                                               92:   0x0064   Class Descriptor for class 'MQTT'. Next Descriptor at 100.
                                                                                                                                                                               93:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                               94:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                               95:   0x0000   Size of RefObject data.(0).
                                                                                                                                                                               96:   0x0000   Size of all data.(0).
                                                                                                                                                                               97:   0x514D   Part of the class name 'MQTT'.
                                                                                                                                                                               98:   0x5454   Part of the class name 'MQTT'.
                                                                                                                                                                               99:   0x0000   Part of the class name 'MQTT'.
                                                                                                                                                                               100:  0x006D   Class Descriptor for class 'BME280'. Next Descriptor at 109.
                                                                                                                                                                               101:  0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                               102:  0x0000   Offset of RefObject data.(0).
                                                                                                                                                                               103:  0x0004   Size of RefObject data.(4).
                                                                                                                                                                               104:  0x0068   Size of all data.(104).
                                                                                                                                                                               105:  0x4D42   Part of the class name 'BME280'.
                                                                                                                                                                               106:  0x3245   Part of the class name 'BME280'.
                                                                                                                                                                               107:  0x3038   Part of the class name 'BME280'.
                                                                                                                                                                               108:  0x0000   Part of the class name 'BME280'.
                                                                                                                                                                               109:  0x0000   End Of Class Data.

****** APPLIACTION STATEMENTS
*************************************************************************************************************

000008  Class Main                                                                                                                                                             110:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000009      
000010      Shared SeaLevelPressure As Float
000011      Shared data As dataType
000012      Shared BME280_1 As BME280
000013      Const SLP_Topic As String = "MCThings/SeaLevelPressure"
000014      Const Sub_Topic As String = "MCThings/Publish"
000015      Shared Publish_data As Boolean
000016      
                                                                                                                                                                               112:  0x0001                           EventType=Boot
                                                                                                                                                                               113:  0x0700                           EventCategory=Interrupt
000017      Shared Event Boot()                                                                                                                                                114:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000018          data = dataType.UPTIME                                                                                                                                         115:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               116:  0x000C   PushGlobal              
                                                                                                                                                                               117:  0xD01C   PopFieldI32             data

000019          Publish_data = True                                                                                                                                            118:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               119:  0x000C   PushGlobal              
                                                                                                                                                                               120:  0xC814   PopFieldU8              Publish_data

000020          SeaLevelPressure = 1013.25 //standard Mean Sea Level Pressure                                                                                                  121:  0x0110   PushConstI32            1149063168 (0x447D5000)
                                                                                                                                                                               122:  0x5000                           
                                                                                                                                                                               123:  0x447D                           
                                                                                                                                                                               124:  0x000C   PushGlobal              
                                                                                                                                                                               125:  0xD018   PopFieldI32             SeaLevelPressure

000021          BME280_1 = New BME280                                                                                                                                          126:  0x8064   PushConstU10            100 (0x0064)
                                                                                                                                                                               127:  0x0010   ClassNew                
                                                                                                                                                                               128:  0x1E68   BranchSubr              745
                                                                                                                                                                               129:  0x1E71   BranchSubr              755
                                                                                                                                                                               130:  0x000C   PushGlobal              
                                                                                                                                                                               131:  0xD400   PopFieldRef             BME280_1

000022          If BME280_1.online Then                                                                                                                                        132:  0x000C   PushGlobal              
                                                                                                                                                                               133:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               134:  0xB808   PushFieldU8             online
                                                                                                                                                                               135:  0x3C08   BranchFalse             144

000023              MQTT.Publish("Status", "BME280 Online")                                                                                                                    136:  0x841A   PushLiteral             26
                                                                                                                                                                               137:  0x841D   PushLiteral             29
                                                                                                                                                                               138:  0x000E   PushNothing             
                                                                                                                                                                               139:  0x1DB5   BranchSubr              577

000024              BME280_1.setMode(BME280.FORCED) //set to read-on-demand mode (this is default anyway)                                                                      140:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               141:  0x000C   PushGlobal              
                                                                                                                                                                               142:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               143:  0x1F96   BranchSubr              1062

000025          End If
000026          MQTT.Subscribe(SLP_Topic)                                                                                                                                      144:  0x8409   PushLiteral             9
                                                                                                                                                                               145:  0x000E   PushNothing             
                                                                                                                                                                               146:  0x1E52   BranchSubr              741

000027          MQTT.Subscribe(Sub_Topic)                                                                                                                                      147:  0x8411   PushLiteral             17
                                                                                                                                                                               148:  0x000E   PushNothing             
                                                                                                                                                                               149:  0x1E4F   BranchSubr              741

000028      End Event                                                                                                                                                          150:  0x0091   Return                  

000029      
                                                                                                                                                                               151:  0x0005                           EventType=NewGateway
                                                                                                                                                                               152:  0x0700                           EventCategory=Interrupt
000030      Shared Event NewGateway()                                                                                                                                          153:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000031          MQTT.Subscribe(SLP_Topic)                                                                                                                                      154:  0x8409   PushLiteral             9
                                                                                                                                                                               155:  0x000E   PushNothing             
                                                                                                                                                                               156:  0x1E48   BranchSubr              741

000032          MQTT.Subscribe(Sub_Topic)                                                                                                                                      157:  0x8411   PushLiteral             17
                                                                                                                                                                               158:  0x000E   PushNothing             
                                                                                                                                                                               159:  0x1E45   BranchSubr              741

000033      End Event                                                                                                                                                          160:  0x0091   Return                  

000034      
                                                                                                                                                                               161:  0x0003                           EventType=SubscriptionDelivery
                                                                                                                                                                               162:  0x0700                           EventCategory=Interrupt
000035      Shared Event SubscriptionDelivery()                                                                                                                                163:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               164:  0xE002   AllocateStackSpace      ValTypeSize=0, RefTypeSize=2

000036          Dim msg As Message = Lplan.GetDelivery()                                                                                                                       165:  0x00FE   LplanGetDelivery        
                                                                                                                                                                               166:  0x9400   PopLocalRef             msg

000037          Dim tmp_str As String = msg.PayLoad.ToString()                                                                                                                 167:  0x8C00   PushLocalRef            msg
                                                                                                                                                                               168:  0xC404   PushFieldRef            Offset=4
                                                                                                                                                                               169:  0x006B   StrFromListOfByte       
                                                                                                                                                                               170:  0x9401   PopLocalRef             tmp_str

000038          Select msg.Topic                                                                                                                                               171:  0x8C00   PushLocalRef            msg
                                                                                                                                                                               172:  0xC400   PushFieldRef            Offset=0
                                                                                                                                                                               173:  0x0122   CaseComputed            
                                                                                                                                                                               174:  0x0009                           CaseCommonClass=String
                                                                                                                                                                               175:  0x0002                           NumberOfCaseEntries=2
                                                                                                                                                                               176:  0x0038                           CaseElseBranch=233
                                                                                                                                                                               177:  0x0009                           LSH CaseValue=9
                                                                                                                                                                               178:  0x0000                           MSH CaseValue=9
                                                                                                                                                                               179:  0x0006                           CaseBranch=183
                                                                                                                                                                               180:  0x0011                           LSH CaseValue=17
                                                                                                                                                                               181:  0x0000                           MSH CaseValue=17
                                                                                                                                                                               182:  0x001E                           CaseBranch=207

000039              Case SLP_Topic                                                                                                                                             183:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000040                  Dim tmp As Float = 0
000041                  If Float.TryConvert(tmp_str, tmp) Then                                                                                                                 184:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                               185:  0x8800   PushLocalI32            tmp
                                                                                                                                                                               186:  0x008E   TryCvtStrToFlt          
                                                                                                                                                                               187:  0x9000   PopLocalI32             tmp
                                                                                                                                                                               188:  0x3C0A   BranchFalse             199

000042                      SeaLevelPressure = tmp                                                                                                                             189:  0x8800   PushLocalI32            tmp
                                                                                                                                                                               190:  0x000C   PushGlobal              
                                                                                                                                                                               191:  0xD018   PopFieldI32             SeaLevelPressure

000043                      MQTT.Publish("SeaLevelPressure", SeaLevelPressure)                                                                                                 192:  0x8422   PushLiteral             34
                                                                                                                                                                               193:  0x000C   PushGlobal              
                                                                                                                                                                               194:  0xC018   PushFieldI32            SeaLevelPressure
                                                                                                                                                                               195:  0x1406   Box                     BoxFloat
                                                                                                                                                                               196:  0x000E   PushNothing             
                                                                                                                                                                               197:  0x1D9B   BranchSubr              609

                                                                                                                                                                               198:  0x4006   Branch                  205
000044                  Else                                                                                                                                                   

000045                      MQTT.Publish("SeaLevelPressure", tmp_str + " :Float Conversion failed")                                                                            199:  0x8422   PushLiteral             34
                                                                                                                                                                               200:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                               201:  0x8428   PushLiteral             40
                                                                                                                                                                               202:  0x0056   StrAdd                  
                                                                                                                                                                               203:  0x000E   PushNothing             
                                                                                                                                                                               204:  0x1D74   BranchSubr              577

000046                  End If   
                                                                                                                                                                               205:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               206:  0x4024   Branch                  243
000047              Case Sub_Topic                                                                                                                                             207:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000048                  Dim tmp As Boolean = True                                                                                                                              208:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               209:  0x9000   PopLocalI32             tmp

000049                  If Boolean.TryConvert(tmp_str, tmp) Then                                                                                                               210:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                               211:  0x8800   PushLocalI32            tmp
                                                                                                                                                                               212:  0x008A   TryCvtStrToBoo          
                                                                                                                                                                               213:  0x9000   PopLocalI32             tmp
                                                                                                                                                                               214:  0x3C0A   BranchFalse             225

000050                      Publish_data = tmp                                                                                                                                 215:  0x8800   PushLocalI32            tmp
                                                                                                                                                                               216:  0x000C   PushGlobal              
                                                                                                                                                                               217:  0xC814   PopFieldU8              Publish_data

000051                      MQTT.Publish("Publish", Publish_data)                                                                                                              218:  0x8430   PushLiteral             48
                                                                                                                                                                               219:  0x000C   PushGlobal              
                                                                                                                                                                               220:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               221:  0x1401   Box                     BoxBoolean
                                                                                                                                                                               222:  0x000E   PushNothing             
                                                                                                                                                                               223:  0x1D81   BranchSubr              609

                                                                                                                                                                               224:  0x4006   Branch                  231
000052                  Else                                                                                                                                                   

000053                      MQTT.Publish("Publish", tmp_str + " :Boolean Conversion failed")                                                                                   225:  0x8430   PushLiteral             48
                                                                                                                                                                               226:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                               227:  0x8433   PushLiteral             51
                                                                                                                                                                               228:  0x0056   StrAdd                  
                                                                                                                                                                               229:  0x000E   PushNothing             
                                                                                                                                                                               230:  0x1D5A   BranchSubr              577

000054                  End If
                                                                                                                                                                               231:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               232:  0x400A   Branch                  243
000055              Case Else                                                                                                                                                  

000056                  MQTT.Publish("Warn", msg.Topic+ ":" + tmp_str " Received but not Processed")                                                                           233:  0x843B   PushLiteral             59
                                                                                                                                                                               234:  0x8C00   PushLocalRef            msg
                                                                                                                                                                               235:  0xC400   PushFieldRef            Offset=0
                                                                                                                                                                               236:  0x843E   PushLiteral             62
                                                                                                                                                                               237:  0x0056   StrAdd                  
                                                                                                                                                                               238:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                               239:  0x8440   PushLiteral             64
                                                                                                                                                                               240:  0x0056   StrAdd                  
                                                                                                                                                                               241:  0x000E   PushNothing             
                                                                                                                                                                               242:  0x1D4E   BranchSubr              577

000057          End Select
000058      End Event                                                                                                                                                          243:  0x0091   Return                  

000059      
                                                                                                                                                                               244:  0x000A                           TimeValue=10
                                                                                                                                                                               245:  0x0300                           EventCategory=TimeInSeconds
000060      Shared Event Publish() RaiseEvent Every 10 Seconds                                                                                                                 246:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000061          LedGreen = True                                                                                                                                                247:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               248:  0x080A   PopAndSetDigitalPin     Pin10

000062          Select data                                                                                                                                                    249:  0x000C   PushGlobal              
                                                                                                                                                                               250:  0xC01C   PushFieldI32            data
                                                                                                                                                                               251:  0x0122   CaseComputed            
                                                                                                                                                                               252:  0x0002                           CaseCommonClass=Byte
                                                                                                                                                                               253:  0x0009                           NumberOfCaseEntries=9
                                                                                                                                                                               254:  0x00E6                           CaseElseBranch=485
                                                                                                                                                                               255:  0x0002                           CaseValue=2
                                                                                                                                                                               256:  0x0012                           CaseBranch=273
                                                                                                                                                                               257:  0x0003                           CaseValue=3
                                                                                                                                                                               258:  0x002C                           CaseBranch=299
                                                                                                                                                                               259:  0x0004                           CaseValue=4
                                                                                                                                                                               260:  0x0041                           CaseBranch=320
                                                                                                                                                                               261:  0x0005                           CaseValue=5
                                                                                                                                                                               262:  0x005F                           CaseBranch=350
                                                                                                                                                                               263:  0x0006                           CaseValue=6
                                                                                                                                                                               264:  0x0077                           CaseBranch=374
                                                                                                                                                                               265:  0x0007                           CaseValue=7
                                                                                                                                                                               266:  0x008F                           CaseBranch=398
                                                                                                                                                                               267:  0x0008                           CaseValue=8
                                                                                                                                                                               268:  0x00A7                           CaseBranch=422
                                                                                                                                                                               269:  0x0009                           CaseValue=9
                                                                                                                                                                               270:  0x00C8                           CaseBranch=455
                                                                                                                                                                               271:  0x000A                           CaseValue=10
                                                                                                                                                                               272:  0x00E2                           CaseBranch=481

000063              Case dataType.UPTIME                                                                                                                                       273:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000064                  Dim Uptime As Integer = Device.Uptime()                                                                                                                274:  0x00F9   DeviceUptime            
                                                                                                                                                                               275:  0x9000   PopLocalI32             Uptime

000065                  If Publish_data Then                                                                                                                                   276:  0x000C   PushGlobal              
                                                                                                                                                                               277:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               278:  0x3C05   BranchFalse             284

000066                      MQTT.Publish("Uptime", Uptime)                                                                                                                     279:  0x8448   PushLiteral             72
                                                                                                                                                                               280:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                               281:  0x1404   Box                     BoxInteger
                                                                                                                                                                               282:  0x000E   PushNothing             
                                                                                                                                                                               283:  0x1D45   BranchSubr              609

000067                  End If
000068                  If Uptime < Short.MaxValue Then                                                                                                                        284:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                               285:  0x0110   PushConstI32            32767 (0x00007FFF)
                                                                                                                                                                               286:  0x7FFF                           
                                                                                                                                                                               287:  0x0000                           
                                                                                                                                                                               288:  0x3405   BranchGE                294

000069                      MQTT.BeaconPublish(dataType.UPTIME, Uptime)                                                                                                        289:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               290:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                               291:  0x1404   Box                     BoxInteger
                                                                                                                                                                               292:  0x000E   PushNothing             
                                                                                                                                                                               293:  0x1D6C   BranchSubr              658

000070                  End If
000071                  data = dataType.BATTVOLTAGE                                                                                                                            294:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               295:  0x000C   PushGlobal              
                                                                                                                                                                               296:  0xD01C   PopFieldI32             data

                                                                                                                                                                               297:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               298:  0x40BD   Branch                  488
000072              Case dataType.BATTVOLTAGE                                                                                                                                  299:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000073                  Dim BattVolt As Integer = Device.BatteryVoltage()                                                                                                      300:  0x00ED   DeviceBatteryVoltage    
                                                                                                                                                                               301:  0x9000   PopLocalI32             BattVolt

000074                  If Publish_data Then                                                                                                                                   302:  0x000C   PushGlobal              
                                                                                                                                                                               303:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               304:  0x3C05   BranchFalse             310

000075                      MQTT.Publish("BatteryVoltage", BattVolt)                                                                                                           305:  0x844B   PushLiteral             75
                                                                                                                                                                               306:  0x8800   PushLocalI32            BattVolt
                                                                                                                                                                               307:  0x1404   Box                     BoxInteger
                                                                                                                                                                               308:  0x000E   PushNothing             
                                                                                                                                                                               309:  0x1D2B   BranchSubr              609

000076                  End If
000077                  MQTT.BeaconPublish(dataType.BATTVOLTAGE, BattVolt)                                                                                                     310:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               311:  0x8800   PushLocalI32            BattVolt
                                                                                                                                                                               312:  0x1404   Box                     BoxInteger
                                                                                                                                                                               313:  0x000E   PushNothing             
                                                                                                                                                                               314:  0x1D57   BranchSubr              658

000078                  data = dataType.TEMPERATURE                                                                                                                            315:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               316:  0x000C   PushGlobal              
                                                                                                                                                                               317:  0xD01C   PopFieldI32             data

                                                                                                                                                                               318:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               319:  0x40A8   Branch                  488
000079              Case dataType.TEMPERATURE                                                                                                                                  320:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000080                  Dim TempC As Float = TempSensor.GetTemp                                                                                                                321:  0x000E   PushNothing             
                                                                                                                                                                               322:  0x1CAA   BranchSubr              493
                                                                                                                                                                               323:  0x9000   PopLocalI32             TempC

000081                  If Publish_data Then                                                                                                                                   324:  0x000C   PushGlobal              
                                                                                                                                                                               325:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               326:  0x3C05   BranchFalse             332

000082                      MQTT.Publish("Temperature", TempC)                                                                                                                 327:  0x8450   PushLiteral             80
                                                                                                                                                                               328:  0x8800   PushLocalI32            TempC
                                                                                                                                                                               329:  0x1406   Box                     BoxFloat
                                                                                                                                                                               330:  0x000E   PushNothing             
                                                                                                                                                                               331:  0x1D15   BranchSubr              609

000083                  End If
000084                  MQTT.BeaconPublish(dataType.TEMPERATURE, TempC)                                                                                                        332:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               333:  0x8800   PushLocalI32            TempC
                                                                                                                                                                               334:  0x1406   Box                     BoxFloat
                                                                                                                                                                               335:  0x000E   PushNothing             
                                                                                                                                                                               336:  0x1D41   BranchSubr              658

000085                  If BME280_1.online Then                                                                                                                                337:  0x000C   PushGlobal              
                                                                                                                                                                               338:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               339:  0xB808   PushFieldU8             online
                                                                                                                                                                               340:  0x3C04   BranchFalse             345

000086                      data = dataType.TEMPERATURE2                                                                                                                       341:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               342:  0x000C   PushGlobal              
                                                                                                                                                                               343:  0xD01C   PopFieldI32             data

                                                                                                                                                                               344:  0x4003   Branch                  348
000087                  Else                                                                                                                                                   

000088                      data = dataType.UPTIME                                                                                                                             345:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               346:  0x000C   PushGlobal              
                                                                                                                                                                               347:  0xD01C   PopFieldI32             data

000089                  End If
                                                                                                                                                                               348:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               349:  0x408A   Branch                  488
000090              Case dataType.TEMPERATURE2                                                                                                                                 350:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000091                  //external temperature
000092                  Dim TempC As Float = BME280_1.readTemperature                                                                                                          351:  0x000C   PushGlobal              
                                                                                                                                                                               352:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               353:  0x5800   JumpSubr                1485
                                                                                                                                                                               354:  0x05CD                           
                                                                                                                                                                               355:  0x9000   PopLocalI32             TempC

000093                  If Publish_data Then                                                                                                                                   356:  0x000C   PushGlobal              
                                                                                                                                                                               357:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               358:  0x3C05   BranchFalse             364

000094                      MQTT.Publish("Temperature2", TempC)                                                                                                                359:  0x8454   PushLiteral             84
                                                                                                                                                                               360:  0x8800   PushLocalI32            TempC
                                                                                                                                                                               361:  0x1406   Box                     BoxFloat
                                                                                                                                                                               362:  0x000E   PushNothing             
                                                                                                                                                                               363:  0x1CF5   BranchSubr              609

000095                  End If
000096                  MQTT.BeaconPublish(dataType.TEMPERATURE2, TempC)                                                                                                       364:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               365:  0x8800   PushLocalI32            TempC
                                                                                                                                                                               366:  0x1406   Box                     BoxFloat
                                                                                                                                                                               367:  0x000E   PushNothing             
                                                                                                                                                                               368:  0x1D21   BranchSubr              658

000097                  data = dataType.HUMIDITY                                                                                                                               369:  0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               370:  0x000C   PushGlobal              
                                                                                                                                                                               371:  0xD01C   PopFieldI32             data

                                                                                                                                                                               372:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               373:  0x4072   Branch                  488
000098              Case dataType.HUMIDITY                                                                                                                                     374:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000099                  //external humidity
000100                  Dim Humidity As Float = BME280_1.readHumidity                                                                                                          375:  0x000C   PushGlobal              
                                                                                                                                                                               376:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               377:  0x5800   JumpSubr                1732
                                                                                                                                                                               378:  0x06C4                           
                                                                                                                                                                               379:  0x9000   PopLocalI32             Humidity

000101                  If Publish_data Then                                                                                                                                   380:  0x000C   PushGlobal              
                                                                                                                                                                               381:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               382:  0x3C05   BranchFalse             388

000102                      MQTT.Publish("Humidity", Humidity)                                                                                                                 383:  0x8459   PushLiteral             89
                                                                                                                                                                               384:  0x8800   PushLocalI32            Humidity
                                                                                                                                                                               385:  0x1406   Box                     BoxFloat
                                                                                                                                                                               386:  0x000E   PushNothing             
                                                                                                                                                                               387:  0x1CDD   BranchSubr              609

000103                  End If
000104                  MQTT.BeaconPublish(dataType.HUMIDITY, Humidity)                                                                                                        388:  0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               389:  0x8800   PushLocalI32            Humidity
                                                                                                                                                                               390:  0x1406   Box                     BoxFloat
                                                                                                                                                                               391:  0x000E   PushNothing             
                                                                                                                                                                               392:  0x1D09   BranchSubr              658

000105                  data = dataType.DEWPOINT                                                                                                                               393:  0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               394:  0x000C   PushGlobal              
                                                                                                                                                                               395:  0xD01C   PopFieldI32             data

                                                                                                                                                                               396:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               397:  0x405A   Branch                  488
000106              Case dataType.DEWPOINT                                                                                                                                     398:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000107                  //external dewpoint
000108                  Dim Dewpoint As Float = BME280_1.readDewPoint                                                                                                          399:  0x000C   PushGlobal              
                                                                                                                                                                               400:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               401:  0x5800   JumpSubr                1924
                                                                                                                                                                               402:  0x0784                           
                                                                                                                                                                               403:  0x9000   PopLocalI32             Dewpoint

000109                  If Publish_data Then                                                                                                                                   404:  0x000C   PushGlobal              
                                                                                                                                                                               405:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               406:  0x3C05   BranchFalse             412

000110                      MQTT.Publish("Dewpoint", Dewpoint)                                                                                                                 407:  0x845D   PushLiteral             93
                                                                                                                                                                               408:  0x8800   PushLocalI32            Dewpoint
                                                                                                                                                                               409:  0x1406   Box                     BoxFloat
                                                                                                                                                                               410:  0x000E   PushNothing             
                                                                                                                                                                               411:  0x1CC5   BranchSubr              609

000111                  End If
000112                  MQTT.BeaconPublish(dataType.DEWPOINT, Dewpoint)                                                                                                        412:  0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               413:  0x8800   PushLocalI32            Dewpoint
                                                                                                                                                                               414:  0x1406   Box                     BoxFloat
                                                                                                                                                                               415:  0x000E   PushNothing             
                                                                                                                                                                               416:  0x1CF1   BranchSubr              658

000113                  data = dataType.PRESSURE                                                                                                                               417:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               418:  0x000C   PushGlobal              
                                                                                                                                                                               419:  0xD01C   PopFieldI32             data

                                                                                                                                                                               420:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               421:  0x4042   Branch                  488
000114              Case dataType.PRESSURE                                                                                                                                     422:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000115                  //external pressure
000116                  Dim Pressure As Float = BME280_1.readPressure                                                                                                          423:  0x000C   PushGlobal              
                                                                                                                                                                               424:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               425:  0x5800   JumpSubr                1582
                                                                                                                                                                               426:  0x062E                           
                                                                                                                                                                               427:  0x9000   PopLocalI32             Pressure

000117                  If Publish_data Then                                                                                                                                   428:  0x000C   PushGlobal              
                                                                                                                                                                               429:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               430:  0x3C05   BranchFalse             436

000118                      MQTT.Publish("Pressure", Pressure)                                                                                                                 431:  0x8461   PushLiteral             97
                                                                                                                                                                               432:  0x8800   PushLocalI32            Pressure
                                                                                                                                                                               433:  0x1406   Box                     BoxFloat
                                                                                                                                                                               434:  0x000E   PushNothing             
                                                                                                                                                                               435:  0x1CAD   BranchSubr              609

000119                  End If
000120                  MQTT.BeaconPublish(dataType.PRESSURE, Pressure)                                                                                                        436:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               437:  0x8800   PushLocalI32            Pressure
                                                                                                                                                                               438:  0x1406   Box                     BoxFloat
                                                                                                                                                                               439:  0x000E   PushNothing             
                                                                                                                                                                               440:  0x1CD9   BranchSubr              658

000121                  If SeaLevelPressure <> 0 Then                                                                                                                          441:  0x000C   PushGlobal              
                                                                                                                                                                               442:  0xC018   PushFieldI32            SeaLevelPressure
                                                                                                                                                                               443:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               444:  0x003A   FltCmp                  
                                                                                                                                                                               445:  0x2004   BranchEQ                450

000122                      data = dataType.ALTITUDE                                                                                                                           446:  0x8009   PushConstU10            9 (0x0009)
                                                                                                                                                                               447:  0x000C   PushGlobal              
                                                                                                                                                                               448:  0xD01C   PopFieldI32             data

                                                                                                                                                                               449:  0x4003   Branch                  453
000123                  Else                                                                                                                                                   

000124                      data = dataType.UPTIME                                                                                                                             450:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               451:  0x000C   PushGlobal              
                                                                                                                                                                               452:  0xD01C   PopFieldI32             data

000125                  End If
                                                                                                                                                                               453:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               454:  0x4021   Branch                  488
000126              Case dataType.ALTITUDE                                                                                                                                     455:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000127                  //Altitude
000128                  Dim Altitude As Float = BME280_1.readAltitude(SeaLevelPressure)                                                                                        456:  0x000C   PushGlobal              
                                                                                                                                                                               457:  0xC018   PushFieldI32            SeaLevelPressure
                                                                                                                                                                               458:  0x000C   PushGlobal              
                                                                                                                                                                               459:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               460:  0x5800   JumpSubr                1827
                                                                                                                                                                               461:  0x0723                           
                                                                                                                                                                               462:  0x9000   PopLocalI32             Altitude

000129                  If Publish_data Then                                                                                                                                   463:  0x000C   PushGlobal              
                                                                                                                                                                               464:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               465:  0x3C05   BranchFalse             471

000130                      MQTT.Publish("Altitude", Altitude)                                                                                                                 466:  0x8465   PushLiteral             101
                                                                                                                                                                               467:  0x8800   PushLocalI32            Altitude
                                                                                                                                                                               468:  0x1406   Box                     BoxFloat
                                                                                                                                                                               469:  0x000E   PushNothing             
                                                                                                                                                                               470:  0x1C8A   BranchSubr              609

000131                  End If
000132                  MQTT.BeaconPublish(dataType.ALTITUDE, Altitude)                                                                                                        471:  0x8009   PushConstU10            9 (0x0009)
                                                                                                                                                                               472:  0x8800   PushLocalI32            Altitude
                                                                                                                                                                               473:  0x1406   Box                     BoxFloat
                                                                                                                                                                               474:  0x000E   PushNothing             
                                                                                                                                                                               475:  0x1CB6   BranchSubr              658

000133                  //increment data
000134                  data = dataType.UPTIME                                                                                                                                 476:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               477:  0x000C   PushGlobal              
                                                                                                                                                                               478:  0xD01C   PopFieldI32             data

                                                                                                                                                                               479:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               480:  0x4007   Branch                  488
000135              Case dataType.MOTION                                                                                                                                       

000136                  //increment data
000137                  data = dataType.UPTIME                                                                                                                                 481:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               482:  0x000C   PushGlobal              
                                                                                                                                                                               483:  0xD01C   PopFieldI32             data

                                                                                                                                                                               484:  0x4003   Branch                  488
000138              Case Else                                                                                                                                                  

000139                  data = dataType.UPTIME                                                                                                                                 485:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               486:  0x000C   PushGlobal              
                                                                                                                                                                               487:  0xD01C   PopFieldI32             data

000140          End Select
000141          LedGreen = False                                                                                                                                               488:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               489:  0x080A   PopAndSetDigitalPin     Pin10

000142      End Event                                                                                                                                                          490:  0x0091   Return                  

000143  End Class                                                                                                                                                              111:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for Main
    Block Class (Line 8:143)
        Main            Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        Float           SeaLevelPressure(SharedValTypVariableOffset=24)
        dataType        data            (SharedValTypVariableOffset=28)
        BME280          BME280_1        (SharedRefTypVariableOffset=0)
        String          SLP_Topic       (Literal="MCThings/SeaLevelPressure")
        String          Sub_Topic       (Literal="MCThings/Publish")
        Boolean         Publish_data    (SharedValTypVariableOffset=20)
        Block Event Boot (Line 17:28)
            Block If Then  (Line 22:25)
            End Block
        End Block
        Block Event NewGateway (Line 30:33)
        End Block
        Block Event SubscriptionDelivery (Line 35:58)
            Message         msg             (LocalRefTypVariableOffset=0)
            String          tmp_str         (LocalRefTypVariableOffset=1)
        End Block
        Block Event Publish (Line 60:142)
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000001  Class TempSensor                                                                                                                                                       491:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000002      // Function returns the temperature in degree celcius or 
000003      // Float.NaN if something is wrong
000004      Shared Function GetTemp() As Float                                                                                                                                 493:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               494:  0xE022   AllocateStackSpace      ValTypeSize=1, RefTypeSize=2

000005          // Define the properties of the I2C peripheral and device address
000006          Dim sensor As I2c
000007          sensor = I2c.Create(250000, Pin.SCL, Pin.SDA, 0x48)                                                                                                            495:  0x0110   PushConstI32            250000 (0x0003D090)
                                                                                                                                                                               496:  0xD090                           
                                                                                                                                                                               497:  0x0003                           
                                                                                                                                                                               498:  0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                               499:  0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                               500:  0x8048   PushConstU10            72 (0x0048)
                                                                                                                                                                               501:  0x803B   PushConstU10            59 (0x003B)
                                                                                                                                                                               502:  0x0010   ClassNew                
                                                                                                                                                                               503:  0x9400   PopLocalRef             sensor

000008          
000009          // Power up the sensor and give it some time to settle
000010          Device.EnableTempSensor()                                                                                                                                      504:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               505:  0x00F0   DeviceEnableTemp        

000011          Thread.Sleep(40000) // See page 13 of the datasheet                                                                                                            506:  0x0110   PushConstI32            40000 (0x00009C40)
                                                                                                                                                                               507:  0x9C40                           
                                                                                                                                                                               508:  0x0000                           
                                                                                                                                                                               509:  0x00D5   ThreadSleep             
                                                                                                                                                                               510:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000012          
000013          // Read the sensor (only 2 bytes to read
000014          Dim res As ListOfByte = sensor.Read(2)                                                                                                                         511:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               512:  0x8C00   PushLocalRef            sensor
                                                                                                                                                                               513:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               514:  0x00E0   I2cDeviceRead           
                                                                                                                                                                               515:  0x9401   PopLocalRef             res

000015          
000016          // See Tmp102 documentation how to interpret the data (page 8)
000017          Dim temp As Float = Float.NaN                                                                                                                                  516:  0x0110   PushConstI32            -4194304 (0xFFC00000)
                                                                                                                                                                               517:  0x0000                           
                                                                                                                                                                               518:  0xFFC0                           
                                                                                                                                                                               519:  0x9000   PopLocalI32             temp

000018          If res <> Nothing Then                                                                                                                                         520:  0x8C01   PushLocalRef            res
                                                                                                                                                                               521:  0x000E   PushNothing             
                                                                                                                                                                               522:  0x000B   RefCmpNE                
                                                                                                                                                                               523:  0x3C16   BranchFalse             546
                                                                                                                                                                               524:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000019              // Shift the partial part to the right nibble
000020              Dim part As Float = res(1) >> 4                                                                                                                            525:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               526:  0x8C01   PushLocalRef            res
                                                                                                                                                                               527:  0x00B4   ListItemGet             
                                                                                                                                                                               528:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               529:  0x002F   IntShr                  
                                                                                                                                                                               530:  0x007E   CvtIntToFlt             
                                                                                                                                                                               531:  0x9001   PopLocalI32             part

000021              // Temperature partial is 1/16*n where n is between 0 and 15            
000022              part = part / 16                                                                                                                                           532:  0x8801   PushLocalI32            part
                                                                                                                                                                               533:  0xEA10   PushConstFlt            16.0
                                                                                                                                                                               534:  0x003B   FltDiv                  
                                                                                                                                                                               535:  0x9001   PopLocalI32             part

000023              // Sign extend the byte to an integer
000024              temp = res(0).SignExtend() + part                                                                                                                          536:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               537:  0x8C01   PushLocalRef            res
                                                                                                                                                                               538:  0x00B4   ListItemGet             
                                                                                                                                                                               539:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               540:  0x0005   SignExtend              
                                                                                                                                                                               541:  0x8801   PushLocalI32            part
                                                                                                                                                                               542:  0x0078   CvtIntToFlt1            
                                                                                                                                                                               543:  0x0039   FltAdd                  
                                                                                                                                                                               544:  0x9000   PopLocalI32             temp

                                                                                                                                                                               545:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
000025          End If                                                                                                                                                         

000026          
000027          // power off
000028          Device.DisableTempSensor()                                                                                                                                     546:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               547:  0x00F0   DeviceEnableTemp        

000029          Return temp                                                                                                                                                    548:  0x8800   PushLocalI32            temp
                                                                                                                                                                               549:  0x0092   ReturnValType           

000030      End Function                                                                                                                                                       550:  0x0093   Return0                 

000031      
000032      Shared Function GetDieTemp() As Float                                                                                                                              551:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000033          // Just get the temperature and return
000034          Return Device.TempDie                                                                                                                                          552:  0x00F7   DeviceTempDie           
                                                                                                                                                                               553:  0x0092   ReturnValType           

000035      End Function                                                                                                                                                       554:  0x0093   Return0                 

000036      
000037      Shared Function ToFarenheit(celcius As Float) As Float                                                                                                             555:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000038          Return (celcius * 9) / 5 + 32                                                                                                                                  556:  0x8800   PushLocalI32            celcius
                                                                                                                                                                               557:  0xEA09   PushConstFlt            9.0
                                                                                                                                                                               558:  0x003C   FltMul                  
                                                                                                                                                                               559:  0xEA05   PushConstFlt            5.0
                                                                                                                                                                               560:  0x003B   FltDiv                  
                                                                                                                                                                               561:  0xEA20   PushConstFlt            32.0
                                                                                                                                                                               562:  0x0039   FltAdd                  
                                                                                                                                                                               563:  0x0092   ReturnValType           

000039      End Function                                                                                                                                                       564:  0x0093   Return0                 

000040      
000041      Shared Function ToCelcius(farenheit As Float) As Float                                                                                                             565:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000042          Return (farenheit - 32) * 5 / 9                                                                                                                                566:  0x8800   PushLocalI32            farenheit
                                                                                                                                                                               567:  0xEA20   PushConstFlt            32.0
                                                                                                                                                                               568:  0x003F   FltSub                  
                                                                                                                                                                               569:  0xEA05   PushConstFlt            5.0
                                                                                                                                                                               570:  0x003C   FltMul                  
                                                                                                                                                                               571:  0xEA09   PushConstFlt            9.0
                                                                                                                                                                               572:  0x003B   FltDiv                  
                                                                                                                                                                               573:  0x0092   ReturnValType           

000043      End Function                                                                                                                                                       574:  0x0093   Return0                 

000044      
000045  End Class                                                                                                                                                              492:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for TempSensor
    Block Class (Line 1:45)
        TempSensor      Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        Block Function GetTemp (Line 4:30)
            I2c             sensor          (LocalRefTypVariableOffset=0)
            ListOfByte      res             (LocalRefTypVariableOffset=1)
            Float           temp            (LocalValTypVariableOffset=0)
            Block If Then  (Line 18:25)
                Float           part            (LocalValTypVariableOffset=1)
            End Block
        End Block
        Block Function GetDieTemp (Line 32:35)
        End Block
        Block Function ToFarenheit (Line 37:39)
            Float           celcius         (LocalValTypVariableOffset=0)
        End Block
        Block Function ToCelcius (Line 41:43)
            Float           farenheit       (LocalValTypVariableOffset=0)
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000003  Enum dataType As Byte
000004      NONE = 0
000005      VERSION = 1 //default beacon data for MQTT
000006      UPTIME = 2
000007      BATTVOLTAGE = 3
000008      TEMPERATURE = 4
000009      TEMPERATURE2 = 5
000010      HUMIDITY = 6
000011      DEWPOINT = 7
000012      PRESSURE = 8
000013      ALTITUDE = 9
000014      MOTION = 10
000015      DOOR = 11
000016      KNOCK = 12
000017  End Enum

****** BLOCKS and VARIABLES for dataType
    Block Struct (Line 3:17)
        dataType        NONE            (Literal=0)
        dataType        VERSION         (Literal=1)
        dataType        UPTIME          (Literal=2)
        dataType        BATTVOLTAGE     (Literal=3)
        dataType        TEMPERATURE     (Literal=4)
        dataType        TEMPERATURE2    (Literal=5)
        dataType        HUMIDITY        (Literal=6)
        dataType        DEWPOINT        (Literal=7)
        dataType        PRESSURE        (Literal=8)
        dataType        ALTITUDE        (Literal=9)
        dataType        MOTION          (Literal=10)
        dataType        DOOR            (Literal=11)
        dataType        KNOCK           (Literal=12)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000019  Class MQTT                                                                                                                                                             575:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000020      Shared mcUIDString As String
000021      
000022      Shared Sub Publish(topic As String, value As String)                                                                                                               577:  0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                               578:  0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000023          If mcUIDString = Nothing Then                                                                                                                                  579:  0x000C   PushGlobal              
                                                                                                                                                                               580:  0xC404   PushFieldRef            mcUIDString
                                                                                                                                                                               581:  0x000E   PushNothing             
                                                                                                                                                                               582:  0x000A   RefCmpEQ                
                                                                                                                                                                               583:  0x3C06   BranchFalse             590

000024              mcUIDString = Device.mcUID().ToString("X8")                                                                                                                584:  0x8469   PushLiteral             105
                                                                                                                                                                               585:  0x00F8   DeviceUID               
                                                                                                                                                                               586:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               587:  0x0069   StrFormat               
                                                                                                                                                                               588:  0x000C   PushGlobal              
                                                                                                                                                                               589:  0xD404   PopFieldRef             mcUIDString

000025          End If
000026          Dim text_string As ListOfByte = New ListOfByte()                                                                                                               590:  0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                               591:  0x0010   ClassNew                
                                                                                                                                                                               592:  0x9402   PopLocalRef             text_string

000027          text_string.Add(value)                                                                                                                                         593:  0x8C01   PushLocalRef            value
                                                                                                                                                                               594:  0x8C02   PushLocalRef            text_string
                                                                                                                                                                               595:  0x00A6   ListAddString           

000028          Lplan.Publish("MCThings/" + mcUIDString + "/" + topic, text_string)                                                                                            596:  0x846B   PushLiteral             107
                                                                                                                                                                               597:  0x000C   PushGlobal              
                                                                                                                                                                               598:  0xC404   PushFieldRef            mcUIDString
                                                                                                                                                                               599:  0x0056   StrAdd                  
                                                                                                                                                                               600:  0x846F   PushLiteral             111
                                                                                                                                                                               601:  0x0056   StrAdd                  
                                                                                                                                                                               602:  0x8C00   PushLocalRef            topic
                                                                                                                                                                               603:  0x0056   StrAdd                  
                                                                                                                                                                               604:  0x8C02   PushLocalRef            text_string
                                                                                                                                                                               605:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               606:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               607:  0x0101   LplanPublish            

000029      End Sub                                                                                                                                                            608:  0x0091   Return                  

000030      
000031      Shared Sub Publish(topic As String, value As Object)                                                                                                               609:  0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                               610:  0xE002   AllocateStackSpace      ValTypeSize=0, RefTypeSize=2

000032          Dim text As String = value.ToString()                                                                                                                          611:  0x8C01   PushLocalRef            value
                                                                                                                                                                               612:  0x0081   CvtObjToStr             
                                                                                                                                                                               613:  0x9402   PopLocalRef             text

000033          If mcUIDString = Nothing Then                                                                                                                                  614:  0x000C   PushGlobal              
                                                                                                                                                                               615:  0xC404   PushFieldRef            mcUIDString
                                                                                                                                                                               616:  0x000E   PushNothing             
                                                                                                                                                                               617:  0x000A   RefCmpEQ                
                                                                                                                                                                               618:  0x3C06   BranchFalse             625

000034              mcUIDString = Device.mcUID().ToString("X8")                                                                                                                619:  0x8469   PushLiteral             105
                                                                                                                                                                               620:  0x00F8   DeviceUID               
                                                                                                                                                                               621:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               622:  0x0069   StrFormat               
                                                                                                                                                                               623:  0x000C   PushGlobal              
                                                                                                                                                                               624:  0xD404   PopFieldRef             mcUIDString

000035          End If
000036          Dim text_string As ListOfByte = New ListOfByte()                                                                                                               625:  0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                               626:  0x0010   ClassNew                
                                                                                                                                                                               627:  0x9403   PopLocalRef             text_string

000037          text_string.Add(text)                                                                                                                                          628:  0x8C02   PushLocalRef            text
                                                                                                                                                                               629:  0x8C03   PushLocalRef            text_string
                                                                                                                                                                               630:  0x00A6   ListAddString           

000038          Lplan.Publish("MCThings/" + mcUIDString + "/" + topic, text_string)                                                                                            631:  0x846B   PushLiteral             107
                                                                                                                                                                               632:  0x000C   PushGlobal              
                                                                                                                                                                               633:  0xC404   PushFieldRef            mcUIDString
                                                                                                                                                                               634:  0x0056   StrAdd                  
                                                                                                                                                                               635:  0x846F   PushLiteral             111
                                                                                                                                                                               636:  0x0056   StrAdd                  
                                                                                                                                                                               637:  0x8C00   PushLocalRef            topic
                                                                                                                                                                               638:  0x0056   StrAdd                  
                                                                                                                                                                               639:  0x8C03   PushLocalRef            text_string
                                                                                                                                                                               640:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               641:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               642:  0x0101   LplanPublish            

000039      End Sub                                                                                                                                                            643:  0x0091   Return                  

000040      
000041      Shared Sub Publish_exact(topic As String, text As String)                                                                                                          644:  0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                               645:  0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000042          Dim text_String As ListOfByte = New ListOfByte()                                                                                                               646:  0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                               647:  0x0010   ClassNew                
                                                                                                                                                                               648:  0x9402   PopLocalRef             text_String

000043          text_String.Add(text)                                                                                                                                          649:  0x8C01   PushLocalRef            text
                                                                                                                                                                               650:  0x8C02   PushLocalRef            text_String
                                                                                                                                                                               651:  0x00A6   ListAddString           

000044          Lplan.Publish(topic, text_String)                                                                                                                              652:  0x8C00   PushLocalRef            topic
                                                                                                                                                                               653:  0x8C02   PushLocalRef            text_String
                                                                                                                                                                               654:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               655:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               656:  0x0101   LplanPublish            

000045      End Sub                                                                                                                                                            657:  0x0091   Return                  

000046      
000047      //**************************************************************************/
000048      //*!
000049      //    Encodes Float or Integer into 4 bytes of beacon data
000050      //    encoding is - byte 0 is data type (numeric value)
000051      //    Integer as Short (2 bytes) 
000052      //    Fraction as byte (1 byte)
000053      //*/
000054      //**************************************************************************/
000055      Shared Sub BeaconPublish(data_Type As Byte, value As Object)                                                                                                       658:  0x1811   EntryPoint              ValTypParams=1, RefTypParams=1
                                                                                                                                                                               659:  0xE041   AllocateStackSpace      ValTypeSize=2, RefTypeSize=1

000056          Dim fraction As Byte = 0
000057          Dim data As Short = 0
000058          If value Is Float Then                                                                                                                                         660:  0x8C00   PushLocalRef            value
                                                                                                                                                                               661:  0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               662:  0x0006   ClassIs                 
                                                                                                                                                                               663:  0x3C12   BranchFalse             682

000059              data = value.Cast(Float).ToShort() //get integer part (16 bit only)                                                                                        664:  0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               665:  0x8C00   PushLocalRef            value
                                                                                                                                                                               666:  0x0007   Cast                    
                                                                                                                                                                               667:  0x007B   CvtFltToInt             
                                                                                                                                                                               668:  0x007F   CvtIntToSho             
                                                                                                                                                                               669:  0x9002   PopLocalI32             data

000060              fraction = ((value.Cast(Float) - data) * 100.0).ToByte()                                                                                                   670:  0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               671:  0x8C00   PushLocalRef            value
                                                                                                                                                                               672:  0x0007   Cast                    
                                                                                                                                                                               673:  0x8802   PushLocalI32            data
                                                                                                                                                                               674:  0x007E   CvtIntToFlt             
                                                                                                                                                                               675:  0x003F   FltSub                  
                                                                                                                                                                               676:  0xEA64   PushConstFlt            100.0
                                                                                                                                                                               677:  0x003C   FltMul                  
                                                                                                                                                                               678:  0x007B   CvtFltToInt             
                                                                                                                                                                               679:  0x007D   CvtIntToByt             
                                                                                                                                                                               680:  0x9001   PopLocalI32             fraction

                                                                                                                                                                               681:  0x4029   Branch                  723
000061          ElseIf value Is Integer Then                                                                                                                                   682:  0x8C00   PushLocalRef            value
                                                                                                                                                                               683:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               684:  0x0006   ClassIs                 
                                                                                                                                                                               685:  0x3C06   BranchFalse             692

000062              data = value.Cast(Integer).ToShort() //get integer part (16 bit only)                                                                                      686:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               687:  0x8C00   PushLocalRef            value
                                                                                                                                                                               688:  0x0007   Cast                    
                                                                                                                                                                               689:  0x007F   CvtIntToSho             
                                                                                                                                                                               690:  0x9002   PopLocalI32             data

                                                                                                                                                                               691:  0x401F   Branch                  723
000063          ElseIf value Is Short Then                                                                                                                                     692:  0x8C00   PushLocalRef            value
                                                                                                                                                                               693:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               694:  0x0006   ClassIs                 
                                                                                                                                                                               695:  0x3C05   BranchFalse             701

000064              data = value.Cast(Short)                                                                                                                                   696:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               697:  0x8C00   PushLocalRef            value
                                                                                                                                                                               698:  0x0007   Cast                    
                                                                                                                                                                               699:  0x9002   PopLocalI32             data

                                                                                                                                                                               700:  0x4016   Branch                  723
000065          ElseIf value Is Byte Then                                                                                                                                      701:  0x8C00   PushLocalRef            value
                                                                                                                                                                               702:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               703:  0x0006   ClassIs                 
                                                                                                                                                                               704:  0x3C05   BranchFalse             710

000066              data = value.Cast(Byte).ToShort() //get integer part (16 bit only)                                                                                         705:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               706:  0x8C00   PushLocalRef            value
                                                                                                                                                                               707:  0x0007   Cast                    
                                                                                                                                                                               708:  0x9002   PopLocalI32             data

                                                                                                                                                                               709:  0x400D   Branch                  723
000067          ElseIf value Is Boolean Then                                                                                                                                   710:  0x8C00   PushLocalRef            value
                                                                                                                                                                               711:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               712:  0x0006   ClassIs                 
                                                                                                                                                                               713:  0x3C09   BranchFalse             723
                                                                                                                                                                               714:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000068              Dim on As Boolean = value.Cast(Boolean)                                                                                                                    715:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               716:  0x8C00   PushLocalRef            value
                                                                                                                                                                               717:  0x0007   Cast                    
                                                                                                                                                                               718:  0x9003   PopLocalI32             on

000069              If on Then                                                                                                                                                 719:  0x8803   PushLocalI32            on
                                                                                                                                                                               720:  0x3C01   BranchFalse             722

000070                  data = 1                                                                                                                                               721:  0x6402   Const1toLocalI32        data

000071              End If
                                                                                                                                                                               722:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
000072          End If                                                                                                                                                         

000073          Dim beaconData As ListOfByte = New ListOfByte()                                                                                                                723:  0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                               724:  0x0010   ClassNew                
                                                                                                                                                                               725:  0x9401   PopLocalRef             beaconData

000074          beaconData.Add(data_Type)                                                                                                                                      726:  0x8800   PushLocalI32            data_Type
                                                                                                                                                                               727:  0x8C01   PushLocalRef            beaconData
                                                                                                                                                                               728:  0x00A3   ListAdd                 

000075          beaconData.AddShort(data)                                                                                                                                      729:  0x8802   PushLocalI32            data
                                                                                                                                                                               730:  0x8C01   PushLocalRef            beaconData
                                                                                                                                                                               731:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               732:  0x00A7   ListAdd2Byte            

000076          beaconData.Add(fraction)                                                                                                                                       733:  0x8801   PushLocalI32            fraction
                                                                                                                                                                               734:  0x8C01   PushLocalRef            beaconData
                                                                                                                                                                               735:  0x00A3   ListAdd                 

000077          Lplan.SetBeaconData(beaconData)                                                                                                                                736:  0x8C01   PushLocalRef            beaconData
                                                                                                                                                                               737:  0x0016   PushConstMinus1         
                                                                                                                                                                               738:  0x0105   LplanSetBeacon          

000078          Lplan.SendBeacon()                                                                                                                                             739:  0x0104   LplanSendBeacon         

000079          //Lplan.BeaconNow () //does not seem to work
000080      End Sub                                                                                                                                                            740:  0x0091   Return                  

000081      
000082      Shared Sub Subscribe(topic As String)                                                                                                                              741:  0x1801   EntryPoint              ValTypParams=0, RefTypParams=1

000083          Lplan.Subscribe(topic)                                                                                                                                         742:  0x8C00   PushLocalRef            topic
                                                                                                                                                                               743:  0x0102   LplanSubscribe          

000084      End Sub                                                                                                                                                            744:  0x0091   Return                  

000085      
000086  End Class                                                                                                                                                              576:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for MQTT
    Block Class (Line 19:86)
        MQTT            Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        String          mcUIDString     (SharedRefTypVariableOffset=4)
        Block Sub Publish (Line 22:29)
            ListOfByte      text_string     (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            String          value           (LocalRefTypVariableOffset=1)
            Block If Then  (Line 23:25)
            End Block
        End Block
        Block Sub Publish (Line 31:39)
            String          text            (LocalRefTypVariableOffset=2)
            ListOfByte      text_string     (LocalRefTypVariableOffset=3)
            String          topic           (LocalRefTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=1)
            Block If Then  (Line 33:35)
            End Block
        End Block
        Block Sub Publish_exact (Line 41:45)
            ListOfByte      text_String     (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
        End Block
        Block Sub BeaconPublish (Line 55:80)
            Byte            fraction        (LocalValTypVariableOffset=1)
            Short           data            (LocalValTypVariableOffset=2)
            ListOfByte      beaconData      (LocalRefTypVariableOffset=1)
            Byte            data_Type       (LocalValTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=0)
            Block If Then  (Line 58:61)
            End Block
            Block ElseIf (Line 61:63)
            End Block
            Block ElseIf (Line 63:65)
            End Block
            Block ElseIf (Line 65:67)
            End Block
            Block ElseIf (Line 67:72)
                Boolean         on              (LocalValTypVariableOffset=3)
                Block If Then  (Line 69:71)
                End Block
            End Block
        End Block
        Block Sub Subscribe (Line 82:84)
            String          topic           (LocalRefTypVariableOffset=0)
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000026  Class BME280                                                                                                                                                           745:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000027      // Class To handle BME280 temperature/humidity/pressure BME280_I2C via I2C
000028      //Supply voltage VDD main supply voltage range: 1.71 V to 3.6 V
000029      //VDDIO interface voltage range: 1.2 V to 3.6 V
000030      //Current consumption 1.8 A @ 1 Hz humidity and temperature
000031      //2.8 A @ 1 Hz pressure and temperature
000032      //3.6 A @ 1 Hz humidity, pressure and temperature
000033      //0.1 A in sleep mode
000034      
000035      Const version As String = "1.01"
000036      
000037      //Registers
000038      Const REGISTER_DIG_T1 As Byte = 0x88
000039      Const REGISTER_DIG_T2 As Byte = 0x8a
000040      Const REGISTER_DIG_T3 As Byte = 0x8c
000041      
000042      Const REGISTER_DIG_P1 As Byte = 0x8e
000043      Const REGISTER_DIG_P2 As Byte = 0x90
000044      Const REGISTER_DIG_P3 As Byte = 0x92
000045      Const REGISTER_DIG_P4 As Byte = 0x94
000046      Const REGISTER_DIG_P5 As Byte = 0x96
000047      Const REGISTER_DIG_P6 As Byte = 0x98
000048      Const REGISTER_DIG_P7 As Byte = 0x9a
000049      Const REGISTER_DIG_P8 As Byte = 0x9c
000050      Const REGISTER_DIG_P9 As Byte = 0x9e
000051      
000052      Const REGISTER_DIG_H1 As Byte = 0xa1
000053      Const REGISTER_DIG_H2 As Byte = 0xe1
000054      Const REGISTER_DIG_H3 As Byte = 0xe3
000055      Const REGISTER_DIG_H4 As Byte = 0xe4
000056      Const REGISTER_DIG_H5 As Byte = 0xe5
000057      Const REGISTER_DIG_H6 As Byte = 0xe7
000058      
000059      Const REGISTER_CHIPID As Byte = 0xd0
000060      Const REGISTER_VERSION As Byte = 0xd1
000061      Const REGISTER_SOFTRESET As Byte = 0xe0
000062      
000063      Const REGISTER_CAL26 As Byte = 0xe1 // R calibration stored in 0xE1-0xF0
000064      
000065      Const REGISTER_CONTROLHUMID As Byte = 0xf2
000066      Const REGISTER_STATUS As Byte = 0xf3
000067      Const REGISTER_CONTROL As Byte = 0xf4
000068      Const REGISTER_CONFIG As Byte = 0xf5
000069      Const REGISTER_PRESSUREDATA As Byte = 0xf7
000070      Const REGISTER_TEMPDATA As Byte = 0xfa
000071      Const REGISTER_HUMIDDATA As Byte = 0xfd
000072      
000073      //mode Constants
000074      Const SLEEP As Byte = 0x00
000075      Const FORCED As Byte = 0x01
000076      Const NORMAL As Byte = 0x03
000077      
000078      //Sampling Constanats
000079      Const SAMPLING_0 As Byte = 0x00
000080      Const SAMPLING_1 As Byte = 0x01
000081      Const SAMPLING_2 As Byte = 0x02
000082      Const SAMPLING_4 As Byte = 0x03
000083      Const SAMPLING_8 As Byte = 0x04
000084      Const SAMPLING_16 As Byte = 0x05
000085      
000086      //IIR Sampling Constanats
000087      Const IIR_SAMPLING_0 As Byte = 0x00
000088      Const IIR_SAMPLING_2 As Byte = 0x01
000089      Const IIR_SAMPLING_4 As Byte = 0x02
000090      Const IIR_SAMPLING_8 As Byte = 0x03
000091      Const IIR_SAMPLING_16 As Byte = 0x04
000092      
000093      //Factory Calibration Factors (Typical Values) (Spakfun typical values)
000094      //SpakFun Typical values found here: https://learn.sparkfun.com/tutorials/sparkfun-bme280-breakout-hookup-guide#res
000095      Public dig_T1 As Integer //converted from unsigned Short  (28224)   (27974)     uint16
000096      Public dig_T2 As Integer //was Short                      (26762)   (26594)     int16
000097      Public dig_T3 As Integer //was Short                      (50)      (50)        int16
000098      
000099      
000100      Public dig_P1 As Integer //converted from unsigned Short  (37424)   (38207)     uint16
000101      Public dig_P2 As Integer //was Short                      (-10666)  (-10702)    int16
000102      Public dig_P3 As Integer //was Short                      (3024)    (3024)      int16
000103      Public dig_P4 As Integer //was Short                      (8136)    (7917)      int16
000104      Public dig_P5 As Integer //was Short                      (-21)     (-118)      int16
000105      Public dig_P6 As Integer //was Short                      (-7)      (-7)        int16
000106      Public dig_P7 As Integer //was Short                      (9900)    (9900)      int16
000107      Public dig_P8 As Integer //was Short                      (-10230)  (-10230)    int16
000108      Public dig_P9 As Integer //was Short                      (4285)    (4285)      int16
000109      
000110      Public dig_H1 As Integer //was Byte                       (75)      (75)        uint8
000111      Public dig_H2 As Integer //was Short                      (353)     (358)       int16
000112      Public dig_H3 As Integer //was Byte                       (0)       (0)         uint8
000113      Public dig_H4 As Integer //was Short                      (340)     (328)       int16
000114      Public dig_H5 As Integer //was Short                      (0)       (0)         int16
000115      Public dig_H6 As Integer //converted from signed Byte     (30)      (30)        uint8
000116      
000117      //raw values as read by readall()
000118      Public temperature_raw As Integer
000119      Public pressure_raw As Integer
000120      Public humidity_raw As Integer
000121      
000122      // Time to take sample, stored so that we don;t have to keep reading the I2C bus
000123      Public sample_time As Integer = 0
000124      
000125      //sensor mode
000126      Public normal_mode As Boolean = True                                                                                                                               746:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               747:  0xA804   PopMemberU8             normal_mode

000127      
000128      //sample rate
000129      Public sample_filter_rate As Byte = 0xa0                                                                                                                           748:  0x80A0   PushConstU10            160 (0x00A0)
                                                                                                                                                                               749:  0xA805   PopMemberU8             sample_filter_rate

000130      
000131      //humidity oversampling
000132      Public hum_oversample As Byte = 0x05                                                                                                                               750:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               751:  0xA806   PopMemberU8             hum_oversample

000133      
000134      //Temperature and Pressure oversampling
000135      Public temp_press_oversample As Byte = 0xb7                                                                                                                        752:  0x80B7   PushConstU10            183 (0x00B7)
                                                                                                                                                                               753:  0xA807   PopMemberU8             temp_press_oversample

000136      
000137      //Ambient Temperature adjustment, used in Humidity and Pressure calculations
000138      Public t_fine As Integer
000139      
000140      //I2c device for BME280_I2C
000141      Public BME280_I2C As I2c
000142      
000143      //Set devices status as online or not
000144      Public online As Boolean = False
000145      
000146      Public Sub New()                                                                                                                                                   755:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               756:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000147          BME280_I2C = I2c.Create(400000, Pin.SCL, Pin.SDA, 0x77) //0x77 is I2C address                                                                                  757:  0x0110   PushConstI32            400000 (0x00061A80)
                                                                                                                                                                               758:  0x1A80                           
                                                                                                                                                                               759:  0x0006                           
                                                                                                                                                                               760:  0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                               761:  0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                               762:  0x8077   PushConstU10            119 (0x0077)
                                                                                                                                                                               763:  0x803B   PushConstU10            59 (0x003B)
                                                                                                                                                                               764:  0x0010   ClassNew                
                                                                                                                                                                               765:  0xB400   PopMemberRef            BME280_I2C

000148          Reset()                                                                                                                                                        766:  0x000D   PushMe                  
                                                                                                                                                                               767:  0x1C55   BranchSubr              853

000149          Thread.Sleep(25000) // wait 25mS for module to come online                                                                                                     768:  0x0110   PushConstI32            25000 (0x000061A8)
                                                                                                                                                                               769:  0x61A8                           
                                                                                                                                                                               770:  0x0000                           
                                                                                                                                                                               771:  0x00D5   ThreadSleep             
                                                                                                                                                                               772:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000150          
000151          Dim chipid As Byte = getChipID()                                                                                                                               773:  0x000D   PushMe                  
                                                                                                                                                                               774:  0x1C20   BranchSubr              807
                                                                                                                                                                               775:  0x9000   PopLocalI32             chipid

000152          
000153          If chipid = 0x60 Then                                                                                                                                          776:  0x8800   PushLocalI32            chipid
                                                                                                                                                                               777:  0x8060   PushConstU10            96 (0x0060)
                                                                                                                                                                               778:  0x241B   BranchNE                806

000154              online = True                                                                                                                                              779:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               780:  0xA808   PopMemberU8             online

000155              readCoefficients() //load calibration factors                                                                                                              781:  0x000D   PushMe                  
                                                                                                                                                                               782:  0x5800   JumpSubr                2209
                                                                                                                                                                               783:  0x08A1                           

000156              // Set Humidity oversampling before Mode (DS 5.4.3) - setMode will do this automatically
000157              // more sampling = more time/current but better accuracy
000158              // Setting oversampling to 0 disables the sensor! retun value is then always 0x8000
000159              // Valid settings are 0,1,2,4,6,8,16
000160              //config will only be writeable in sleep mode, so first insure that.
000161              setMode(SLEEP) //don't really need this after a reset                                                                                                      784:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               785:  0x000D   PushMe                  
                                                                                                                                                                               786:  0x1D13   BranchSubr              1062

000162              setHumiditysamplingValue(1)                                                                                                                                787:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               788:  0x000D   PushMe                  
                                                                                                                                                                               789:  0x1CA8   BranchSubr              958

000163              setTemperaturesamplingValue(16)                                                                                                                            790:  0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               791:  0x000D   PushMe                  
                                                                                                                                                                               792:  0x1CCD   BranchSubr              998

000164              setPressuresamplingValue(16)                                                                                                                               793:  0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               794:  0x000D   PushMe                  
                                                                                                                                                                               795:  0x1CF6   BranchSubr              1042

000165              setIIRfilterValue(0) //(temp and press only) more filtering reduces transients, but increases time/current consumption                                     796:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               797:  0x000D   PushMe                  
                                                                                                                                                                               798:  0x1DE0   BranchSubr              1279

000166              setSamplerateValue(1000) //sample every 1000mS (only in NORMAL mode)                                                                                       799:  0x83E8   PushConstU10            1000 (0x03E8)
                                                                                                                                                                               800:  0x007E   CvtIntToFlt             
                                                                                                                                                                               801:  0x000D   PushMe                  
                                                                                                                                                                               802:  0x1D3B   BranchSubr              1118

000167              //setMode(NORMAL) //Free running mode (continuous sampling at SampleRate)
000168              setMode(FORCED) //only take samples when commanded                                                                                                         803:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               804:  0x000D   PushMe                  
                                                                                                                                                                               805:  0x1D00   BranchSubr              1062

000169          End If
000170      End Sub                                                                                                                                                            806:  0x0097   ReturnMe                

000171      
000172      Public Function getChipID() As Byte                                                                                                                                807:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000173          //ChipID should be 0x60 (96 decimal)
000174          Return read8(REGISTER_CHIPID).ToByte()                                                                                                                         808:  0x80D0   PushConstU10            208 (0x00D0)
                                                                                                                                                                               809:  0x000D   PushMe                  
                                                                                                                                                                               810:  0x5800   JumpSubr                1998
                                                                                                                                                                               811:  0x07CE                           
                                                                                                                                                                               812:  0x007D   CvtIntToByt             
                                                                                                                                                                               813:  0x0092   ReturnValType           

000175      End Function                                                                                                                                                       814:  0x0093   Return0                 

000176      
000177      Public Function getVersion() As Byte                                                                                                                               815:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000178          Return read8(REGISTER_VERSION).ToByte()                                                                                                                        816:  0x80D1   PushConstU10            209 (0x00D1)
                                                                                                                                                                               817:  0x000D   PushMe                  
                                                                                                                                                                               818:  0x5800   JumpSubr                1998
                                                                                                                                                                               819:  0x07CE                           
                                                                                                                                                                               820:  0x007D   CvtIntToByt             
                                                                                                                                                                               821:  0x0092   ReturnValType           

000179      End Function                                                                                                                                                       822:  0x0093   Return0                 

000180      
000181      Public Function getStatus() As Byte                                                                                                                                823:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000182          Return read8(REGISTER_STATUS).ToByte() //bit 3 = measuring, bit 0 = updating                                                                                   824:  0x80F3   PushConstU10            243 (0x00F3)
                                                                                                                                                                               825:  0x000D   PushMe                  
                                                                                                                                                                               826:  0x5800   JumpSubr                1998
                                                                                                                                                                               827:  0x07CE                           
                                                                                                                                                                               828:  0x007D   CvtIntToByt             
                                                                                                                                                                               829:  0x0092   ReturnValType           

000183      End Function                                                                                                                                                       830:  0x0093   Return0                 

000184      
000185      Public Function measuring() As Boolean                                                                                                                             831:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000186          Return (read8(REGISTER_STATUS).ToByte() & 0x04).ToBoolean() //bit 3 = measuring, bit 0 = updating                                                              832:  0x80F3   PushConstU10            243 (0x00F3)
                                                                                                                                                                               833:  0x000D   PushMe                  
                                                                                                                                                                               834:  0x5800   JumpSubr                1998
                                                                                                                                                                               835:  0x07CE                           
                                                                                                                                                                               836:  0x007D   CvtIntToByt             
                                                                                                                                                                               837:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               838:  0x001F   IntAnd                  
                                                                                                                                                                               839:  0x0000   Nop                     
                                                                                                                                                                               840:  0x0092   ReturnValType           

000187      End Function                                                                                                                                                       841:  0x0093   Return0                 

000188      
000189      Public Function updating() As Boolean                                                                                                                              842:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000190          Return (read8(REGISTER_STATUS).ToByte() & 0x01).ToBoolean() //bit 3 = measuring, bit 0 = updating                                                              843:  0x80F3   PushConstU10            243 (0x00F3)
                                                                                                                                                                               844:  0x000D   PushMe                  
                                                                                                                                                                               845:  0x5800   JumpSubr                1998
                                                                                                                                                                               846:  0x07CE                           
                                                                                                                                                                               847:  0x007D   CvtIntToByt             
                                                                                                                                                                               848:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               849:  0x001F   IntAnd                  
                                                                                                                                                                               850:  0x0000   Nop                     
                                                                                                                                                                               851:  0x0092   ReturnValType           

000191      End Function                                                                                                                                                       852:  0x0093   Return0                 

000192      
000193      Public Sub Reset()                                                                                                                                                 853:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000194          write8(REGISTER_SOFTRESET, 0xb6)                                                                                                                               854:  0x80E0   PushConstU10            224 (0x00E0)
                                                                                                                                                                               855:  0x80B6   PushConstU10            182 (0x00B6)
                                                                                                                                                                               856:  0x000D   PushMe                  
                                                                                                                                                                               857:  0x5800   JumpSubr                1968
                                                                                                                                                                               858:  0x07B0                           

000195          Thread.Sleep(25000) // wait 25mS for module to come online                                                                                                     859:  0x0110   PushConstI32            25000 (0x000061A8)
                                                                                                                                                                               860:  0x61A8                           
                                                                                                                                                                               861:  0x0000                           
                                                                                                                                                                               862:  0x00D5   ThreadSleep             
                                                                                                                                                                               863:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000196      End Sub                                                                                                                                                            864:  0x0091   Return                  

000197      
000198      Public Function getSampleValueAsByte(sample As Byte) As Byte                                                                                                       865:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               866:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000199          'converts sampling rate (0-16) as Byte value
000200          Dim Value As Byte
000201          Select sample                                                                                                                                                  867:  0x8800   PushLocalI32            sample
                                                                                                                                                                               868:  0x0122   CaseComputed            
                                                                                                                                                                               869:  0x0002                           CaseCommonClass=Byte
                                                                                                                                                                               870:  0x0005                           NumberOfCaseEntries=5
                                                                                                                                                                               871:  0x0016                           CaseElseBranch=894
                                                                                                                                                                               872:  0x0000                           CaseValue=0
                                                                                                                                                                               873:  0x000A                           CaseBranch=882
                                                                                                                                                                               874:  0x0001                           CaseValue=1
                                                                                                                                                                               875:  0x000C                           CaseBranch=884
                                                                                                                                                                               876:  0x0002                           CaseValue=2
                                                                                                                                                                               877:  0x000E                           CaseBranch=886
                                                                                                                                                                               878:  0x0004                           CaseValue=4
                                                                                                                                                                               879:  0x0010                           CaseBranch=888
                                                                                                                                                                               880:  0x0008                           CaseValue=8
                                                                                                                                                                               881:  0x0013                           CaseBranch=891

000202              Case 0
000203                  Value = SAMPLING_0                                                                                                                                     882:  0x6001   Const0toLocalI32        Value

                                                                                                                                                                               883:  0x400C   Branch                  896
000204              Case 1                                                                                                                                                     

000205                  Value = SAMPLING_1                                                                                                                                     884:  0x6401   Const1toLocalI32        Value

                                                                                                                                                                               885:  0x400A   Branch                  896
000206              Case 2                                                                                                                                                     

000207                  Value = SAMPLING_2                                                                                                                                     886:  0x6801   Const2toLocalI32        Value

                                                                                                                                                                               887:  0x4008   Branch                  896
000208              Case 4                                                                                                                                                     

000209                  Value = SAMPLING_4                                                                                                                                     888:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               889:  0x9001   PopLocalI32             Value

                                                                                                                                                                               890:  0x4005   Branch                  896
000210              Case 8                                                                                                                                                     

000211                  Value = SAMPLING_8                                                                                                                                     891:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               892:  0x9001   PopLocalI32             Value

                                                                                                                                                                               893:  0x4002   Branch                  896
000212              Case Else                                                                                                                                                  

000213                  Value = SAMPLING_16                                                                                                                                    894:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               895:  0x9001   PopLocalI32             Value

000214          End Select
000215          Return Value                                                                                                                                                   896:  0x8801   PushLocalI32            Value
                                                                                                                                                                               897:  0x0092   ReturnValType           

000216      End Function                                                                                                                                                       898:  0x0093   Return0                 

000217      
000218      Public Function getSampleByteAsValue(value As Byte) As Byte                                                                                                        899:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000219          'converts sampling rate Byte value into actual value (0-16)
000220          Select value                                                                                                                                                   900:  0x8800   PushLocalI32            value
                                                                                                                                                                               901:  0x0122   CaseComputed            
                                                                                                                                                                               902:  0x0002                           CaseCommonClass=Byte
                                                                                                                                                                               903:  0x0006                           NumberOfCaseEntries=6
                                                                                                                                                                               904:  0x001C                           CaseElseBranch=933
                                                                                                                                                                               905:  0x0000                           CaseValue=0
                                                                                                                                                                               906:  0x000C                           CaseBranch=917
                                                                                                                                                                               907:  0x0001                           CaseValue=1
                                                                                                                                                                               908:  0x000E                           CaseBranch=919
                                                                                                                                                                               909:  0x0002                           CaseValue=2
                                                                                                                                                                               910:  0x0010                           CaseBranch=921
                                                                                                                                                                               911:  0x0003                           CaseValue=3
                                                                                                                                                                               912:  0x0013                           CaseBranch=924
                                                                                                                                                                               913:  0x0004                           CaseValue=4
                                                                                                                                                                               914:  0x0016                           CaseBranch=927
                                                                                                                                                                               915:  0x0005                           CaseValue=5
                                                                                                                                                                               916:  0x0019                           CaseBranch=930

000221              Case SAMPLING_0
000222                  Return 0                                                                                                                                               917:  0x0093   Return0                 

                                                                                                                                                                               918:  0x4010   Branch                  935
000223              Case SAMPLING_1                                                                                                                                            

000224                  Return 1                                                                                                                                               919:  0x0094   Return1                 

                                                                                                                                                                               920:  0x400E   Branch                  935
000225              Case SAMPLING_2                                                                                                                                            

000226                  Return 2                                                                                                                                               921:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               922:  0x0092   ReturnValType           

                                                                                                                                                                               923:  0x400B   Branch                  935
000227              Case SAMPLING_4                                                                                                                                            

000228                  Return 4                                                                                                                                               924:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               925:  0x0092   ReturnValType           

                                                                                                                                                                               926:  0x4008   Branch                  935
000229              Case SAMPLING_8                                                                                                                                            

000230                  Return 8                                                                                                                                               927:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               928:  0x0092   ReturnValType           

                                                                                                                                                                               929:  0x4005   Branch                  935
000231              Case SAMPLING_16                                                                                                                                           

000232                  Return 16                                                                                                                                              930:  0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               931:  0x0092   ReturnValType           

                                                                                                                                                                               932:  0x4002   Branch                  935
000233              Case Else                                                                                                                                                  

000234                  Return 16                                                                                                                                              933:  0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               934:  0x0092   ReturnValType           

000235          End Select
000236      End Function                                                                                                                                                       935:  0x0093   Return0                 

000237      
000238      Public Sub setHumiditysampling(set_hum_oversample As Byte)                                                                                                         936:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000239          //Controls oversampling of humidity data.
000240          //000 Skipped (output set to 0x8000)
000241          //001 oversampling 1 (0x01)
000242          //010 oversampling 2 (0x02)
000243          //011 oversampling 4 (0x03)
000244          //100 oversampling 8 (0x04)
000245          //101, others oversampling 16 (default 0x05)
000246          sample_time = 0 //reset sample_time so that we calcuate it again                                                                                               937:  0x7860   Const0toMemberI32       sample_time

000247          If set_hum_oversample > 0x05 Then                                                                                                                              938:  0x8800   PushLocalI32            set_hum_oversample
                                                                                                                                                                               939:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               940:  0x2C02   BranchLE                943

000248              set_hum_oversample = 0x05                                                                                                                                  941:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               942:  0x9000   PopLocalI32             set_hum_oversample

000249          End If
000250          hum_oversample = set_hum_oversample                                                                                                                            943:  0x8800   PushLocalI32            set_hum_oversample
                                                                                                                                                                               944:  0xA806   PopMemberU8             hum_oversample

000251          write8(REGISTER_CONTROLHUMID, hum_oversample)                                                                                                                  945:  0x80F2   PushConstU10            242 (0x00F2)
                                                                                                                                                                               946:  0x9806   PushMemberU8            hum_oversample
                                                                                                                                                                               947:  0x000D   PushMe                  
                                                                                                                                                                               948:  0x1FFB   BranchSubr              1968

000252          write8(REGISTER_CONFIG, sample_filter_rate)                                                                                                                    949:  0x80F5   PushConstU10            245 (0x00F5)
                                                                                                                                                                               950:  0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               951:  0x000D   PushMe                  
                                                                                                                                                                               952:  0x1FF7   BranchSubr              1968

000253          write8(REGISTER_CONTROL, temp_press_oversample)                                                                                                                953:  0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               954:  0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               955:  0x000D   PushMe                  
                                                                                                                                                                               956:  0x1FF3   BranchSubr              1968

000254      End Sub                                                                                                                                                            957:  0x0091   Return                  

000255      
000256      Public Sub setHumiditysamplingValue(set_hum_oversample As Byte)                                                                                                    958:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               959:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000257          'value as 0-16 times
000258          Dim Value As Byte = getSampleValueAsByte(set_hum_oversample)                                                                                                   960:  0x8800   PushLocalI32            set_hum_oversample
                                                                                                                                                                               961:  0x000D   PushMe                  
                                                                                                                                                                               962:  0x5462   BranchSubrBack          865
                                                                                                                                                                               963:  0x9001   PopLocalI32             Value

000259          setHumiditysampling(Value)                                                                                                                                     964:  0x8801   PushLocalI32            Value
                                                                                                                                                                               965:  0x000D   PushMe                  
                                                                                                                                                                               966:  0x541F   BranchSubrBack          936

000260      End Sub                                                                                                                                                            967:  0x0091   Return                  

000261      
000262      Public Function getHumiditysamplingValue() As Integer                                                                                                              968:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000263          //returns current humidity sampling value (not byte)
000264          Return getSampleByteAsValue(hum_oversample)                                                                                                                    969:  0x9806   PushMemberU8            hum_oversample
                                                                                                                                                                               970:  0x000D   PushMe                  
                                                                                                                                                                               971:  0x5449   BranchSubrBack          899
                                                                                                                                                                               972:  0x0092   ReturnValType           

000265      End Function                                                                                                                                                       973:  0x0093   Return0                 

000266      
000267      Public Sub setTemperaturesampling(set_temp_oversample As Byte)                                                                                                     974:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000268          //Controls oversampling of Temperature data. bits 7,6,5
000269          //000 Skipped (output set to 0x8000)
000270          //001 oversampling 1 (0x01)
000271          //010 oversampling 2 (0x02)
000272          //011 oversampling 4 (0x03)
000273          //100 oversampling 8 (0x04)
000274          //101, others oversampling 16 (default 0x05)
000275          sample_time = 0 //reset sample_time so that we calcuate it again                                                                                               975:  0x7860   Const0toMemberI32       sample_time

000276          If set_temp_oversample > 0x05 Then                                                                                                                             976:  0x8800   PushLocalI32            set_temp_oversample
                                                                                                                                                                               977:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               978:  0x2C02   BranchLE                981

000277              set_temp_oversample = 0x05                                                                                                                                 979:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               980:  0x9000   PopLocalI32             set_temp_oversample

000278          End If
000279          temp_press_oversample = (set_temp_oversample << 5) | (temp_press_oversample & 0x1f)                                                                            981:  0x8800   PushLocalI32            set_temp_oversample
                                                                                                                                                                               982:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               983:  0x002E   IntShl                  
                                                                                                                                                                               984:  0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               985:  0x801F   PushConstU10            31 (0x001F)
                                                                                                                                                                               986:  0x001F   IntAnd                  
                                                                                                                                                                               987:  0x002D   IntOr                   
                                                                                                                                                                               988:  0xA807   PopMemberU8             temp_press_oversample

000280          write8(REGISTER_CONFIG, sample_filter_rate)                                                                                                                    989:  0x80F5   PushConstU10            245 (0x00F5)
                                                                                                                                                                               990:  0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               991:  0x000D   PushMe                  
                                                                                                                                                                               992:  0x1FCF   BranchSubr              1968

000281          write8(REGISTER_CONTROL, temp_press_oversample)                                                                                                                993:  0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               994:  0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               995:  0x000D   PushMe                  
                                                                                                                                                                               996:  0x1FCB   BranchSubr              1968

000282      End Sub                                                                                                                                                            997:  0x0091   Return                  

000283      
000284      Public Sub setTemperaturesamplingValue(set_temp_oversample As Byte)                                                                                                998:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               999:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000285          'value as 0-16 times
000286          Dim Value As Byte = getSampleValueAsByte(set_temp_oversample)                                                                                                  1000: 0x8800   PushLocalI32            set_temp_oversample
                                                                                                                                                                               1001: 0x000D   PushMe                  
                                                                                                                                                                               1002: 0x548A   BranchSubrBack          865
                                                                                                                                                                               1003: 0x9001   PopLocalI32             Value

000287          setTemperaturesampling(Value)                                                                                                                                  1004: 0x8801   PushLocalI32            Value
                                                                                                                                                                               1005: 0x000D   PushMe                  
                                                                                                                                                                               1006: 0x5421   BranchSubrBack          974

000288      End Sub                                                                                                                                                            1007: 0x0091   Return                  

000289      
000290      Public Function getTemperaturesamplingValue() As Integer                                                                                                           1008: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000291          //returns current temperature sampling value (not byte)
000292          Return getSampleByteAsValue((temp_press_oversample >> 5) & 0x07)                                                                                               1009: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1010: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1011: 0x002F   IntShr                  
                                                                                                                                                                               1012: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               1013: 0x001F   IntAnd                  
                                                                                                                                                                               1014: 0x000D   PushMe                  
                                                                                                                                                                               1015: 0x5475   BranchSubrBack          899
                                                                                                                                                                               1016: 0x0092   ReturnValType           

000293      End Function                                                                                                                                                       1017: 0x0093   Return0                 

000294      
000295      Public Sub setPressuresampling(set_press_oversample As Byte)                                                                                                       1018: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000296          //Controls oversampling of Temperature data. bits 4,3,2
000297          //000 Skipped (output set to 0x8000)
000298          //001 oversampling 1 (0x01)
000299          //010 oversampling 2 (0x02)
000300          //011 oversampling 4 (0x03)
000301          //100 oversampling 8 (0x04)
000302          //101, others oversampling 16 (default 0x05)
000303          sample_time = 0 //reset sample_time so that we calcuate it again                                                                                               1019: 0x7860   Const0toMemberI32       sample_time

000304          If set_press_oversample > 0x05 Then                                                                                                                            1020: 0x8800   PushLocalI32            set_press_oversample
                                                                                                                                                                               1021: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1022: 0x2C02   BranchLE                1025

000305              set_press_oversample = 0x05                                                                                                                                1023: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1024: 0x9000   PopLocalI32             set_press_oversample

000306          End If
000307          temp_press_oversample = (set_press_oversample << 2) | (temp_press_oversample & 0xe3)                                                                           1025: 0x8800   PushLocalI32            set_press_oversample
                                                                                                                                                                               1026: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1027: 0x002E   IntShl                  
                                                                                                                                                                               1028: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1029: 0x80E3   PushConstU10            227 (0x00E3)
                                                                                                                                                                               1030: 0x001F   IntAnd                  
                                                                                                                                                                               1031: 0x002D   IntOr                   
                                                                                                                                                                               1032: 0xA807   PopMemberU8             temp_press_oversample

000308          write8(REGISTER_CONFIG, sample_filter_rate)                                                                                                                    1033: 0x80F5   PushConstU10            245 (0x00F5)
                                                                                                                                                                               1034: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1035: 0x000D   PushMe                  
                                                                                                                                                                               1036: 0x1FA3   BranchSubr              1968

000309          write8(REGISTER_CONTROL, temp_press_oversample)                                                                                                                1037: 0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               1038: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1039: 0x000D   PushMe                  
                                                                                                                                                                               1040: 0x1F9F   BranchSubr              1968

000310      End Sub                                                                                                                                                            1041: 0x0091   Return                  

000311      
000312      Public Sub setPressuresamplingValue(set_press_oversample As Byte)                                                                                                  1042: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1043: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000313          'value as 0-16 times
000314          Dim Value As Byte = getSampleValueAsByte(set_press_oversample)                                                                                                 1044: 0x8800   PushLocalI32            set_press_oversample
                                                                                                                                                                               1045: 0x000D   PushMe                  
                                                                                                                                                                               1046: 0x54B6   BranchSubrBack          865
                                                                                                                                                                               1047: 0x9001   PopLocalI32             Value

000315          setPressuresampling(Value)                                                                                                                                     1048: 0x8801   PushLocalI32            Value
                                                                                                                                                                               1049: 0x000D   PushMe                  
                                                                                                                                                                               1050: 0x5421   BranchSubrBack          1018

000316      End Sub                                                                                                                                                            1051: 0x0091   Return                  

000317      
000318      Public Function getPressuresamplingValue() As Integer                                                                                                              1052: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000319          //returns current pressure sampling value (not byte)
000320          Return getSampleByteAsValue((temp_press_oversample) >> 2 & 0x07)                                                                                               1053: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1054: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1055: 0x002F   IntShr                  
                                                                                                                                                                               1056: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               1057: 0x001F   IntAnd                  
                                                                                                                                                                               1058: 0x000D   PushMe                  
                                                                                                                                                                               1059: 0x54A1   BranchSubrBack          899
                                                                                                                                                                               1060: 0x0092   ReturnValType           

000321      End Function                                                                                                                                                       1061: 0x0093   Return0                 

000322      
000323      Public Sub setMode(set_mode As Byte)                                                                                                                               1062: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000324          // Normal Mode is free running, sampling at sample rate (usually 1/sec)
000325          // Forced mode is one sample at request. This is minnimum power mode
000326          // Sleep Mode is no readings (registers are available though)
000327          
000328          //From Data Sheet:
000329          //The BME280 offers three sensor modes: sleep mode, forced mode and normal mode. These
000330          //can be selected using the mode[1:0] setting (see chapter 5.4.5). The available modes are:
000331          //* Sleep mode: no operation, all registers accessible, lowest power, selected after startup
000332          //* Forced mode: perform one measurement, store results and return to sleep mode
000333          //* Normal mode: perpetual cycling of measurements and inactive periods.
000334          //The modes will be explained in detail in chapters 3.3.2 (sleep mode), 3.3.3 (forced mode) and
000335          //3.3.4 (normal mode).
000336          
000337          //00 Sleep
000338          //01 Forced (0x01)
000339          //10 Forced (0x02)
000340          //11 Normal (0x03)
000341          sample_time = 0 //reset sample_time so that we calcuate it again                                                                                               1063: 0x7860   Const0toMemberI32       sample_time

000342          If set_mode >= NORMAL Then                                                                                                                                     1064: 0x8800   PushLocalI32            set_mode
                                                                                                                                                                               1065: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               1066: 0x2805   BranchLT                1072

000343              normal_mode = True                                                                                                                                         1067: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               1068: 0xA804   PopMemberU8             normal_mode

000344              set_mode = NORMAL                                                                                                                                          1069: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               1070: 0x9000   PopLocalI32             set_mode

                                                                                                                                                                               1071: 0x4002   Branch                  1074
000345          Else                                                                                                                                                           

000346              normal_mode = False                                                                                                                                        1072: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               1073: 0xA804   PopMemberU8             normal_mode

000347          End If
000348          temp_press_oversample = set_mode | (temp_press_oversample & 0xfc)                                                                                              1074: 0x8800   PushLocalI32            set_mode
                                                                                                                                                                               1075: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1076: 0x80FC   PushConstU10            252 (0x00FC)
                                                                                                                                                                               1077: 0x001F   IntAnd                  
                                                                                                                                                                               1078: 0x002D   IntOr                   
                                                                                                                                                                               1079: 0xA807   PopMemberU8             temp_press_oversample

000349          write8(REGISTER_CONFIG, sample_filter_rate)                                                                                                                    1080: 0x80F5   PushConstU10            245 (0x00F5)
                                                                                                                                                                               1081: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1082: 0x000D   PushMe                  
                                                                                                                                                                               1083: 0x1F74   BranchSubr              1968

000350          write8(REGISTER_CONTROL, temp_press_oversample)                                                                                                                1084: 0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               1085: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1086: 0x000D   PushMe                  
                                                                                                                                                                               1087: 0x1F70   BranchSubr              1968

000351      End Sub                                                                                                                                                            1088: 0x0091   Return                  

000352      
000353      Public Function getMode() As Byte                                                                                                                                  1089: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000354          //returns current mode
000355          Return temp_press_oversample & 0x03                                                                                                                            1090: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1091: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               1092: 0x001F   IntAnd                  
                                                                                                                                                                               1093: 0x0092   ReturnValType           

000356      End Function                                                                                                                                                       1094: 0x0093   Return0                 

000357      
000358      Public Sub setSamplerate(set_sample_rate As Byte)                                                                                                                  1095: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000359          //Controls inactive duration (standby) in normal mode. bits 7,6,5
000360          //000 0.5mS  (0x00)
000361          //001 62.5mS (0x01)
000362          //010 125mS  (0x02)
000363          //011 250mS  (0x03)
000364          //100 500mS  (0x04)
000365          //101 1000mS (default 0x05)
000366          //110 10mS   (0x06)
000367          //111 20mS    (0x07)
000368          
000369          If set_sample_rate > 0x07 Then                                                                                                                                 1096: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1097: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               1098: 0x2C02   BranchLE                1101

000370              set_sample_rate = 0x07                                                                                                                                     1099: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               1100: 0x9000   PopLocalI32             set_sample_rate

000371          End If
000372          sample_filter_rate = (set_sample_rate << 5) | (sample_filter_rate & 0x1f)                                                                                      1101: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1102: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1103: 0x002E   IntShl                  
                                                                                                                                                                               1104: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1105: 0x801F   PushConstU10            31 (0x001F)
                                                                                                                                                                               1106: 0x001F   IntAnd                  
                                                                                                                                                                               1107: 0x002D   IntOr                   
                                                                                                                                                                               1108: 0xA805   PopMemberU8             sample_filter_rate

000373          write8(REGISTER_CONFIG, sample_filter_rate)                                                                                                                    1109: 0x80F5   PushConstU10            245 (0x00F5)
                                                                                                                                                                               1110: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1111: 0x000D   PushMe                  
                                                                                                                                                                               1112: 0x1F57   BranchSubr              1968

000374          write8(REGISTER_CONTROL, temp_press_oversample)                                                                                                                1113: 0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               1114: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1115: 0x000D   PushMe                  
                                                                                                                                                                               1116: 0x1F53   BranchSubr              1968

000375      End Sub                                                                                                                                                            1117: 0x0091   Return                  

000376      
000377      Public Sub setSamplerateValue(set_sample_rate As Float)                                                                                                            1118: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1119: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000378          //Controls inactive duration (standby) in normal mode. value in mS
000379          Dim value As Byte = 0x00
000380          If set_sample_rate <= 0.5 Then                                                                                                                                 1120: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1121: 0x0110   PushConstI32            1056964608 (0x3F000000)
                                                                                                                                                                               1122: 0x0000                           
                                                                                                                                                                               1123: 0x3F00                           
                                                                                                                                                                               1124: 0x003A   FltCmp                  
                                                                                                                                                                               1125: 0x3002   BranchGT                1128

000381              value = 0x00                                                                                                                                               1126: 0x6001   Const0toLocalI32        value

                                                                                                                                                                               1127: 0x4039   Branch                  1185
000382          ElseIf set_sample_rate <= 10.0 Then                                                                                                                            1128: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1129: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                               1130: 0x003A   FltCmp                  
                                                                                                                                                                               1131: 0x3003   BranchGT                1135

000383              value = 0x06                                                                                                                                               1132: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               1133: 0x9001   PopLocalI32             value

                                                                                                                                                                               1134: 0x4032   Branch                  1185
000384          ElseIf set_sample_rate <= 20.0 Then                                                                                                                            1135: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1136: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                               1137: 0x003A   FltCmp                  
                                                                                                                                                                               1138: 0x3003   BranchGT                1142

000385              value = 0x07                                                                                                                                               1139: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               1140: 0x9001   PopLocalI32             value

                                                                                                                                                                               1141: 0x402B   Branch                  1185
000386          ElseIf set_sample_rate <= 62.5 Then                                                                                                                            1142: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1143: 0x0110   PushConstI32            1115291648 (0x427A0000)
                                                                                                                                                                               1144: 0x0000                           
                                                                                                                                                                               1145: 0x427A                           
                                                                                                                                                                               1146: 0x003A   FltCmp                  
                                                                                                                                                                               1147: 0x3002   BranchGT                1150

000387              value = 0x01                                                                                                                                               1148: 0x6401   Const1toLocalI32        value

                                                                                                                                                                               1149: 0x4023   Branch                  1185
000388          ElseIf set_sample_rate <= 125.0 Then                                                                                                                           1150: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1151: 0xEA7D   PushConstFlt            125.0
                                                                                                                                                                               1152: 0x003A   FltCmp                  
                                                                                                                                                                               1153: 0x3002   BranchGT                1156

000389              value = 0x02                                                                                                                                               1154: 0x6801   Const2toLocalI32        value

                                                                                                                                                                               1155: 0x401D   Branch                  1185
000390          ElseIf set_sample_rate <= 250.0 Then                                                                                                                           1156: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1157: 0x0110   PushConstI32            1132068864 (0x437A0000)
                                                                                                                                                                               1158: 0x0000                           
                                                                                                                                                                               1159: 0x437A                           
                                                                                                                                                                               1160: 0x003A   FltCmp                  
                                                                                                                                                                               1161: 0x3003   BranchGT                1165

000391              value = 0x03                                                                                                                                               1162: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               1163: 0x9001   PopLocalI32             value

                                                                                                                                                                               1164: 0x4014   Branch                  1185
000392          ElseIf set_sample_rate <= 500.0 Then                                                                                                                           1165: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1166: 0x0110   PushConstI32            1140457472 (0x43FA0000)
                                                                                                                                                                               1167: 0x0000                           
                                                                                                                                                                               1168: 0x43FA                           
                                                                                                                                                                               1169: 0x003A   FltCmp                  
                                                                                                                                                                               1170: 0x3003   BranchGT                1174

000393              value = 0x04                                                                                                                                               1171: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1172: 0x9001   PopLocalI32             value

                                                                                                                                                                               1173: 0x400B   Branch                  1185
000394          ElseIf set_sample_rate <= 1000.0 Then                                                                                                                          1174: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1175: 0x0110   PushConstI32            1148846080 (0x447A0000)
                                                                                                                                                                               1176: 0x0000                           
                                                                                                                                                                               1177: 0x447A                           
                                                                                                                                                                               1178: 0x003A   FltCmp                  
                                                                                                                                                                               1179: 0x3003   BranchGT                1183

000395              value = 0x05                                                                                                                                               1180: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1181: 0x9001   PopLocalI32             value

                                                                                                                                                                               1182: 0x4002   Branch                  1185
000396          Else                                                                                                                                                           

000397              value = 0x05                                                                                                                                               1183: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1184: 0x9001   PopLocalI32             value

000398          End If
000399          setSamplerate(value)                                                                                                                                           1185: 0x8801   PushLocalI32            value
                                                                                                                                                                               1186: 0x000D   PushMe                  
                                                                                                                                                                               1187: 0x545D   BranchSubrBack          1095

000400      End Sub                                                                                                                                                            1188: 0x0091   Return                  

000401      
000402      Public Function getSampleRateValue() As Float                                                                                                                      1189: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               1190: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000403          // returns Sample Rate in mS
000404          Dim sample_rate As Byte = sample_filter_rate >> 5                                                                                                              1191: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1192: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1193: 0x002F   IntShr                  
                                                                                                                                                                               1194: 0x9000   PopLocalI32             sample_rate

000405          Select sample_rate                                                                                                                                             1195: 0x8800   PushLocalI32            sample_rate
                                                                                                                                                                               1196: 0x0122   CaseComputed            
                                                                                                                                                                               1197: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                               1198: 0x0008                           NumberOfCaseEntries=8
                                                                                                                                                                               1199: 0x0032                           CaseElseBranch=1250
                                                                                                                                                                               1200: 0x0000                           CaseValue=0
                                                                                                                                                                               1201: 0x0010                           CaseBranch=1216
                                                                                                                                                                               1202: 0x0001                           CaseValue=1
                                                                                                                                                                               1203: 0x0015                           CaseBranch=1221
                                                                                                                                                                               1204: 0x0002                           CaseValue=2
                                                                                                                                                                               1205: 0x001A                           CaseBranch=1226
                                                                                                                                                                               1206: 0x0003                           CaseValue=3
                                                                                                                                                                               1207: 0x001D                           CaseBranch=1229
                                                                                                                                                                               1208: 0x0004                           CaseValue=4
                                                                                                                                                                               1209: 0x0022                           CaseBranch=1234
                                                                                                                                                                               1210: 0x0005                           CaseValue=5
                                                                                                                                                                               1211: 0x0027                           CaseBranch=1239
                                                                                                                                                                               1212: 0x0006                           CaseValue=6
                                                                                                                                                                               1213: 0x002C                           CaseBranch=1244
                                                                                                                                                                               1214: 0x0007                           CaseValue=7
                                                                                                                                                                               1215: 0x002F                           CaseBranch=1247

000406              Case 0x00
000407                  Return 0.50                                                                                                                                            1216: 0x0110   PushConstI32            1056964608 (0x3F000000)
                                                                                                                                                                               1217: 0x0000                           
                                                                                                                                                                               1218: 0x3F00                           
                                                                                                                                                                               1219: 0x0092   ReturnValType           

                                                                                                                                                                               1220: 0x4021   Branch                  1254
000408              Case 0x01                                                                                                                                                  

000409                  Return 62.50                                                                                                                                           1221: 0x0110   PushConstI32            1115291648 (0x427A0000)
                                                                                                                                                                               1222: 0x0000                           
                                                                                                                                                                               1223: 0x427A                           
                                                                                                                                                                               1224: 0x0092   ReturnValType           

                                                                                                                                                                               1225: 0x401C   Branch                  1254
000410              Case 0x02                                                                                                                                                  

000411                  Return 125.00                                                                                                                                          1226: 0xEA7D   PushConstFlt            125.0
                                                                                                                                                                               1227: 0x0092   ReturnValType           

                                                                                                                                                                               1228: 0x4019   Branch                  1254
000412              Case 0x03                                                                                                                                                  

000413                  Return 250.00                                                                                                                                          1229: 0x0110   PushConstI32            1132068864 (0x437A0000)
                                                                                                                                                                               1230: 0x0000                           
                                                                                                                                                                               1231: 0x437A                           
                                                                                                                                                                               1232: 0x0092   ReturnValType           

                                                                                                                                                                               1233: 0x4014   Branch                  1254
000414              Case 0x04                                                                                                                                                  

000415                  Return 500.00                                                                                                                                          1234: 0x0110   PushConstI32            1140457472 (0x43FA0000)
                                                                                                                                                                               1235: 0x0000                           
                                                                                                                                                                               1236: 0x43FA                           
                                                                                                                                                                               1237: 0x0092   ReturnValType           

                                                                                                                                                                               1238: 0x400F   Branch                  1254
000416              Case 0x05                                                                                                                                                  

000417                  Return 1000.00                                                                                                                                         1239: 0x0110   PushConstI32            1148846080 (0x447A0000)
                                                                                                                                                                               1240: 0x0000                           
                                                                                                                                                                               1241: 0x447A                           
                                                                                                                                                                               1242: 0x0092   ReturnValType           

                                                                                                                                                                               1243: 0x400A   Branch                  1254
000418              Case 0x06                                                                                                                                                  

000419                  Return 10.00                                                                                                                                           1244: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                               1245: 0x0092   ReturnValType           

                                                                                                                                                                               1246: 0x4007   Branch                  1254
000420              Case 0x07                                                                                                                                                  

000421                  Return 20.00                                                                                                                                           1247: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                               1248: 0x0092   ReturnValType           

                                                                                                                                                                               1249: 0x4004   Branch                  1254
000422              Case Else                                                                                                                                                  

000423                  Return 1000.00 //unknown, but this is default                                                                                                          1250: 0x0110   PushConstI32            1148846080 (0x447A0000)
                                                                                                                                                                               1251: 0x0000                           
                                                                                                                                                                               1252: 0x447A                           
                                                                                                                                                                               1253: 0x0092   ReturnValType           

000424          End Select
000425      End Function                                                                                                                                                       1254: 0x0093   Return0                 

000426      
000427      Public Sub setIIRfilter(set_IIR_filter As Byte)                                                                                                                    1255: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000428          //Controls the time constant of the IIR filter. bits 4,3,2
000429          //000 Filter off (0x00 default)
000430          //001 2 (0x01)
000431          //010 4 (0x02)
000432          //011 8 (0x03)
000433          //100, others 16 (0x04)
000434          sample_time = 0 //reset sample_time so that we calcuate it again                                                                                               1256: 0x7860   Const0toMemberI32       sample_time

000435          If set_IIR_filter > 0x04 Then                                                                                                                                  1257: 0x8800   PushLocalI32            set_IIR_filter
                                                                                                                                                                               1258: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1259: 0x2C02   BranchLE                1262

000436              set_IIR_filter = 0x04                                                                                                                                      1260: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1261: 0x9000   PopLocalI32             set_IIR_filter

000437          End If
000438          sample_filter_rate = (set_IIR_filter << 2) | (sample_filter_rate & 0xe3)                                                                                       1262: 0x8800   PushLocalI32            set_IIR_filter
                                                                                                                                                                               1263: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1264: 0x002E   IntShl                  
                                                                                                                                                                               1265: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1266: 0x80E3   PushConstU10            227 (0x00E3)
                                                                                                                                                                               1267: 0x001F   IntAnd                  
                                                                                                                                                                               1268: 0x002D   IntOr                   
                                                                                                                                                                               1269: 0xA805   PopMemberU8             sample_filter_rate

000439          write8(REGISTER_CONFIG, sample_filter_rate)                                                                                                                    1270: 0x80F5   PushConstU10            245 (0x00F5)
                                                                                                                                                                               1271: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1272: 0x000D   PushMe                  
                                                                                                                                                                               1273: 0x1EB6   BranchSubr              1968

000440          write8(REGISTER_CONTROL, temp_press_oversample)                                                                                                                1274: 0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               1275: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1276: 0x000D   PushMe                  
                                                                                                                                                                               1277: 0x1EB2   BranchSubr              1968

000441      End Sub                                                                                                                                                            1278: 0x0091   Return                  

000442      
000443      Public Sub setIIRfilterValue(set_IIRFilter_oversample As Integer)                                                                                                  1279: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1280: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000444          'value as 0-16 times
000445          Dim Value As Byte = 0x00
000446          Select set_IIRFilter_oversample                                                                                                                                1281: 0x8800   PushLocalI32            set_IIRFilter_oversample
                                                                                                                                                                               1282: 0x0122   CaseComputed            
                                                                                                                                                                               1283: 0x0004                           CaseCommonClass=Integer
                                                                                                                                                                               1284: 0x0005                           NumberOfCaseEntries=5
                                                                                                                                                                               1285: 0x001B                           CaseElseBranch=1313
                                                                                                                                                                               1286: 0x0000                           LSH CaseValue=0
                                                                                                                                                                               1287: 0x0000                           MSH CaseValue=0
                                                                                                                                                                               1288: 0x000F                           CaseBranch=1301
                                                                                                                                                                               1289: 0x0002                           LSH CaseValue=2
                                                                                                                                                                               1290: 0x0000                           MSH CaseValue=2
                                                                                                                                                                               1291: 0x0011                           CaseBranch=1303
                                                                                                                                                                               1292: 0x0004                           LSH CaseValue=4
                                                                                                                                                                               1293: 0x0000                           MSH CaseValue=4
                                                                                                                                                                               1294: 0x0013                           CaseBranch=1305
                                                                                                                                                                               1295: 0x0008                           LSH CaseValue=8
                                                                                                                                                                               1296: 0x0000                           MSH CaseValue=8
                                                                                                                                                                               1297: 0x0015                           CaseBranch=1307
                                                                                                                                                                               1298: 0x0010                           LSH CaseValue=16
                                                                                                                                                                               1299: 0x0000                           MSH CaseValue=16
                                                                                                                                                                               1300: 0x0018                           CaseBranch=1310

000447              Case 0
000448                  Value = IIR_SAMPLING_0                                                                                                                                 1301: 0x6001   Const0toLocalI32        Value

                                                                                                                                                                               1302: 0x400C   Branch                  1315
000449              Case 2                                                                                                                                                     

000450                  Value = IIR_SAMPLING_2                                                                                                                                 1303: 0x6401   Const1toLocalI32        Value

                                                                                                                                                                               1304: 0x400A   Branch                  1315
000451              Case 4                                                                                                                                                     

000452                  Value = IIR_SAMPLING_4                                                                                                                                 1305: 0x6801   Const2toLocalI32        Value

                                                                                                                                                                               1306: 0x4008   Branch                  1315
000453              Case 8                                                                                                                                                     

000454                  Value = IIR_SAMPLING_8                                                                                                                                 1307: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               1308: 0x9001   PopLocalI32             Value

                                                                                                                                                                               1309: 0x4005   Branch                  1315
000455              Case 16                                                                                                                                                    

000456                  Value = IIR_SAMPLING_16                                                                                                                                1310: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1311: 0x9001   PopLocalI32             Value

                                                                                                                                                                               1312: 0x4002   Branch                  1315
000457              Case Else                                                                                                                                                  

000458                  Value = IIR_SAMPLING_16                                                                                                                                1313: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1314: 0x9001   PopLocalI32             Value

000459          End Select
000460          setIIRfilter(Value)                                                                                                                                            1315: 0x8801   PushLocalI32            Value
                                                                                                                                                                               1316: 0x000D   PushMe                  
                                                                                                                                                                               1317: 0x543F   BranchSubrBack          1255

000461      End Sub                                                                                                                                                            1318: 0x0091   Return                  

000462      
000463      Public Function getIIRFilterValue() As Integer                                                                                                                     1319: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               1320: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000464          // returns IIRFilter value (not byte)
000465          Dim IIRFilter As Byte = (sample_filter_rate >> 2) & 0x07                                                                                                       1321: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1322: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1323: 0x002F   IntShr                  
                                                                                                                                                                               1324: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               1325: 0x001F   IntAnd                  
                                                                                                                                                                               1326: 0x9000   PopLocalI32             IIRFilter

000466          Select IIRFilter                                                                                                                                               1327: 0x8800   PushLocalI32            IIRFilter
                                                                                                                                                                               1328: 0x0122   CaseComputed            
                                                                                                                                                                               1329: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                               1330: 0x0005                           NumberOfCaseEntries=5
                                                                                                                                                                               1331: 0x0018                           CaseElseBranch=1356
                                                                                                                                                                               1332: 0x0000                           CaseValue=0
                                                                                                                                                                               1333: 0x000A                           CaseBranch=1342
                                                                                                                                                                               1334: 0x0001                           CaseValue=1
                                                                                                                                                                               1335: 0x000C                           CaseBranch=1344
                                                                                                                                                                               1336: 0x0002                           CaseValue=2
                                                                                                                                                                               1337: 0x000F                           CaseBranch=1347
                                                                                                                                                                               1338: 0x0003                           CaseValue=3
                                                                                                                                                                               1339: 0x0012                           CaseBranch=1350
                                                                                                                                                                               1340: 0x0004                           CaseValue=4
                                                                                                                                                                               1341: 0x0015                           CaseBranch=1353

000467              Case IIR_SAMPLING_0
000468                  Return 0                                                                                                                                               1342: 0x0093   Return0                 

                                                                                                                                                                               1343: 0x400E   Branch                  1358
000469              Case IIR_SAMPLING_2                                                                                                                                        

000470                  Return 2                                                                                                                                               1344: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1345: 0x0092   ReturnValType           

                                                                                                                                                                               1346: 0x400B   Branch                  1358
000471              Case IIR_SAMPLING_4                                                                                                                                        

000472                  Return 4                                                                                                                                               1347: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1348: 0x0092   ReturnValType           

                                                                                                                                                                               1349: 0x4008   Branch                  1358
000473              Case IIR_SAMPLING_8                                                                                                                                        

000474                  Return 8                                                                                                                                               1350: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               1351: 0x0092   ReturnValType           

                                                                                                                                                                               1352: 0x4005   Branch                  1358
000475              Case IIR_SAMPLING_16                                                                                                                                       

000476                  Return 16                                                                                                                                              1353: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               1354: 0x0092   ReturnValType           

                                                                                                                                                                               1355: 0x4002   Branch                  1358
000477              Case Else                                                                                                                                                  

000478                  Return 16                                                                                                                                              1356: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               1357: 0x0092   ReturnValType           

000479          End Select
000480      End Function                                                                                                                                                       1358: 0x0093   Return0                 

000481      
000482      Public Function getConversionTime() As Integer                                                                                                                     1359: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000483          // Returns conversion time in uS
000484          // normally this will be a few ms (about 69 depending on sampling), but worst case is 2.156 seconds!
000485          // See appendix B of DS for equation
000486          If sample_time <> 0 Then                                                                                                                                       1360: 0xA060   PushMemberI32           sample_time
                                                                                                                                                                               1361: 0x3C03   BranchFalse             1365

000487              Return sample_time //if sample_time has already been calculated, just return it                                                                            1362: 0xA060   PushMemberI32           sample_time
                                                                                                                                                                               1363: 0x0092   ReturnValType           

                                                                                                                                                                               1364: 0x4065   Branch                  1466
000488          Else                                                                                                                                                           1365: 0xE0A0   AllocateStackSpace      ValTypeSize=5, RefTypeSize=0

000489              //calculate sample time, and save it
000490              Dim IIRFilter As Integer = getIIRFilterValue()                                                                                                             1366: 0x000D   PushMe                  
                                                                                                                                                                               1367: 0x5431   BranchSubrBack          1319
                                                                                                                                                                               1368: 0x9000   PopLocalI32             IIRFilter

000491              Dim Temp_Sample_Time As Float = 2 * getTemperaturesamplingValue()                                                                                          1369: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1370: 0x000D   PushMe                  
                                                                                                                                                                               1371: 0x556C   BranchSubrBack          1008
                                                                                                                                                                               1372: 0x002A   IntMul                  
                                                                                                                                                                               1373: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1374: 0x9001   PopLocalI32             Temp_Sample_Time

000492              Dim Press_Sample_Time As Float = 2 * getPressuresamplingValue()                                                                                            1375: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1376: 0x000D   PushMe                  
                                                                                                                                                                               1377: 0x5546   BranchSubrBack          1052
                                                                                                                                                                               1378: 0x002A   IntMul                  
                                                                                                                                                                               1379: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1380: 0x9002   PopLocalI32             Press_Sample_Time

000493              If Press_Sample_Time <> 0 Then                                                                                                                             1381: 0x8802   PushLocalI32            Press_Sample_Time
                                                                                                                                                                               1382: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               1383: 0x003A   FltCmp                  
                                                                                                                                                                               1384: 0x2006   BranchEQ                1391

000494                  Press_Sample_Time += 0.5                                                                                                                               1385: 0x8802   PushLocalI32            Press_Sample_Time
                                                                                                                                                                               1386: 0x0110   PushConstI32            1056964608 (0x3F000000)
                                                                                                                                                                               1387: 0x0000                           
                                                                                                                                                                               1388: 0x3F00                           
                                                                                                                                                                               1389: 0x0039   FltAdd                  
                                                                                                                                                                               1390: 0x9002   PopLocalI32             Press_Sample_Time

000495              End If
000496              Dim Humid_Sample_Time As Float = 2 * getHumiditysamplingValue()                                                                                            1391: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1392: 0x000D   PushMe                  
                                                                                                                                                                               1393: 0x55AA   BranchSubrBack          968
                                                                                                                                                                               1394: 0x002A   IntMul                  
                                                                                                                                                                               1395: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1396: 0x9003   PopLocalI32             Humid_Sample_Time

000497              If Humid_Sample_Time <> 0 Then                                                                                                                             1397: 0x8803   PushLocalI32            Humid_Sample_Time
                                                                                                                                                                               1398: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               1399: 0x003A   FltCmp                  
                                                                                                                                                                               1400: 0x2006   BranchEQ                1407

000498                  Humid_Sample_Time += 0.5                                                                                                                               1401: 0x8803   PushLocalI32            Humid_Sample_Time
                                                                                                                                                                               1402: 0x0110   PushConstI32            1056964608 (0x3F000000)
                                                                                                                                                                               1403: 0x0000                           
                                                                                                                                                                               1404: 0x3F00                           
                                                                                                                                                                               1405: 0x0039   FltAdd                  
                                                                                                                                                                               1406: 0x9003   PopLocalI32             Humid_Sample_Time

000499              End If
000500              Dim conversion_time As Integer = ((1 + Temp_Sample_Time + Press_Sample_Time + Humid_Sample_Time) * 1000).ToInteger                                         1407: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               1408: 0x8801   PushLocalI32            Temp_Sample_Time
                                                                                                                                                                               1409: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1410: 0x0039   FltAdd                  
                                                                                                                                                                               1411: 0x8802   PushLocalI32            Press_Sample_Time
                                                                                                                                                                               1412: 0x0039   FltAdd                  
                                                                                                                                                                               1413: 0x8803   PushLocalI32            Humid_Sample_Time
                                                                                                                                                                               1414: 0x0039   FltAdd                  
                                                                                                                                                                               1415: 0x83E8   PushConstU10            1000 (0x03E8)
                                                                                                                                                                               1416: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1417: 0x003C   FltMul                  
                                                                                                                                                                               1418: 0x007B   CvtFltToInt             
                                                                                                                                                                               1419: 0x9004   PopLocalI32             conversion_time

000501              Select IIRFilter                                                                                                                                           1420: 0x8800   PushLocalI32            IIRFilter
                                                                                                                                                                               1421: 0x0122   CaseComputed            
                                                                                                                                                                               1422: 0x0004                           CaseCommonClass=Integer
                                                                                                                                                                               1423: 0x0005                           NumberOfCaseEntries=5
                                                                                                                                                                               1424: 0x0026                           CaseElseBranch=1463
                                                                                                                                                                               1425: 0x0000                           LSH CaseValue=0
                                                                                                                                                                               1426: 0x0000                           MSH CaseValue=0
                                                                                                                                                                               1427: 0x000F                           CaseBranch=1440
                                                                                                                                                                               1428: 0x0002                           LSH CaseValue=2
                                                                                                                                                                               1429: 0x0000                           MSH CaseValue=2
                                                                                                                                                                               1430: 0x0012                           CaseBranch=1443
                                                                                                                                                                               1431: 0x0004                           LSH CaseValue=4
                                                                                                                                                                               1432: 0x0000                           MSH CaseValue=4
                                                                                                                                                                               1433: 0x0017                           CaseBranch=1448
                                                                                                                                                                               1434: 0x0008                           LSH CaseValue=8
                                                                                                                                                                               1435: 0x0000                           MSH CaseValue=8
                                                                                                                                                                               1436: 0x001C                           CaseBranch=1453
                                                                                                                                                                               1437: 0x0010                           LSH CaseValue=16
                                                                                                                                                                               1438: 0x0000                           MSH CaseValue=16
                                                                                                                                                                               1439: 0x0021                           CaseBranch=1458

000502                  Case 0
000503                      sample_time = conversion_time                                                                                                                      1440: 0x8804   PushLocalI32            conversion_time
                                                                                                                                                                               1441: 0xB060   PopMemberI32            sample_time

                                                                                                                                                                               1442: 0x4016   Branch                  1465
000504                  Case 2                                                                                                                                                 

000505                      sample_time = 2 * conversion_time                                                                                                                  1443: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1444: 0x8804   PushLocalI32            conversion_time
                                                                                                                                                                               1445: 0x002A   IntMul                  
                                                                                                                                                                               1446: 0xB060   PopMemberI32            sample_time

                                                                                                                                                                               1447: 0x4011   Branch                  1465
000506                  Case 4                                                                                                                                                 

000507                      sample_time = 5 * conversion_time                                                                                                                  1448: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1449: 0x8804   PushLocalI32            conversion_time
                                                                                                                                                                               1450: 0x002A   IntMul                  
                                                                                                                                                                               1451: 0xB060   PopMemberI32            sample_time

                                                                                                                                                                               1452: 0x400C   Branch                  1465
000508                  Case 8                                                                                                                                                 

000509                      sample_time = 11 * conversion_time                                                                                                                 1453: 0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                               1454: 0x8804   PushLocalI32            conversion_time
                                                                                                                                                                               1455: 0x002A   IntMul                  
                                                                                                                                                                               1456: 0xB060   PopMemberI32            sample_time

                                                                                                                                                                               1457: 0x4007   Branch                  1465
000510                  Case 16                                                                                                                                                

000511                      sample_time = 22 * conversion_time                                                                                                                 1458: 0x8016   PushConstU10            22 (0x0016)
                                                                                                                                                                               1459: 0x8804   PushLocalI32            conversion_time
                                                                                                                                                                               1460: 0x002A   IntMul                  
                                                                                                                                                                               1461: 0xB060   PopMemberI32            sample_time

                                                                                                                                                                               1462: 0x4002   Branch                  1465
000512                  Case Else                                                                                                                                              

000513                      sample_time = conversion_time                                                                                                                      1463: 0x8804   PushLocalI32            conversion_time
                                                                                                                                                                               1464: 0xB060   PopMemberI32            sample_time

000514              End Select
                                                                                                                                                                               1465: 0xE4A0   FreeStackSpace          ValTypeSize=5, RefTypeSize=0
000515          End If                                                                                                                                                         

000516          Return sample_time                                                                                                                                             1466: 0xA060   PushMemberI32           sample_time
                                                                                                                                                                               1467: 0x0092   ReturnValType           

000517      End Function                                                                                                                                                       1468: 0x0093   Return0                 

000518      
000519      Public Sub TakeReading()                                                                                                                                           1469: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               1470: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000520          Dim conversion_time As Integer = getConversionTime()                                                                                                           1471: 0x000D   PushMe                  
                                                                                                                                                                               1472: 0x5472   BranchSubrBack          1359
                                                                                                                                                                               1473: 0x9000   PopLocalI32             conversion_time

000521          If Device.GetTimeSpan() > conversion_time Then //if time since last run is more than conversion time, take new reading                                         1474: 0x00FB   DeviceGetTimeSpan       
                                                                                                                                                                               1475: 0x8800   PushLocalI32            conversion_time
                                                                                                                                                                               1476: 0x2C07   BranchLE                1484

000522              write8(REGISTER_CONTROL, temp_press_oversample) //take reading                                                                                             1477: 0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               1478: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1479: 0x000D   PushMe                  
                                                                                                                                                                               1480: 0x1DE7   BranchSubr              1968

000523              Thread.Sleep(conversion_time) // wait ConversionTime for reading                                                                                           1481: 0x8800   PushLocalI32            conversion_time
                                                                                                                                                                               1482: 0x00D5   ThreadSleep             
                                                                                                                                                                               1483: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000524          End If
000525      End Sub                                                                                                                                                            1484: 0x0091   Return                  

000526      
000527      //================ Read Temp/Humidity/Pressure Functions ==============//
000528      
000529      Public Function readTemperature() As Float                                                                                                                         1485: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000530          //uses 20 bit unsigned int Typical raw result = Temperature_raw 535189
000531          //returns temperature in degrees C
000532          If online = False Then                                                                                                                                         1486: 0x9808   PushMemberU8            online
                                                                                                                                                                               1487: 0x3801   BranchTrue              1489

000533              Return 0                                                                                                                                                   1488: 0x0093   Return0                 

000534          End If
000535          
000536          If normal_mode = False Then                                                                                                                                    1489: 0x9804   PushMemberU8            normal_mode
                                                                                                                                                                               1490: 0x3802   BranchTrue              1493

000537              TakeReading()                                                                                                                                              1491: 0x000D   PushMe                  
                                                                                                                                                                               1492: 0x5418   BranchSubrBack          1469

000538          End If
000539          
000540          readall()                                                                                                                                                      1493: 0x000D   PushMe                  
                                                                                                                                                                               1494: 0x1E91   BranchSubr              2152

000541          
000542          Return BME280_compensate_T_double(temperature_raw >> 4)                                                                                                        1495: 0xA054   PushMemberI32           temperature_raw
                                                                                                                                                                               1496: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1497: 0x002F   IntShr                  
                                                                                                                                                                               1498: 0x000D   PushMe                  
                                                                                                                                                                               1499: 0x1C10   BranchSubr              1516
                                                                                                                                                                               1500: 0x0092   ReturnValType           

000543      End Function                                                                                                                                                       1501: 0x0093   Return0                 

000544      
000545      Public Function readTemperatureF() As Float                                                                                                                        1502: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000546          //returns temperature in degrees F
000547          If online = False Then                                                                                                                                         1503: 0x9808   PushMemberU8            online
                                                                                                                                                                               1504: 0x3801   BranchTrue              1506

000548              Return 0                                                                                                                                                   1505: 0x0093   Return0                 

000549          End If    
000550          Return ((readTemperature() * 9) / 5) + 32                                                                                                                      1506: 0x000D   PushMe                  
                                                                                                                                                                               1507: 0x5417   BranchSubrBack          1485
                                                                                                                                                                               1508: 0xEA09   PushConstFlt            9.0
                                                                                                                                                                               1509: 0x003C   FltMul                  
                                                                                                                                                                               1510: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                               1511: 0x003B   FltDiv                  
                                                                                                                                                                               1512: 0xEA20   PushConstFlt            32.0
                                                                                                                                                                               1513: 0x0039   FltAdd                  
                                                                                                                                                                               1514: 0x0092   ReturnValType           

000551      End Function                                                                                                                                                       1515: 0x0093   Return0                 

000552      
000553      Public Function BME280_compensate_T_double(adc_T As Integer) As Float                                                                                              1516: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1517: 0xE060   AllocateStackSpace      ValTypeSize=3, RefTypeSize=0

000554          // Returns temperature in DegC, double precision. Output value of 51.23 equals 51.23 DegC.
000555          // t_fine carries fine temperature as global value
000556          
000557          Dim var1 As Float
000558          Dim var2 As Float
000559          Dim T As Float
000560          
000561          var1 = (adc_T / 16384.0 - dig_T1 / 1024.0) * dig_T2                                                                                                            1518: 0x8800   PushLocalI32            adc_T
                                                                                                                                                                               1519: 0x0110   PushConstI32            1182793728 (0x46800000)
                                                                                                                                                                               1520: 0x0000                           
                                                                                                                                                                               1521: 0x4680                           
                                                                                                                                                                               1522: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1523: 0x003B   FltDiv                  
                                                                                                                                                                               1524: 0xA00C   PushMemberI32           dig_T1
                                                                                                                                                                               1525: 0x0110   PushConstI32            1149239296 (0x44800000)
                                                                                                                                                                               1526: 0x0000                           
                                                                                                                                                                               1527: 0x4480                           
                                                                                                                                                                               1528: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1529: 0x003B   FltDiv                  
                                                                                                                                                                               1530: 0x003F   FltSub                  
                                                                                                                                                                               1531: 0xA010   PushMemberI32           dig_T2
                                                                                                                                                                               1532: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1533: 0x003C   FltMul                  
                                                                                                                                                                               1534: 0x9001   PopLocalI32             var1

000562          var2 = ((adc_T / 131072.0 - dig_T1 / 8192.0) * (adc_T / 131072.0 - dig_T1 / 8192.0)) * dig_T3                                                                  1535: 0x8800   PushLocalI32            adc_T
                                                                                                                                                                               1536: 0x0110   PushConstI32            1207959552 (0x48000000)
                                                                                                                                                                               1537: 0x0000                           
                                                                                                                                                                               1538: 0x4800                           
                                                                                                                                                                               1539: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1540: 0x003B   FltDiv                  
                                                                                                                                                                               1541: 0xA00C   PushMemberI32           dig_T1
                                                                                                                                                                               1542: 0x0110   PushConstI32            1174405120 (0x46000000)
                                                                                                                                                                               1543: 0x0000                           
                                                                                                                                                                               1544: 0x4600                           
                                                                                                                                                                               1545: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1546: 0x003B   FltDiv                  
                                                                                                                                                                               1547: 0x003F   FltSub                  
                                                                                                                                                                               1548: 0x8800   PushLocalI32            adc_T
                                                                                                                                                                               1549: 0x0110   PushConstI32            1207959552 (0x48000000)
                                                                                                                                                                               1550: 0x0000                           
                                                                                                                                                                               1551: 0x4800                           
                                                                                                                                                                               1552: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1553: 0x003B   FltDiv                  
                                                                                                                                                                               1554: 0xA00C   PushMemberI32           dig_T1
                                                                                                                                                                               1555: 0x0110   PushConstI32            1174405120 (0x46000000)
                                                                                                                                                                               1556: 0x0000                           
                                                                                                                                                                               1557: 0x4600                           
                                                                                                                                                                               1558: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1559: 0x003B   FltDiv                  
                                                                                                                                                                               1560: 0x003F   FltSub                  
                                                                                                                                                                               1561: 0x003C   FltMul                  
                                                                                                                                                                               1562: 0xA014   PushMemberI32           dig_T3
                                                                                                                                                                               1563: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1564: 0x003C   FltMul                  
                                                                                                                                                                               1565: 0x9002   PopLocalI32             var2

000563          t_fine = (var1 + var2).ToInteger()                                                                                                                             1566: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1567: 0x8802   PushLocalI32            var2
                                                                                                                                                                               1568: 0x0039   FltAdd                  
                                                                                                                                                                               1569: 0x007B   CvtFltToInt             
                                                                                                                                                                               1570: 0xB064   PopMemberI32            t_fine

000564          T = (var1 + var2) / 5120.0                                                                                                                                     1571: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1572: 0x8802   PushLocalI32            var2
                                                                                                                                                                               1573: 0x0039   FltAdd                  
                                                                                                                                                                               1574: 0x0110   PushConstI32            1168113664 (0x45A00000)
                                                                                                                                                                               1575: 0x0000                           
                                                                                                                                                                               1576: 0x45A0                           
                                                                                                                                                                               1577: 0x003B   FltDiv                  
                                                                                                                                                                               1578: 0x9003   PopLocalI32             T

000565          Return T                                                                                                                                                       1579: 0x8803   PushLocalI32            T
                                                                                                                                                                               1580: 0x0092   ReturnValType           

000566      End Function                                                                                                                                                       1581: 0x0093   Return0                 

000567      
000568      Public Function readPressure() As Float                                                                                                                            1582: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000569          //uses 20 bit unsigned int Typical raw result = Pressure_raw 321916
000570          If online = False Then                                                                                                                                         1583: 0x9808   PushMemberU8            online
                                                                                                                                                                               1584: 0x3801   BranchTrue              1586

000571              Return 0                                                                                                                                                   1585: 0x0093   Return0                 

000572          End If
000573          
000574          readTemperature() // must be done first to get t_fine                                                                                                          1586: 0x000D   PushMe                  
                                                                                                                                                                               1587: 0x5467   BranchSubrBack          1485
                                                                                                                                                                               1588: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000575          
000576          Return BME280_compensate_P_double(pressure_raw >> 4)                                                                                                           1589: 0xA058   PushMemberI32           pressure_raw
                                                                                                                                                                               1590: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1591: 0x002F   IntShr                  
                                                                                                                                                                               1592: 0x000D   PushMe                  
                                                                                                                                                                               1593: 0x1C02   BranchSubr              1596
                                                                                                                                                                               1594: 0x0092   ReturnValType           

000577      End Function                                                                                                                                                       1595: 0x0093   Return0                 

000578      
000579      Public Function BME280_compensate_P_double(adc_P As Integer) As Float                                                                                              1596: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1597: 0xE060   AllocateStackSpace      ValTypeSize=3, RefTypeSize=0

000580          // Returns pressure in Pa as unsigned 32 bit integer. Output value of 96386 equals 96386 Pa = 963.86 hPa (mBar)
000581          Dim var1 As Float 
000582          Dim var2 As Float 
000583          Dim p As Float
000584          var1 = t_fine / 2 - 64000.0                                                                                                                                    1598: 0xA064   PushMemberI32           t_fine
                                                                                                                                                                               1599: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1600: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1601: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1602: 0x003B   FltDiv                  
                                                                                                                                                                               1603: 0x0110   PushConstI32            1199177728 (0x477A0000)
                                                                                                                                                                               1604: 0x0000                           
                                                                                                                                                                               1605: 0x477A                           
                                                                                                                                                                               1606: 0x003F   FltSub                  
                                                                                                                                                                               1607: 0x9001   PopLocalI32             var1

000585          var2 = var1 * var1 * dig_P6 / 32768.0                                                                                                                          1608: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1609: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1610: 0x003C   FltMul                  
                                                                                                                                                                               1611: 0xA02C   PushMemberI32           dig_P6
                                                                                                                                                                               1612: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1613: 0x003C   FltMul                  
                                                                                                                                                                               1614: 0x0110   PushConstI32            1191182336 (0x47000000)
                                                                                                                                                                               1615: 0x0000                           
                                                                                                                                                                               1616: 0x4700                           
                                                                                                                                                                               1617: 0x003B   FltDiv                  
                                                                                                                                                                               1618: 0x9002   PopLocalI32             var2

000586          var2 = var2 + var1 * dig_P5 * 2.0                                                                                                                              1619: 0x8802   PushLocalI32            var2
                                                                                                                                                                               1620: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1621: 0xA028   PushMemberI32           dig_P5
                                                                                                                                                                               1622: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1623: 0x003C   FltMul                  
                                                                                                                                                                               1624: 0xE91E   PushConstBit            1<<30  (0x40000000 Or 1073741824)
                                                                                                                                                                               1625: 0x003C   FltMul                  
                                                                                                                                                                               1626: 0x0039   FltAdd                  
                                                                                                                                                                               1627: 0x9002   PopLocalI32             var2

000587          var2 = (var2 / 4.0) + (dig_P4 * 65536.0)                                                                                                                       1628: 0x8802   PushLocalI32            var2
                                                                                                                                                                               1629: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                               1630: 0x003B   FltDiv                  
                                                                                                                                                                               1631: 0xA024   PushMemberI32           dig_P4
                                                                                                                                                                               1632: 0x0110   PushConstI32            1199570944 (0x47800000)
                                                                                                                                                                               1633: 0x0000                           
                                                                                                                                                                               1634: 0x4780                           
                                                                                                                                                                               1635: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1636: 0x003C   FltMul                  
                                                                                                                                                                               1637: 0x0039   FltAdd                  
                                                                                                                                                                               1638: 0x9002   PopLocalI32             var2

000588          var1 = (dig_P3 * var1 * var1 / 524288.0 + dig_P2 * var1) / 524288.0                                                                                            1639: 0xA020   PushMemberI32           dig_P3
                                                                                                                                                                               1640: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1641: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1642: 0x003C   FltMul                  
                                                                                                                                                                               1643: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1644: 0x003C   FltMul                  
                                                                                                                                                                               1645: 0x0110   PushConstI32            1224736768 (0x49000000)
                                                                                                                                                                               1646: 0x0000                           
                                                                                                                                                                               1647: 0x4900                           
                                                                                                                                                                               1648: 0x003B   FltDiv                  
                                                                                                                                                                               1649: 0xA01C   PushMemberI32           dig_P2
                                                                                                                                                                               1650: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1651: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1652: 0x003C   FltMul                  
                                                                                                                                                                               1653: 0x0039   FltAdd                  
                                                                                                                                                                               1654: 0x0110   PushConstI32            1224736768 (0x49000000)
                                                                                                                                                                               1655: 0x0000                           
                                                                                                                                                                               1656: 0x4900                           
                                                                                                                                                                               1657: 0x003B   FltDiv                  
                                                                                                                                                                               1658: 0x9001   PopLocalI32             var1

000589          var1 = (1.0 + var1 / 32768.0) * dig_P1                                                                                                                         1659: 0xEA01   PushConstFlt            1.0
                                                                                                                                                                               1660: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1661: 0x0110   PushConstI32            1191182336 (0x47000000)
                                                                                                                                                                               1662: 0x0000                           
                                                                                                                                                                               1663: 0x4700                           
                                                                                                                                                                               1664: 0x003B   FltDiv                  
                                                                                                                                                                               1665: 0x0039   FltAdd                  
                                                                                                                                                                               1666: 0xA018   PushMemberI32           dig_P1
                                                                                                                                                                               1667: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1668: 0x003C   FltMul                  
                                                                                                                                                                               1669: 0x9001   PopLocalI32             var1

000590          If (var1 = 0.0) Then                                                                                                                                           1670: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1671: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               1672: 0x003A   FltCmp                  
                                                                                                                                                                               1673: 0x2401   BranchNE                1675

000591              Return 0 // avoid exception caused by division by zero                                                                                                     1674: 0x0093   Return0                 

000592          End If
000593          p = 1048576.0 - adc_P                                                                                                                                          1675: 0x0110   PushConstI32            1233125376 (0x49800000)
                                                                                                                                                                               1676: 0x0000                           
                                                                                                                                                                               1677: 0x4980                           
                                                                                                                                                                               1678: 0x8800   PushLocalI32            adc_P
                                                                                                                                                                               1679: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1680: 0x003F   FltSub                  
                                                                                                                                                                               1681: 0x9003   PopLocalI32             p

000594          p = (p - (var2 / 4096.0)) * 6250.0 / var1                                                                                                                      1682: 0x8803   PushLocalI32            p
                                                                                                                                                                               1683: 0x8802   PushLocalI32            var2
                                                                                                                                                                               1684: 0x0110   PushConstI32            1166016512 (0x45800000)
                                                                                                                                                                               1685: 0x0000                           
                                                                                                                                                                               1686: 0x4580                           
                                                                                                                                                                               1687: 0x003B   FltDiv                  
                                                                                                                                                                               1688: 0x003F   FltSub                  
                                                                                                                                                                               1689: 0x0110   PushConstI32            1170427904 (0x45C35000)
                                                                                                                                                                               1690: 0x5000                           
                                                                                                                                                                               1691: 0x45C3                           
                                                                                                                                                                               1692: 0x003C   FltMul                  
                                                                                                                                                                               1693: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1694: 0x003B   FltDiv                  
                                                                                                                                                                               1695: 0x9003   PopLocalI32             p

000595          var1 = dig_P9 * p * p / 2147483648.0                                                                                                                           1696: 0xA038   PushMemberI32           dig_P9
                                                                                                                                                                               1697: 0x8803   PushLocalI32            p
                                                                                                                                                                               1698: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1699: 0x003C   FltMul                  
                                                                                                                                                                               1700: 0x8803   PushLocalI32            p
                                                                                                                                                                               1701: 0x003C   FltMul                  
                                                                                                                                                                               1702: 0x0110   PushConstI32            1325400064 (0x4F000000)
                                                                                                                                                                               1703: 0x0000                           
                                                                                                                                                                               1704: 0x4F00                           
                                                                                                                                                                               1705: 0x003B   FltDiv                  
                                                                                                                                                                               1706: 0x9001   PopLocalI32             var1

000596          var2 = p * dig_P8 / 32768.0                                                                                                                                    1707: 0x8803   PushLocalI32            p
                                                                                                                                                                               1708: 0xA034   PushMemberI32           dig_P8
                                                                                                                                                                               1709: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1710: 0x003C   FltMul                  
                                                                                                                                                                               1711: 0x0110   PushConstI32            1191182336 (0x47000000)
                                                                                                                                                                               1712: 0x0000                           
                                                                                                                                                                               1713: 0x4700                           
                                                                                                                                                                               1714: 0x003B   FltDiv                  
                                                                                                                                                                               1715: 0x9002   PopLocalI32             var2

000597          p = p + (var1 + var2 + dig_P7) / 16.0                                                                                                                          1716: 0x8803   PushLocalI32            p
                                                                                                                                                                               1717: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1718: 0x8802   PushLocalI32            var2
                                                                                                                                                                               1719: 0x0039   FltAdd                  
                                                                                                                                                                               1720: 0xA030   PushMemberI32           dig_P7
                                                                                                                                                                               1721: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1722: 0x0039   FltAdd                  
                                                                                                                                                                               1723: 0xEA10   PushConstFlt            16.0
                                                                                                                                                                               1724: 0x003B   FltDiv                  
                                                                                                                                                                               1725: 0x0039   FltAdd                  
                                                                                                                                                                               1726: 0x9003   PopLocalI32             p

000598          Return p / 100                                                                                                                                                 1727: 0x8803   PushLocalI32            p
                                                                                                                                                                               1728: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                               1729: 0x003B   FltDiv                  
                                                                                                                                                                               1730: 0x0092   ReturnValType           

000599      End Function                                                                                                                                                       1731: 0x0093   Return0                 

000600      
000601      Public Function readHumidity() As Float                                                                                                                            1732: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000602          //uses 16 bit unsigned int Typical raw result = Humidity_raw 27991
000603          If online = False Then                                                                                                                                         1733: 0x9808   PushMemberU8            online
                                                                                                                                                                               1734: 0x3801   BranchTrue              1736

000604              Return 0                                                                                                                                                   1735: 0x0093   Return0                 

000605          End If
000606          
000607          readTemperature() // must be done first to get t_fine                                                                                                          1736: 0x000D   PushMe                  
                                                                                                                                                                               1737: 0x54FD   BranchSubrBack          1485
                                                                                                                                                                               1738: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000608          
000609          Return bme280_compensate_H_double(humidity_raw)                                                                                                                1739: 0xA05C   PushMemberI32           humidity_raw
                                                                                                                                                                               1740: 0x000D   PushMe                  
                                                                                                                                                                               1741: 0x1C02   BranchSubr              1744
                                                                                                                                                                               1742: 0x0092   ReturnValType           

000610      End Function                                                                                                                                                       1743: 0x0093   Return0                 

000611      
000612      
000613      Public Function bme280_compensate_H_double(adc_H As Integer) As Float                                                                                              1744: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1745: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000614          // Returns humidity in %rH as as double. Output value of 46.332 represents 46.332 %rH
000615          
000616          Dim var_H As Float
000617          var_H = t_fine - 76800.0                                                                                                                                       1746: 0xA064   PushMemberI32           t_fine
                                                                                                                                                                               1747: 0x0110   PushConstI32            1201012736 (0x47960000)
                                                                                                                                                                               1748: 0x0000                           
                                                                                                                                                                               1749: 0x4796                           
                                                                                                                                                                               1750: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1751: 0x003F   FltSub                  
                                                                                                                                                                               1752: 0x9001   PopLocalI32             var_H

000618          var_H = (adc_H - (dig_H4 * 64.0 + dig_H5 / 16384.0 * var_H)) * (dig_H2 / 65536.0 * (1.0 + dig_H6 / 67108864.0 * var_H * (1.0 + dig_H3 / 67108864.0 * var_H)))  1753: 0x8800   PushLocalI32            adc_H
                                                                                                                                                                               1754: 0xA048   PushMemberI32           dig_H4
                                                                                                                                                                               1755: 0xEA40   PushConstFlt            64.0
                                                                                                                                                                               1756: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1757: 0x003C   FltMul                  
                                                                                                                                                                               1758: 0xA04C   PushMemberI32           dig_H5
                                                                                                                                                                               1759: 0x0110   PushConstI32            1182793728 (0x46800000)
                                                                                                                                                                               1760: 0x0000                           
                                                                                                                                                                               1761: 0x4680                           
                                                                                                                                                                               1762: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1763: 0x003B   FltDiv                  
                                                                                                                                                                               1764: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1765: 0x003C   FltMul                  
                                                                                                                                                                               1766: 0x0039   FltAdd                  
                                                                                                                                                                               1767: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1768: 0x003F   FltSub                  
                                                                                                                                                                               1769: 0xA040   PushMemberI32           dig_H2
                                                                                                                                                                               1770: 0x0110   PushConstI32            1199570944 (0x47800000)
                                                                                                                                                                               1771: 0x0000                           
                                                                                                                                                                               1772: 0x4780                           
                                                                                                                                                                               1773: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1774: 0x003B   FltDiv                  
                                                                                                                                                                               1775: 0xEA01   PushConstFlt            1.0
                                                                                                                                                                               1776: 0xA050   PushMemberI32           dig_H6
                                                                                                                                                                               1777: 0x0110   PushConstI32            1283457024 (0x4C800000)
                                                                                                                                                                               1778: 0x0000                           
                                                                                                                                                                               1779: 0x4C80                           
                                                                                                                                                                               1780: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1781: 0x003B   FltDiv                  
                                                                                                                                                                               1782: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1783: 0x003C   FltMul                  
                                                                                                                                                                               1784: 0xEA01   PushConstFlt            1.0
                                                                                                                                                                               1785: 0xA044   PushMemberI32           dig_H3
                                                                                                                                                                               1786: 0x0110   PushConstI32            1283457024 (0x4C800000)
                                                                                                                                                                               1787: 0x0000                           
                                                                                                                                                                               1788: 0x4C80                           
                                                                                                                                                                               1789: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1790: 0x003B   FltDiv                  
                                                                                                                                                                               1791: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1792: 0x003C   FltMul                  
                                                                                                                                                                               1793: 0x0039   FltAdd                  
                                                                                                                                                                               1794: 0x003C   FltMul                  
                                                                                                                                                                               1795: 0x0039   FltAdd                  
                                                                                                                                                                               1796: 0x003C   FltMul                  
                                                                                                                                                                               1797: 0x003C   FltMul                  
                                                                                                                                                                               1798: 0x9001   PopLocalI32             var_H

000619          var_H = var_H * (1.0 - dig_H1 * var_H / 524288.0)                                                                                                              1799: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1800: 0xEA01   PushConstFlt            1.0
                                                                                                                                                                               1801: 0xA03C   PushMemberI32           dig_H1
                                                                                                                                                                               1802: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1803: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1804: 0x003C   FltMul                  
                                                                                                                                                                               1805: 0x0110   PushConstI32            1224736768 (0x49000000)
                                                                                                                                                                               1806: 0x0000                           
                                                                                                                                                                               1807: 0x4900                           
                                                                                                                                                                               1808: 0x003B   FltDiv                  
                                                                                                                                                                               1809: 0x003F   FltSub                  
                                                                                                                                                                               1810: 0x003C   FltMul                  
                                                                                                                                                                               1811: 0x9001   PopLocalI32             var_H

000620          If (var_H > 100.0) Then                                                                                                                                        1812: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1813: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                               1814: 0x003A   FltCmp                  
                                                                                                                                                                               1815: 0x2C03   BranchLE                1819

000621              var_H = 100.0                                                                                                                                              1816: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                               1817: 0x9001   PopLocalI32             var_H

                                                                                                                                                                               1818: 0x4005   Branch                  1824
000622          ElseIf (var_H < 0.0) Then                                                                                                                                      1819: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1820: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               1821: 0x003A   FltCmp                  
                                                                                                                                                                               1822: 0x3401   BranchGE                1824

000623              var_H = 0.0                                                                                                                                                1823: 0x6001   Const0toLocalI32        var_H

000624          End If
000625          Return var_H                                                                                                                                                   1824: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1825: 0x0092   ReturnValType           

000626      End Function                                                                                                                                                       1826: 0x0093   Return0                 

000627      
000628      //**************************************************************************/
000629      //
000630      //    Calculates the altitude (in meters) from the specified atmospheric
000631      //    pressure (in hPa), and sea-level pressure (in hPa).
000632      //    @param  seaLevel      Sea-level pressure in hPa
000633      //    @param  atmospheric   Atmospheric pressure in hPa
000634      //
000635      //**************************************************************************/
000636      Public Function readAltitude(seaLevel As Float) As Float                                                                                                           1827: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1828: 0xE060   AllocateStackSpace      ValTypeSize=3, RefTypeSize=0

000637          
000638          // Equation taken from BMP180 datasheet (page 16):
000639          
000640          // Note that using the equation from wikipedia can give bad results
000641          // at high altitude.
000642          
000643          // Mean Sea Level Pressure is assumed to be 1013.25 unless changed.
000644          
000645          Dim atmospheric As Float = readPressure()                                                                                                                      1829: 0x000D   PushMe                  
                                                                                                                                                                               1830: 0x54F9   BranchSubrBack          1582
                                                                                                                                                                               1831: 0x9001   PopLocalI32             atmospheric

000646          Dim factor As Float = atmospheric / seaLevel                                                                                                                   1832: 0x8801   PushLocalI32            atmospheric
                                                                                                                                                                               1833: 0x8800   PushLocalI32            seaLevel
                                                                                                                                                                               1834: 0x003B   FltDiv                  
                                                                                                                                                                               1835: 0x9002   PopLocalI32             factor

000647          Dim res As Float = factor.Pow(0.1903)                                                                                                                          1836: 0x0110   PushConstI32            1044569601 (0x3E42DE01)
                                                                                                                                                                               1837: 0xDE01                           
                                                                                                                                                                               1838: 0x3E42                           
                                                                                                                                                                               1839: 0x8802   PushLocalI32            factor
                                                                                                                                                                               1840: 0x004E   FltPow                  
                                                                                                                                                                               1841: 0x9003   PopLocalI32             res

000648          Return 44330.0 * (1.0 - (res))                                                                                                                                 1842: 0x0110   PushConstI32            1194142208 (0x472D2A00)
                                                                                                                                                                               1843: 0x2A00                           
                                                                                                                                                                               1844: 0x472D                           
                                                                                                                                                                               1845: 0xEA01   PushConstFlt            1.0
                                                                                                                                                                               1846: 0x8803   PushLocalI32            res
                                                                                                                                                                               1847: 0x003F   FltSub                  
                                                                                                                                                                               1848: 0x003C   FltMul                  
                                                                                                                                                                               1849: 0x0092   ReturnValType           

000649      End Function                                                                                                                                                       1850: 0x0093   Return0                 

000650      
000651      Public Function readAltitude() As Float                                                                                                                            1851: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000652          Return readAltitude(1013.25)                                                                                                                                   1852: 0x0110   PushConstI32            1149063168 (0x447D5000)
                                                                                                                                                                               1853: 0x5000                           
                                                                                                                                                                               1854: 0x447D                           
                                                                                                                                                                               1855: 0x000D   PushMe                  
                                                                                                                                                                               1856: 0x541E   BranchSubrBack          1827
                                                                                                                                                                               1857: 0x0092   ReturnValType           

000653      End Function                                                                                                                                                       1858: 0x0093   Return0                 

000654      
000655      //Or in Feet
000656      Public Function readAltitudeFeet(seaLevel As Float) As Float                                                                                                       1859: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000657          Return readAltitude(seaLevel) * 3.28084                                                                                                                        1860: 0x8800   PushLocalI32            seaLevel
                                                                                                                                                                               1861: 0x000D   PushMe                  
                                                                                                                                                                               1862: 0x5424   BranchSubrBack          1827
                                                                                                                                                                               1863: 0x0110   PushConstI32            1079114056 (0x4051F948)
                                                                                                                                                                               1864: 0xF948                           
                                                                                                                                                                               1865: 0x4051                           
                                                                                                                                                                               1866: 0x003C   FltMul                  
                                                                                                                                                                               1867: 0x0092   ReturnValType           

000658      End Function                                                                                                                                                       1868: 0x0093   Return0                 

000659      
000660      Public Function readAltitudeFeet() As Float                                                                                                                        1869: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000661          Return readAltitude(1013.25) * 3.28084                                                                                                                         1870: 0x0110   PushConstI32            1149063168 (0x447D5000)
                                                                                                                                                                               1871: 0x5000                           
                                                                                                                                                                               1872: 0x447D                           
                                                                                                                                                                               1873: 0x000D   PushMe                  
                                                                                                                                                                               1874: 0x5430   BranchSubrBack          1827
                                                                                                                                                                               1875: 0x0110   PushConstI32            1079114056 (0x4051F948)
                                                                                                                                                                               1876: 0xF948                           
                                                                                                                                                                               1877: 0x4051                           
                                                                                                                                                                               1878: 0x003C   FltMul                  
                                                                                                                                                                               1879: 0x0092   ReturnValType           

000662      End Function                                                                                                                                                       1880: 0x0093   Return0                 

000663      
000664      //**************************************************************************/
000665      //
000666      //    Calculates Dew Point (in degrees C) from the specified temperature and
000667      //    relative Humidity (in %) This equation is an aproximation, but
000668      //    is fairly accurate for relative humidity values above 50%.
000669      //    Dewpoint is the temperature at which a given concentration of water vapor
000670      //    in air will form dew
000671      //    from:
000672      //    Lawrence, Mark G., 2005: 
000673      //    The relationship between relative humidity and the dewpoint temperature in moist air: 
000674      //    A simple conversion and applications.
000675      //    Bull. Amer. Meteor. Soc., 86, 225-233. doi: http;//dx.doi.org/10.1175/BAMS-86-2-225
000676      //
000677      //**************************************************************************/
000678      Public Function readAproxDewPoint() As Float                                                                                                                       1881: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               1882: 0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000679          Dim Temperature As Float = readTemperature()                                                                                                                   1883: 0x000D   PushMe                  
                                                                                                                                                                               1884: 0x5590   BranchSubrBack          1485
                                                                                                                                                                               1885: 0x9000   PopLocalI32             Temperature

000680          Dim Humidity As Float = readHumidity()                                                                                                                         1886: 0x000D   PushMe                  
                                                                                                                                                                               1887: 0x549C   BranchSubrBack          1732
                                                                                                                                                                               1888: 0x9001   PopLocalI32             Humidity

000681          Return Temperature - ((100.0 - Humidity) / 5.0)                                                                                                                1889: 0x8800   PushLocalI32            Temperature
                                                                                                                                                                               1890: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                               1891: 0x8801   PushLocalI32            Humidity
                                                                                                                                                                               1892: 0x003F   FltSub                  
                                                                                                                                                                               1893: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                               1894: 0x003B   FltDiv                  
                                                                                                                                                                               1895: 0x003F   FltSub                  
                                                                                                                                                                               1896: 0x0092   ReturnValType           

000682      End Function                                                                                                                                                       1897: 0x0093   Return0                 

000683      
000684      //**************************************************************************/
000685      //
000686      //    Calculates Dew Point (in degrees C) from the specified temperature and
000687      //    relative Humidity (in %) 
000688      //    Uses the Magnus Formula (see https://en.wikipedia.org/wiki/Dew_point)
000689      //
000690      //**************************************************************************/
000691      Public Function calculateDewPoint(b As Float, c As Float, T As Float, H As Float) As Float                                                                         1898: 0x1840   EntryPoint              ValTypParams=4, RefTypParams=0
                                                                                                                                                                               1899: 0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000692          'Dim a As Float = 6.1121   //not used
000693          'b sometimes called c17 is ~ 18
000694          'c sometimes called c243 is ~ 250
000695          'Dim d As Float = 234.5   //not used in Magnus basic formula
000696          'T is Temperature
000697          'H is Humidity
000698          Dim g As Float = (H / 100.0).Log() + ((b * T) / (c + T))                                                                                                       1900: 0x8803   PushLocalI32            H
                                                                                                                                                                               1901: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                               1902: 0x003B   FltDiv                  
                                                                                                                                                                               1903: 0x004C   FltLog                  
                                                                                                                                                                               1904: 0x8800   PushLocalI32            b
                                                                                                                                                                               1905: 0x8802   PushLocalI32            T
                                                                                                                                                                               1906: 0x003C   FltMul                  
                                                                                                                                                                               1907: 0x8801   PushLocalI32            c
                                                                                                                                                                               1908: 0x8802   PushLocalI32            T
                                                                                                                                                                               1909: 0x0039   FltAdd                  
                                                                                                                                                                               1910: 0x003B   FltDiv                  
                                                                                                                                                                               1911: 0x0039   FltAdd                  
                                                                                                                                                                               1912: 0x9004   PopLocalI32             g

000699          Dim Dewpoint As Float = (c * g) / (b - g)                                                                                                                      1913: 0x8801   PushLocalI32            c
                                                                                                                                                                               1914: 0x8804   PushLocalI32            g
                                                                                                                                                                               1915: 0x003C   FltMul                  
                                                                                                                                                                               1916: 0x8800   PushLocalI32            b
                                                                                                                                                                               1917: 0x8804   PushLocalI32            g
                                                                                                                                                                               1918: 0x003F   FltSub                  
                                                                                                                                                                               1919: 0x003B   FltDiv                  
                                                                                                                                                                               1920: 0x9005   PopLocalI32             Dewpoint

000700          Return Dewpoint                                                                                                                                                1921: 0x8805   PushLocalI32            Dewpoint
                                                                                                                                                                               1922: 0x0092   ReturnValType           

000701      End Function                                                                                                                                                       1923: 0x0093   Return0                 

000702      
000703      Public Function readDewPoint() As Float                                                                                                                            1924: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000704          //uses Wikepeadia formula constants for Magnus equation
000705          Return calculateDewPoint(18.675, 257.14, readTemperature(), readHumidity())                                                                                    1925: 0x0110   PushConstI32            1100310118 (0x41956666)
                                                                                                                                                                               1926: 0x6666                           
                                                                                                                                                                               1927: 0x4195                           
                                                                                                                                                                               1928: 0x0110   PushConstI32            1132499436 (0x438091EC)
                                                                                                                                                                               1929: 0x91EC                           
                                                                                                                                                                               1930: 0x4380                           
                                                                                                                                                                               1931: 0x000D   PushMe                  
                                                                                                                                                                               1932: 0x55C0   BranchSubrBack          1485
                                                                                                                                                                               1933: 0x000D   PushMe                  
                                                                                                                                                                               1934: 0x54CB   BranchSubrBack          1732
                                                                                                                                                                               1935: 0x000D   PushMe                  
                                                                                                                                                                               1936: 0x5427   BranchSubrBack          1898
                                                                                                                                                                               1937: 0x0092   ReturnValType           

000706      End Function                                                                                                                                                       1938: 0x0093   Return0                 

000707      
000708      Public Function readAlternateDewPoint() As Float                                                                                                                   1939: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000709          //uses alternate constants
000710          Return calculateDewPoint(17.67, 243.5, readTemperature(), readHumidity())                                                                                      1940: 0x0110   PushConstI32            1099783209 (0x418D5C29)
                                                                                                                                                                               1941: 0x5C29                           
                                                                                                                                                                               1942: 0x418D                           
                                                                                                                                                                               1943: 0x0110   PushConstI32            1131642880 (0x43738000)
                                                                                                                                                                               1944: 0x8000                           
                                                                                                                                                                               1945: 0x4373                           
                                                                                                                                                                               1946: 0x000D   PushMe                  
                                                                                                                                                                               1947: 0x55CF   BranchSubrBack          1485
                                                                                                                                                                               1948: 0x000D   PushMe                  
                                                                                                                                                                               1949: 0x54DA   BranchSubrBack          1732
                                                                                                                                                                               1950: 0x000D   PushMe                  
                                                                                                                                                                               1951: 0x5436   BranchSubrBack          1898
                                                                                                                                                                               1952: 0x0092   ReturnValType           

000711      End Function                                                                                                                                                       1953: 0x0093   Return0                 

000712      
000713      //====================== I2C read/write stuff =============================//
000714      
000715      //**************************************************************************/
000716      //
000717      //    @brief  Writes an 8 bit value over I2C
000718      //
000719      //**************************************************************************/
000720      Public Sub SetRegister(reg As Byte)                                                                                                                                1954: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1955: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000721          Dim data As ListOfByte = New ListOfByte                                                                                                                        1956: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                               1957: 0x0010   ClassNew                
                                                                                                                                                                               1958: 0x9400   PopLocalRef             data

000722          data.Add(reg)                                                                                                                                                  1959: 0x8800   PushLocalI32            reg
                                                                                                                                                                               1960: 0x8C00   PushLocalRef            data
                                                                                                                                                                               1961: 0x00A3   ListAdd                 

000723          BME280_I2C.Write(data)                                                                                                                                         1962: 0x8C00   PushLocalRef            data
                                                                                                                                                                               1963: 0xA400   PushMemberRef           BME280_I2C
                                                                                                                                                                               1964: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               1965: 0x00E1   I2cDeviceWrite          
                                                                                                                                                                               1966: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000724      End Sub                                                                                                                                                            1967: 0x0091   Return                  

000725      
000726      Public Sub write8(reg As Byte, value As Byte)                                                                                                                      1968: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                               1969: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000727          Dim data As ListOfByte = New ListOfByte                                                                                                                        1970: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                               1971: 0x0010   ClassNew                
                                                                                                                                                                               1972: 0x9400   PopLocalRef             data

000728          data.Add(reg)                                                                                                                                                  1973: 0x8800   PushLocalI32            reg
                                                                                                                                                                               1974: 0x8C00   PushLocalRef            data
                                                                                                                                                                               1975: 0x00A3   ListAdd                 

000729          data.Add(value)                                                                                                                                                1976: 0x8801   PushLocalI32            value
                                                                                                                                                                               1977: 0x8C00   PushLocalRef            data
                                                                                                                                                                               1978: 0x00A3   ListAdd                 

000730          BME280_I2C.Write(data)                                                                                                                                         1979: 0x8C00   PushLocalRef            data
                                                                                                                                                                               1980: 0xA400   PushMemberRef           BME280_I2C
                                                                                                                                                                               1981: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               1982: 0x00E1   I2cDeviceWrite          
                                                                                                                                                                               1983: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000731      End Sub                                                                                                                                                            1984: 0x0091   Return                  

000732      
000733      //**************************************************************************/
000734      //
000735      //    @brief  Reads a 16 bit value over I2C returns two byte ListOfBytes
000736      //
000737      //**************************************************************************/
000738      Public Function read2X8(reg As Byte) As ListOfByte                                                                                                                 1985: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1986: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000739          SetRegister(reg)                                                                                                                                               1987: 0x8800   PushLocalI32            reg
                                                                                                                                                                               1988: 0x000D   PushMe                  
                                                                                                                                                                               1989: 0x5424   BranchSubrBack          1954

000740          Dim value As ListOfByte = BME280_I2C.Read(2)                                                                                                                   1990: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1991: 0xA400   PushMemberRef           BME280_I2C
                                                                                                                                                                               1992: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               1993: 0x00E0   I2cDeviceRead           
                                                                                                                                                                               1994: 0x9400   PopLocalRef             value

000741          Return value                                                                                                                                                   1995: 0x8C00   PushLocalRef            value
                                                                                                                                                                               1996: 0x0095   ReturnRefType           

000742      End Function                                                                                                                                                       1997: 0x0096   ReturnNothing           

000743      
000744      //**************************************************************************/
000745      //
000746      //    @brief  Reads an unsigned 8 bit value over I2C
000747      //
000748      //**************************************************************************/
000749      Public Function read8(reg As Byte) As Integer //should return unsigned Byte                                                                                        1998: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1999: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

000750          SetRegister(reg)                                                                                                                                               2000: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2001: 0x000D   PushMe                  
                                                                                                                                                                               2002: 0x5431   BranchSubrBack          1954

000751          Dim result As Short = 0
000752          Dim value As ListOfByte = BME280_I2C.Read(1)                                                                                                                   2003: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2004: 0xA400   PushMemberRef           BME280_I2C
                                                                                                                                                                               2005: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2006: 0x00E0   I2cDeviceRead           
                                                                                                                                                                               2007: 0x9400   PopLocalRef             value

000753          If value <> Nothing Then                                                                                                                                       2008: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2009: 0x000E   PushNothing             
                                                                                                                                                                               2010: 0x000B   RefCmpNE                
                                                                                                                                                                               2011: 0x3C04   BranchFalse             2016

000754              result = value(0)                                                                                                                                          2012: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2013: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2014: 0x00B4   ListItemGet             
                                                                                                                                                                               2015: 0x9001   PopLocalI32             result

000755          End If
000756          Return result                                                                                                                                                  2016: 0x8801   PushLocalI32            result
                                                                                                                                                                               2017: 0x0092   ReturnValType           

000757      End Function                                                                                                                                                       2018: 0x0093   Return0                 

000758      
000759      //**************************************************************************/
000760      //
000761      //    @brief  Reads a signed 8 bit value over I2C
000762      //
000763      //**************************************************************************/
000764      Public Function readS8(reg As Byte) As Integer                                                                                                                     2019: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               2020: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000765          Dim result As Byte = read8(reg).ToByte()                                                                                                                       2021: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2022: 0x000D   PushMe                  
                                                                                                                                                                               2023: 0x541A   BranchSubrBack          1998
                                                                                                                                                                               2024: 0x007D   CvtIntToByt             
                                                                                                                                                                               2025: 0x9001   PopLocalI32             result

000766          Return result.SignExtend() //return signed Integer                                                                                                             2026: 0x8801   PushLocalI32            result
                                                                                                                                                                               2027: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2028: 0x0005   SignExtend              
                                                                                                                                                                               2029: 0x0092   ReturnValType           

000767      End Function                                                                                                                                                       2030: 0x0093   Return0                 

000768      
000769      //**************************************************************************/
000770      //
000771      //    @brief  Reads an unsigned 16 bit value over I2C
000772      //
000773      //**************************************************************************/
000774      Public Function read16(reg As Byte) As Integer                                                                                                                     2031: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000775          Return readS16(reg).ToShort.ZeroExtend()                                                                                                                       2032: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2033: 0x000D   PushMe                  
                                                                                                                                                                               2034: 0x1C0E   BranchSubr              2049
                                                                                                                                                                               2035: 0x007F   CvtIntToSho             
                                                                                                                                                                               2036: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2037: 0x0005   SignExtend              
                                                                                                                                                                               2038: 0x0092   ReturnValType           

000776      End Function                                                                                                                                                       2039: 0x0093   Return0                 

000777      
000778      Public Function read16_LE(reg As Byte) As Integer                                                                                                                  2040: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000779          Return readS16_LE(reg).ToShort.ZeroExtend()                                                                                                                    2041: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2042: 0x000D   PushMe                  
                                                                                                                                                                               2043: 0x1C28   BranchSubr              2084
                                                                                                                                                                               2044: 0x007F   CvtIntToSho             
                                                                                                                                                                               2045: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2046: 0x0005   SignExtend              
                                                                                                                                                                               2047: 0x0092   ReturnValType           

000780      End Function                                                                                                                                                       2048: 0x0093   Return0                 

000781      
000782      //**************************************************************************/
000783      //
000784      //    @brief  Reads a signed 16 bit value over I2C
000785      //
000786      //**************************************************************************/
000787      Public Function readS16(reg As Byte) As Integer //should return Short                                                                                              2049: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               2050: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

000788          Dim result As Short = 0
000789          Dim value As ListOfByte = read2X8(reg)                                                                                                                         2051: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2052: 0x000D   PushMe                  
                                                                                                                                                                               2053: 0x5445   BranchSubrBack          1985
                                                                                                                                                                               2054: 0x9400   PopLocalRef             value

000790          If value <> Nothing Then                                                                                                                                       2055: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2056: 0x000E   PushNothing             
                                                                                                                                                                               2057: 0x000B   RefCmpNE                
                                                                                                                                                                               2058: 0x3C0A   BranchFalse             2069

000791              result = (value(0) << 8) | value(1)                                                                                                                        2059: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2060: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2061: 0x00B4   ListItemGet             
                                                                                                                                                                               2062: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2063: 0x002E   IntShl                  
                                                                                                                                                                               2064: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2065: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2066: 0x00B4   ListItemGet             
                                                                                                                                                                               2067: 0x002D   IntOr                   
                                                                                                                                                                               2068: 0x9001   PopLocalI32             result

000792              //result = value.ExtractShort(0, Endianness.Big) //not working
000793          End If
000794          //convert value to 2's compliment
000795          If (value(0) > 0x7f) Then                                                                                                                                      2069: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2070: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2071: 0x00B4   ListItemGet             
                                                                                                                                                                               2072: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                               2073: 0x2C07   BranchLE                2081

000796              result = (~result + 1) * (-1)                                                                                                                              2074: 0x8801   PushLocalI32            result
                                                                                                                                                                               2075: 0x002C   IntNot                  
                                                                                                                                                                               2076: 0x007F   CvtIntToSho             
                                                                                                                                                                               2077: 0x0028   IntInc                  
                                                                                                                                                                               2078: 0x0016   PushConstMinus1         
                                                                                                                                                                               2079: 0x002A   IntMul                  
                                                                                                                                                                               2080: 0x9001   PopLocalI32             result

000797          End If
000798          Return result                                                                                                                                                  2081: 0x8801   PushLocalI32            result
                                                                                                                                                                               2082: 0x0092   ReturnValType           

000799      End Function                                                                                                                                                       2083: 0x0093   Return0                 

000800      
000801      Public Function readS16_LE(reg As Byte) As Integer //should return Short                                                                                           2084: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               2085: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

000802          Dim result As Short = 0
000803          Dim value As ListOfByte = read2X8(reg)                                                                                                                         2086: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2087: 0x000D   PushMe                  
                                                                                                                                                                               2088: 0x5468   BranchSubrBack          1985
                                                                                                                                                                               2089: 0x9400   PopLocalRef             value

000804          If value <> Nothing Then                                                                                                                                       2090: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2091: 0x000E   PushNothing             
                                                                                                                                                                               2092: 0x000B   RefCmpNE                
                                                                                                                                                                               2093: 0x3C0A   BranchFalse             2104

000805              result = (value(1) << 8) | value(0)                                                                                                                        2094: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2095: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2096: 0x00B4   ListItemGet             
                                                                                                                                                                               2097: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2098: 0x002E   IntShl                  
                                                                                                                                                                               2099: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2100: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2101: 0x00B4   ListItemGet             
                                                                                                                                                                               2102: 0x002D   IntOr                   
                                                                                                                                                                               2103: 0x9001   PopLocalI32             result

000806              //result = value.ExtractShort(0, Endianness.Little) //not working
000807          End If
000808          //convert value to 2's compliment
000809          If (value(1) > 0x7f) Then                                                                                                                                      2104: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2105: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2106: 0x00B4   ListItemGet             
                                                                                                                                                                               2107: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                               2108: 0x2C07   BranchLE                2116

000810              result = (~result + 1) * (-1)                                                                                                                              2109: 0x8801   PushLocalI32            result
                                                                                                                                                                               2110: 0x002C   IntNot                  
                                                                                                                                                                               2111: 0x007F   CvtIntToSho             
                                                                                                                                                                               2112: 0x0028   IntInc                  
                                                                                                                                                                               2113: 0x0016   PushConstMinus1         
                                                                                                                                                                               2114: 0x002A   IntMul                  
                                                                                                                                                                               2115: 0x9001   PopLocalI32             result

000811          End If
000812          Return result                                                                                                                                                  2116: 0x8801   PushLocalI32            result
                                                                                                                                                                               2117: 0x0092   ReturnValType           

000813      End Function                                                                                                                                                       2118: 0x0093   Return0                 

000814      
000815      //**************************************************************************/
000816      //
000817      //    @brief  Reads a signed 24 bit value over I2C
000818      //
000819      //**************************************************************************/
000820      
000821      Public Function read24(reg As Byte) As Integer                                                                                                                     2119: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               2120: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

000822          SetRegister(reg)                                                                                                                                               2121: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2122: 0x000D   PushMe                  
                                                                                                                                                                               2123: 0x54AA   BranchSubrBack          1954

000823          Dim result As Integer = 0
000824          Dim value As ListOfByte = BME280_I2C.Read(3)                                                                                                                   2124: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               2125: 0xA400   PushMemberRef           BME280_I2C
                                                                                                                                                                               2126: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2127: 0x00E0   I2cDeviceRead           
                                                                                                                                                                               2128: 0x9400   PopLocalRef             value

000825          If value <> Nothing Then                                                                                                                                       2129: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2130: 0x000E   PushNothing             
                                                                                                                                                                               2131: 0x000B   RefCmpNE                
                                                                                                                                                                               2132: 0x3C10   BranchFalse             2149

000826              result = (value(0) << 16) | (value(1) << 8) | value(2)                                                                                                     2133: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2134: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2135: 0x00B4   ListItemGet             
                                                                                                                                                                               2136: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               2137: 0x002E   IntShl                  
                                                                                                                                                                               2138: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2139: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2140: 0x00B4   ListItemGet             
                                                                                                                                                                               2141: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2142: 0x002E   IntShl                  
                                                                                                                                                                               2143: 0x002D   IntOr                   
                                                                                                                                                                               2144: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               2145: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2146: 0x00B4   ListItemGet             
                                                                                                                                                                               2147: 0x002D   IntOr                   
                                                                                                                                                                               2148: 0x9001   PopLocalI32             result

000827          End If
000828          Return result                                                                                                                                                  2149: 0x8801   PushLocalI32            result
                                                                                                                                                                               2150: 0x0092   ReturnValType           

000829      End Function                                                                                                                                                       2151: 0x0093   Return0                 

000830      
000831      //**************************************************************************/
000832      //
000833      //    @brief  Reads all values (press/temp/humid) values over I2C
000834      //    reg is start register - to read all read 0xF7 to 0xFE (8 registers)
000835      //    Allows use of Shadow registers in normal mode (ie can read registers
000836      //    to get previous reading while module is acquiring new reading)
000837      //
000838      //**************************************************************************/
000839      
000840      Public Sub readall()                                                                                                                                               2152: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               2153: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000841          SetRegister(REGISTER_PRESSUREDATA)                                                                                                                             2154: 0x80F7   PushConstU10            247 (0x00F7)
                                                                                                                                                                               2155: 0x000D   PushMe                  
                                                                                                                                                                               2156: 0x54CB   BranchSubrBack          1954

000842          Dim value As ListOfByte = BME280_I2C.Read(8)                                                                                                                   2157: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2158: 0xA400   PushMemberRef           BME280_I2C
                                                                                                                                                                               2159: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2160: 0x00E0   I2cDeviceRead           
                                                                                                                                                                               2161: 0x9400   PopLocalRef             value

000843          If value <> Nothing Then                                                                                                                                       2162: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2163: 0x000E   PushNothing             
                                                                                                                                                                               2164: 0x000B   RefCmpNE                
                                                                                                                                                                               2165: 0x3C2A   BranchFalse             2208

000844              pressure_raw = (value(0) << 16) | (value(1) << 8) | value(2)                                                                                               2166: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2167: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2168: 0x00B4   ListItemGet             
                                                                                                                                                                               2169: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               2170: 0x002E   IntShl                  
                                                                                                                                                                               2171: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2172: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2173: 0x00B4   ListItemGet             
                                                                                                                                                                               2174: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2175: 0x002E   IntShl                  
                                                                                                                                                                               2176: 0x002D   IntOr                   
                                                                                                                                                                               2177: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               2178: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2179: 0x00B4   ListItemGet             
                                                                                                                                                                               2180: 0x002D   IntOr                   
                                                                                                                                                                               2181: 0xB058   PopMemberI32            pressure_raw

000845              temperature_raw = (value(3) << 16) | (value(4) << 8) | value(5)                                                                                            2182: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               2183: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2184: 0x00B4   ListItemGet             
                                                                                                                                                                               2185: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               2186: 0x002E   IntShl                  
                                                                                                                                                                               2187: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               2188: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2189: 0x00B4   ListItemGet             
                                                                                                                                                                               2190: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2191: 0x002E   IntShl                  
                                                                                                                                                                               2192: 0x002D   IntOr                   
                                                                                                                                                                               2193: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               2194: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2195: 0x00B4   ListItemGet             
                                                                                                                                                                               2196: 0x002D   IntOr                   
                                                                                                                                                                               2197: 0xB054   PopMemberI32            temperature_raw

000846              humidity_raw = (value(6) << 8) | value(7)                                                                                                                  2198: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               2199: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2200: 0x00B4   ListItemGet             
                                                                                                                                                                               2201: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2202: 0x002E   IntShl                  
                                                                                                                                                                               2203: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               2204: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2205: 0x00B4   ListItemGet             
                                                                                                                                                                               2206: 0x002D   IntOr                   
                                                                                                                                                                               2207: 0xB05C   PopMemberI32            humidity_raw

000847          End If 
000848      End Sub                                                                                                                                                            2208: 0x0091   Return                  

000849      
000850      //**************************************************************************/
000851      //
000852      //    @brief  Reads the factory-set coefficients
000853      //
000854      //**************************************************************************/
000855      Public Sub readCoefficients()                                                                                                                                      2209: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000856          
000857          dig_T1 = read16_LE(REGISTER_DIG_T1)                                                                                                                            2210: 0x8088   PushConstU10            136 (0x0088)
                                                                                                                                                                               2211: 0x000D   PushMe                  
                                                                                                                                                                               2212: 0x54AD   BranchSubrBack          2040
                                                                                                                                                                               2213: 0xB00C   PopMemberI32            dig_T1

000858          dig_T2 = readS16_LE(REGISTER_DIG_T2)                                                                                                                           2214: 0x808A   PushConstU10            138 (0x008A)
                                                                                                                                                                               2215: 0x000D   PushMe                  
                                                                                                                                                                               2216: 0x5485   BranchSubrBack          2084
                                                                                                                                                                               2217: 0xB010   PopMemberI32            dig_T2

000859          dig_T3 = readS16_LE(REGISTER_DIG_T3)                                                                                                                           2218: 0x808C   PushConstU10            140 (0x008C)
                                                                                                                                                                               2219: 0x000D   PushMe                  
                                                                                                                                                                               2220: 0x5489   BranchSubrBack          2084
                                                                                                                                                                               2221: 0xB014   PopMemberI32            dig_T3

000860          
000861          dig_P1 = read16_LE(REGISTER_DIG_P1)                                                                                                                            2222: 0x808E   PushConstU10            142 (0x008E)
                                                                                                                                                                               2223: 0x000D   PushMe                  
                                                                                                                                                                               2224: 0x54B9   BranchSubrBack          2040
                                                                                                                                                                               2225: 0xB018   PopMemberI32            dig_P1

000862          dig_P2 = readS16_LE(REGISTER_DIG_P2)                                                                                                                           2226: 0x8090   PushConstU10            144 (0x0090)
                                                                                                                                                                               2227: 0x000D   PushMe                  
                                                                                                                                                                               2228: 0x5491   BranchSubrBack          2084
                                                                                                                                                                               2229: 0xB01C   PopMemberI32            dig_P2

000863          dig_P3 = readS16_LE(REGISTER_DIG_P3)                                                                                                                           2230: 0x8092   PushConstU10            146 (0x0092)
                                                                                                                                                                               2231: 0x000D   PushMe                  
                                                                                                                                                                               2232: 0x5495   BranchSubrBack          2084
                                                                                                                                                                               2233: 0xB020   PopMemberI32            dig_P3

000864          dig_P4 = readS16_LE(REGISTER_DIG_P4)                                                                                                                           2234: 0x8094   PushConstU10            148 (0x0094)
                                                                                                                                                                               2235: 0x000D   PushMe                  
                                                                                                                                                                               2236: 0x5499   BranchSubrBack          2084
                                                                                                                                                                               2237: 0xB024   PopMemberI32            dig_P4

000865          dig_P5 = readS16_LE(REGISTER_DIG_P5)                                                                                                                           2238: 0x8096   PushConstU10            150 (0x0096)
                                                                                                                                                                               2239: 0x000D   PushMe                  
                                                                                                                                                                               2240: 0x549D   BranchSubrBack          2084
                                                                                                                                                                               2241: 0xB028   PopMemberI32            dig_P5

000866          dig_P6 = readS16_LE(REGISTER_DIG_P6)                                                                                                                           2242: 0x8098   PushConstU10            152 (0x0098)
                                                                                                                                                                               2243: 0x000D   PushMe                  
                                                                                                                                                                               2244: 0x54A1   BranchSubrBack          2084
                                                                                                                                                                               2245: 0xB02C   PopMemberI32            dig_P6

000867          dig_P7 = readS16_LE(REGISTER_DIG_P7)                                                                                                                           2246: 0x809A   PushConstU10            154 (0x009A)
                                                                                                                                                                               2247: 0x000D   PushMe                  
                                                                                                                                                                               2248: 0x54A5   BranchSubrBack          2084
                                                                                                                                                                               2249: 0xB030   PopMemberI32            dig_P7

000868          dig_P8 = readS16_LE(REGISTER_DIG_P8)                                                                                                                           2250: 0x809C   PushConstU10            156 (0x009C)
                                                                                                                                                                               2251: 0x000D   PushMe                  
                                                                                                                                                                               2252: 0x54A9   BranchSubrBack          2084
                                                                                                                                                                               2253: 0xB034   PopMemberI32            dig_P8

000869          dig_P9 = readS16_LE(REGISTER_DIG_P9)                                                                                                                           2254: 0x809E   PushConstU10            158 (0x009E)
                                                                                                                                                                               2255: 0x000D   PushMe                  
                                                                                                                                                                               2256: 0x54AD   BranchSubrBack          2084
                                                                                                                                                                               2257: 0xB038   PopMemberI32            dig_P9

000870          
000871          dig_H1 = read8(REGISTER_DIG_H1)                                                                                                                                2258: 0x80A1   PushConstU10            161 (0x00A1)
                                                                                                                                                                               2259: 0x000D   PushMe                  
                                                                                                                                                                               2260: 0x5507   BranchSubrBack          1998
                                                                                                                                                                               2261: 0xB03C   PopMemberI32            dig_H1

000872          dig_H2 = readS16_LE(REGISTER_DIG_H2)                                                                                                                           2262: 0x80E1   PushConstU10            225 (0x00E1)
                                                                                                                                                                               2263: 0x000D   PushMe                  
                                                                                                                                                                               2264: 0x54B5   BranchSubrBack          2084
                                                                                                                                                                               2265: 0xB040   PopMemberI32            dig_H2

000873          dig_H3 = read8(REGISTER_DIG_H3)                                                                                                                                2266: 0x80E3   PushConstU10            227 (0x00E3)
                                                                                                                                                                               2267: 0x000D   PushMe                  
                                                                                                                                                                               2268: 0x550F   BranchSubrBack          1998
                                                                                                                                                                               2269: 0xB044   PopMemberI32            dig_H3

000874          dig_H4 = (read8(REGISTER_DIG_H4) << 4) | (read8(REGISTER_DIG_H4 + 1) & 0x0f)                                                                                   2270: 0x80E4   PushConstU10            228 (0x00E4)
                                                                                                                                                                               2271: 0x000D   PushMe                  
                                                                                                                                                                               2272: 0x5513   BranchSubrBack          1998
                                                                                                                                                                               2273: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               2274: 0x002E   IntShl                  
                                                                                                                                                                               2275: 0x80E5   PushConstU10            229 (0x00E5)
                                                                                                                                                                               2276: 0x000D   PushMe                  
                                                                                                                                                                               2277: 0x5518   BranchSubrBack          1998
                                                                                                                                                                               2278: 0x800F   PushConstU10            15 (0x000F)
                                                                                                                                                                               2279: 0x001F   IntAnd                  
                                                                                                                                                                               2280: 0x002D   IntOr                   
                                                                                                                                                                               2281: 0xB048   PopMemberI32            dig_H4

000875          dig_H5 = (read8(REGISTER_DIG_H5 + 1) << 4) | (read8(REGISTER_DIG_H5) >> 4)                                                                                     2282: 0x80E6   PushConstU10            230 (0x00E6)
                                                                                                                                                                               2283: 0x000D   PushMe                  
                                                                                                                                                                               2284: 0x551F   BranchSubrBack          1998
                                                                                                                                                                               2285: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               2286: 0x002E   IntShl                  
                                                                                                                                                                               2287: 0x80E5   PushConstU10            229 (0x00E5)
                                                                                                                                                                               2288: 0x000D   PushMe                  
                                                                                                                                                                               2289: 0x5524   BranchSubrBack          1998
                                                                                                                                                                               2290: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               2291: 0x002F   IntShr                  
                                                                                                                                                                               2292: 0x002D   IntOr                   
                                                                                                                                                                               2293: 0xB04C   PopMemberI32            dig_H5

000876          dig_H6 = readS8(REGISTER_DIG_H6)                                                                                                                               2294: 0x80E7   PushConstU10            231 (0x00E7)
                                                                                                                                                                               2295: 0x000D   PushMe                  
                                                                                                                                                                               2296: 0x5516   BranchSubrBack          2019
                                                                                                                                                                               2297: 0xB050   PopMemberI32            dig_H6

000877      End Sub                                                                                                                                                            2298: 0x0091   Return                  

000878      
000879  End Class                                                                                                                                                              754:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for BME280
    Block Class (Line 26:879)
        BME280          Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        String          version         (Literal="1.01")
        Byte            REGISTER_DIG_T1 (Literal=136)
        Byte            REGISTER_DIG_T2 (Literal=138)
        Byte            REGISTER_DIG_T3 (Literal=140)
        Byte            REGISTER_DIG_P1 (Literal=142)
        Byte            REGISTER_DIG_P2 (Literal=144)
        Byte            REGISTER_DIG_P3 (Literal=146)
        Byte            REGISTER_DIG_P4 (Literal=148)
        Byte            REGISTER_DIG_P5 (Literal=150)
        Byte            REGISTER_DIG_P6 (Literal=152)
        Byte            REGISTER_DIG_P7 (Literal=154)
        Byte            REGISTER_DIG_P8 (Literal=156)
        Byte            REGISTER_DIG_P9 (Literal=158)
        Byte            REGISTER_DIG_H1 (Literal=161)
        Byte            REGISTER_DIG_H2 (Literal=225)
        Byte            REGISTER_DIG_H3 (Literal=227)
        Byte            REGISTER_DIG_H4 (Literal=228)
        Byte            REGISTER_DIG_H5 (Literal=229)
        Byte            REGISTER_DIG_H6 (Literal=231)
        Byte            REGISTER_CHIPID (Literal=208)
        Byte            REGISTER_VERSION(Literal=209)
        Byte            REGISTER_SOFTRES(Literal=224)
        Byte            REGISTER_CAL26  (Literal=225)
        Byte            REGISTER_CONTROL(Literal=242)
        Byte            REGISTER_STATUS (Literal=243)
        Byte            REGISTER_CONTROL(Literal=244)
        Byte            REGISTER_CONFIG (Literal=245)
        Byte            REGISTER_PRESSUR(Literal=247)
        Byte            REGISTER_TEMPDAT(Literal=250)
        Byte            REGISTER_HUMIDDA(Literal=253)
        Byte            SLEEP           (Literal=0)
        Byte            FORCED          (Literal=1)
        Byte            NORMAL          (Literal=3)
        Byte            SAMPLING_0      (Literal=0)
        Byte            SAMPLING_1      (Literal=1)
        Byte            SAMPLING_2      (Literal=2)
        Byte            SAMPLING_4      (Literal=3)
        Byte            SAMPLING_8      (Literal=4)
        Byte            SAMPLING_16     (Literal=5)
        Byte            IIR_SAMPLING_0  (Literal=0)
        Byte            IIR_SAMPLING_2  (Literal=1)
        Byte            IIR_SAMPLING_4  (Literal=2)
        Byte            IIR_SAMPLING_8  (Literal=3)
        Byte            IIR_SAMPLING_16 (Literal=4)
        Integer         dig_T1          (MemberValTypVariableOffset=12)
        Integer         dig_T2          (MemberValTypVariableOffset=16)
        Integer         dig_T3          (MemberValTypVariableOffset=20)
        Integer         dig_P1          (MemberValTypVariableOffset=24)
        Integer         dig_P2          (MemberValTypVariableOffset=28)
        Integer         dig_P3          (MemberValTypVariableOffset=32)
        Integer         dig_P4          (MemberValTypVariableOffset=36)
        Integer         dig_P5          (MemberValTypVariableOffset=40)
        Integer         dig_P6          (MemberValTypVariableOffset=44)
        Integer         dig_P7          (MemberValTypVariableOffset=48)
        Integer         dig_P8          (MemberValTypVariableOffset=52)
        Integer         dig_P9          (MemberValTypVariableOffset=56)
        Integer         dig_H1          (MemberValTypVariableOffset=60)
        Integer         dig_H2          (MemberValTypVariableOffset=64)
        Integer         dig_H3          (MemberValTypVariableOffset=68)
        Integer         dig_H4          (MemberValTypVariableOffset=72)
        Integer         dig_H5          (MemberValTypVariableOffset=76)
        Integer         dig_H6          (MemberValTypVariableOffset=80)
        Integer         temperature_raw (MemberValTypVariableOffset=84)
        Integer         pressure_raw    (MemberValTypVariableOffset=88)
        Integer         humidity_raw    (MemberValTypVariableOffset=92)
        Integer         sample_time     (MemberValTypVariableOffset=96)
        Boolean         normal_mode     (MemberValTypVariableOffset=4)
        Byte            sample_filter_ra(MemberValTypVariableOffset=5)
        Byte            hum_oversample  (MemberValTypVariableOffset=6)
        Byte            temp_press_overs(MemberValTypVariableOffset=7)
        Integer         t_fine          (MemberValTypVariableOffset=100)
        I2c             BME280_I2C      (MemberRefTypVariableOffset=0)
        Boolean         online          (MemberValTypVariableOffset=8)
        Block Sub New (Line 146:170)
            Byte            chipid          (LocalValTypVariableOffset=0)
            Block If Then  (Line 153:169)
            End Block
        End Block
        Block Function getChipID (Line 172:175)
        End Block
        Block Function getVersion (Line 177:179)
        End Block
        Block Function getStatus (Line 181:183)
        End Block
        Block Function measuring (Line 185:187)
        End Block
        Block Function updating (Line 189:191)
        End Block
        Block Sub Reset (Line 193:196)
        End Block
        Block Function getSampleValueAsByte (Line 198:216)
            Byte            Value           (LocalValTypVariableOffset=1)
            Byte            sample          (LocalValTypVariableOffset=0)
        End Block
        Block Function getSampleByteAsValue (Line 218:236)
            Byte            value           (LocalValTypVariableOffset=0)
        End Block
        Block Sub setHumiditysampling (Line 238:254)
            Byte            set_hum_oversamp(LocalValTypVariableOffset=0)
            Block If Then  (Line 247:249)
            End Block
        End Block
        Block Sub setHumiditysamplingValue (Line 256:260)
            Byte            Value           (LocalValTypVariableOffset=1)
            Byte            set_hum_oversamp(LocalValTypVariableOffset=0)
        End Block
        Block Function getHumiditysamplingValue (Line 262:265)
        End Block
        Block Sub setTemperaturesampling (Line 267:282)
            Byte            set_temp_oversam(LocalValTypVariableOffset=0)
            Block If Then  (Line 276:278)
            End Block
        End Block
        Block Sub setTemperaturesamplingValue (Line 284:288)
            Byte            Value           (LocalValTypVariableOffset=1)
            Byte            set_temp_oversam(LocalValTypVariableOffset=0)
        End Block
        Block Function getTemperaturesamplingValue (Line 290:293)
        End Block
        Block Sub setPressuresampling (Line 295:310)
            Byte            set_press_oversa(LocalValTypVariableOffset=0)
            Block If Then  (Line 304:306)
            End Block
        End Block
        Block Sub setPressuresamplingValue (Line 312:316)
            Byte            Value           (LocalValTypVariableOffset=1)
            Byte            set_press_oversa(LocalValTypVariableOffset=0)
        End Block
        Block Function getPressuresamplingValue (Line 318:321)
        End Block
        Block Sub setMode (Line 323:351)
            Byte            set_mode        (LocalValTypVariableOffset=0)
            Block If Then  (Line 342:345)
            End Block
            Block Else (Line 345:347)
            End Block
        End Block
        Block Function getMode (Line 353:356)
        End Block
        Block Sub setSamplerate (Line 358:375)
            Byte            set_sample_rate (LocalValTypVariableOffset=0)
            Block If Then  (Line 369:371)
            End Block
        End Block
        Block Sub setSamplerateValue (Line 377:400)
            Byte            value           (LocalValTypVariableOffset=1)
            Float           set_sample_rate (LocalValTypVariableOffset=0)
            Block If Then  (Line 380:382)
            End Block
            Block ElseIf (Line 382:384)
            End Block
            Block ElseIf (Line 384:386)
            End Block
            Block ElseIf (Line 386:388)
            End Block
            Block ElseIf (Line 388:390)
            End Block
            Block ElseIf (Line 390:392)
            End Block
            Block ElseIf (Line 392:394)
            End Block
            Block ElseIf (Line 394:396)
            End Block
            Block Else (Line 396:398)
            End Block
        End Block
        Block Function getSampleRateValue (Line 402:425)
            Byte            sample_rate     (LocalValTypVariableOffset=0)
        End Block
        Block Sub setIIRfilter (Line 427:441)
            Byte            set_IIR_filter  (LocalValTypVariableOffset=0)
            Block If Then  (Line 435:437)
            End Block
        End Block
        Block Sub setIIRfilterValue (Line 443:461)
            Byte            Value           (LocalValTypVariableOffset=1)
            Integer         set_IIRFilter_ov(LocalValTypVariableOffset=0)
        End Block
        Block Function getIIRFilterValue (Line 463:480)
            Byte            IIRFilter       (LocalValTypVariableOffset=0)
        End Block
        Block Function getConversionTime (Line 482:517)
            Block If Then  (Line 486:488)
            End Block
            Block Else (Line 488:515)
                Integer         IIRFilter       (LocalValTypVariableOffset=0)
                Float           Temp_Sample_Time(LocalValTypVariableOffset=1)
                Float           Press_Sample_Tim(LocalValTypVariableOffset=2)
                Float           Humid_Sample_Tim(LocalValTypVariableOffset=3)
                Integer         conversion_time (LocalValTypVariableOffset=4)
                Block If Then  (Line 493:495)
                End Block
                Block If Then  (Line 497:499)
                End Block
            End Block
        End Block
        Block Sub TakeReading (Line 519:525)
            Integer         conversion_time (LocalValTypVariableOffset=0)
            Block If Then  (Line 521:524)
            End Block
        End Block
        Block Function readTemperature (Line 529:543)
            Block If Then  (Line 532:534)
            End Block
            Block If Then  (Line 536:538)
            End Block
        End Block
        Block Function readTemperatureF (Line 545:551)
            Block If Then  (Line 547:549)
            End Block
        End Block
        Block Function BME280_compensate_T_double (Line 553:566)
            Float           var1            (LocalValTypVariableOffset=1)
            Float           var2            (LocalValTypVariableOffset=2)
            Float           T               (LocalValTypVariableOffset=3)
            Integer         adc_T           (LocalValTypVariableOffset=0)
        End Block
        Block Function readPressure (Line 568:577)
            Block If Then  (Line 570:572)
            End Block
        End Block
        Block Function BME280_compensate_P_double (Line 579:599)
            Float           var1            (LocalValTypVariableOffset=1)
            Float           var2            (LocalValTypVariableOffset=2)
            Float           p               (LocalValTypVariableOffset=3)
            Integer         adc_P           (LocalValTypVariableOffset=0)
            Block If Then  (Line 590:592)
            End Block
        End Block
        Block Function readHumidity (Line 601:610)
            Block If Then  (Line 603:605)
            End Block
        End Block
        Block Function bme280_compensate_H_double (Line 613:626)
            Float           var_H           (LocalValTypVariableOffset=1)
            Integer         adc_H           (LocalValTypVariableOffset=0)
            Block If Then  (Line 620:622)
            End Block
            Block ElseIf (Line 622:624)
            End Block
        End Block
        Block Function readAltitude (Line 636:649)
            Float           atmospheric     (LocalValTypVariableOffset=1)
            Float           factor          (LocalValTypVariableOffset=2)
            Float           res             (LocalValTypVariableOffset=3)
            Float           seaLevel        (LocalValTypVariableOffset=0)
        End Block
        Block Function readAltitude (Line 651:653)
        End Block
        Block Function readAltitudeFeet (Line 656:658)
            Float           seaLevel        (LocalValTypVariableOffset=0)
        End Block
        Block Function readAltitudeFeet (Line 660:662)
        End Block
        Block Function readAproxDewPoint (Line 678:682)
            Float           Temperature     (LocalValTypVariableOffset=0)
            Float           Humidity        (LocalValTypVariableOffset=1)
        End Block
        Block Function calculateDewPoint (Line 691:701)
            Float           g               (LocalValTypVariableOffset=4)
            Float           Dewpoint        (LocalValTypVariableOffset=5)
            Float           b               (LocalValTypVariableOffset=0)
            Float           c               (LocalValTypVariableOffset=1)
            Float           T               (LocalValTypVariableOffset=2)
            Float           H               (LocalValTypVariableOffset=3)
        End Block
        Block Function readDewPoint (Line 703:706)
        End Block
        Block Function readAlternateDewPoint (Line 708:711)
        End Block
        Block Sub SetRegister (Line 720:724)
            ListOfByte      data            (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
        End Block
        Block Sub write8 (Line 726:731)
            ListOfByte      data            (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
            Byte            value           (LocalValTypVariableOffset=1)
        End Block
        Block Function read2X8 (Line 738:742)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
        End Block
        Block Function read8 (Line 749:757)
            Short           result          (LocalValTypVariableOffset=1)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
            Block If Then  (Line 753:755)
            End Block
        End Block
        Block Function readS8 (Line 764:767)
            Byte            result          (LocalValTypVariableOffset=1)
            Byte            reg             (LocalValTypVariableOffset=0)
        End Block
        Block Function read16 (Line 774:776)
            Byte            reg             (LocalValTypVariableOffset=0)
        End Block
        Block Function read16_LE (Line 778:780)
            Byte            reg             (LocalValTypVariableOffset=0)
        End Block
        Block Function readS16 (Line 787:799)
            Short           result          (LocalValTypVariableOffset=1)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
            Block If Then  (Line 790:793)
            End Block
            Block If Then  (Line 795:797)
            End Block
        End Block
        Block Function readS16_LE (Line 801:813)
            Short           result          (LocalValTypVariableOffset=1)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
            Block If Then  (Line 804:807)
            End Block
            Block If Then  (Line 809:811)
            End Block
        End Block
        Block Function read24 (Line 821:829)
            Integer         result          (LocalValTypVariableOffset=1)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
            Block If Then  (Line 825:827)
            End Block
        End Block
        Block Sub readall (Line 840:848)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Block If Then  (Line 843:847)
            End Block
        End Block
        Block Sub readCoefficients (Line 855:877)
        End Block
        Total Size of Member data including base classes = 104.
    End Block




****** GLOBAL_VARIABLES **********************************************
BME280_1, Class=BME280, Offset=0, SourceClass=Main
mcUIDString, Class=String, Offset=4, SourceClass=MQTT
Number, Class=Integer, Offset=8, IsReadoly, SourceClass=Intrinsic
Data, Class=Integer, Offset=12, IsReadoly, SourceClass=Intrinsic
ProgramCounter, Class=Integer, Offset=16, IsReadoly, SourceClass=Intrinsic
SeaLevelPressure, Class=Float, Offset=24, SourceClass=Main
data, Class=dataType, Offset=28, SourceClass=Main
Publish_data, Class=Boolean, Offset=20, SourceClass=Main


****** LITERALS ***********************************************
     1 String "True"
     4 String "False"
     7 String "\r\n"
     9 String "MCThings/SeaLevelPressure"
    17 String "MCThings/Publish"
    23 String "1.01"
    26 String "Status"
    29 String "BME280 Online"
    34 String "SeaLevelPressure"
    40 String " :Float Conversion failed"
    48 String "Publish"
    51 String " :Boolean Conversion failed"
    59 String "Warn"
    62 String ":"
    64 String " Received but not Processed"
    72 String "Uptime"
    75 String "BatteryVoltage"
    80 String "Temperature"
    84 String "Temperature2"
    89 String "Humidity"
    93 String "Dewpoint"
    97 String "Pressure"
   101 String "Altitude"
   105 String "X8"
   107 String "MCThings/"
   111 String "/"
