****** BUILD Of 'BME280Test' (2016-09-01 4:44:57 PM)


****** EVENT HANDLERS
                                                                                                                                                                               0:    0x0072   Address Priority 0 Event.   Code for 'Boot' starts at 114.
                                                                                                                                                                               1:    0x0099   Address Priority 1 Event.   Code for 'NewGateway' starts at 153.
                                                                                                                                                                               2:    0x00A3   Address Priority 2 Event.   Code for 'SubscriptionDelivery' starts at 163.
                                                                                                                                                                               3:    0x00F6   Address Priority 3 Event.   Code for 'Publish' starts at 246.
                                                                                                                                                                               4:    0x0000   Address Priority 4 Event.   No Event defined.
                                                                                                                                                                               5:    0x0000   Address Priority 5 Event.   No Event defined.
                                                                                                                                                                               6:    0x0000   Address Priority 6 Event.   No Event defined.
                                                                                                                                                                               7:    0x0000   Address Priority 7 Event.   No Event defined.
                                                                                                                                                                               8:    0x0000   Address Priority 8 Event.   No Event defined.
                                                                                                                                                                               9:    0x0000   Address Priority 9 Event.   No Event defined.
                                                                                                                                                                               10:   0x0000   Address Priority 10 Event.  No Event defined.
                                                                                                                                                                               11:   0x0000   Address Priority 11 Event.  No Event defined.
                                                                                                                                                                               12:   0x0000   Address Priority 12 Event.  No Event defined.
                                                                                                                                                                               13:   0x0000   Address Priority 13 Event.  No Event defined.
                                                                                                                                                                               14:   0x0000   Address Priority 14 Event.  No Event defined.
                                                                                                                                                                               15:   0x0000   Address Priority 15 Event.  No Event defined.
                                                                                                                                                                               16:   0x0000   Address Priority 16 Event.  No Event defined.
                                                                                                                                                                               17:   0x0000   Address Priority 17 Event.  No Event defined.
                                                                                                                                                                               18:   0x0000   Address Priority 18 Event.  No Event defined.
                                                                                                                                                                               19:   0x0000   Address Priority 19 Event.  No Event defined.
                                                                                                                                                                               20:   0x0000   Address Priority 20 Event.  No Event defined.
                                                                                                                                                                               21:   0x0000   Address Priority 21 Event.  No Event defined.
                                                                                                                                                                               22:   0x0000   Address Priority 22 Event.  No Event defined.
                                                                                                                                                                               23:   0x0000   Address Priority 23 Event.  No Event defined.
                                                                                                                                                                               24:   0x0000   Address Priority 24 Event.  No Event defined.
                                                                                                                                                                               25:   0x0000   Address Priority 25 Event.  No Event defined.
                                                                                                                                                                               26:   0x0000   Address Priority 26 Event.  No Event defined.
                                                                                                                                                                               27:   0x0000   Address Priority 27 Event.  No Event defined.
                                                                                                                                                                               28:   0x0000   Address Priority 28 Event.  No Event defined.
                                                                                                                                                                               29:   0x0000   Address Priority 29 Event.  No Event defined.
                                                                                                                                                                               30:   0x0000   Address Priority 30 Event.  No Event defined.
                                                                                                                                                                               31:   0x0000   Address Priority 31 Event.  No Event defined.

****** RUNTIME INFORMATION
                                                                                                                                                                               32:   0x08F3   ScriptSizeLS (Size of the code in 2-byte instructions = 2291)
                                                                                                                                                                               33:   0x0000   CodeSizeMS (Size of the code in 2-byte instructions = 2291)
                                                                                                                                                                               34:   0x0024   CodeSizeInBlocks = 36
                                                                                                                                                                               35:   0x0004   StringSizeInBlocks = 4
                                                                                                                                                                               36:   0x0000   Reserved
                                                                                                                                                                               37:   0x0000   Reserved
                                                                                                                                                                               38:   0x1789   Compile Date and Time 2016-09-01 16:44:57
                                                                                                                                                                               39:   0x1F5B   Compile Date and Time 2016-09-01 16:44:57
                                                                                                                                                                               40:   0x0000   Reserved
                                                                                                                                                                               41:   0x0000   Reserved
                                                                                                                                                                               42:   0x0000   Reserved
                                                                                                                                                                               43:   0x0000   Reserved
                                                                                                                                                                               44:   0x0000   Reserved
                                                                                                                                                                               45:   0x0000   PinMode Pin0=NotUsed  Pin1=NotUsed
                                                                                                                                                                               46:   0x0000   PinMode Pin2=NotUsed  Pin3=NotUsed
                                                                                                                                                                               47:   0x0000   PinMode Pin4=NotUsed  Pin5=NotUsed
                                                                                                                                                                               48:   0x0000   PinMode Pin6=NotUsed  Pin7=NotUsed
                                                                                                                                                                               49:   0x0000   PinMode Pin8=NotUsed   Pin9=NotUsed
                                                                                                                                                                               50:   0x0000   PinMode Pin10=NotUsed   Pin11=NotUsed
                                                                                                                                                                               51:   0x0000   PinMode Pin12=NotUsed   Pin13=NotUsed
                                                                                                                                                                               52:   0x0000   PinMode Pin14=NotUsed   Pin15=NotUsed
                                                                                                                                                                               53:   0x0000   PinMode Pin16=NotUsed   Pin17=NotUsed
                                                                                                                                                                               54:   0x0000   PinMode Pin18=NotUsed   Pin19=NotUsed
                                                                                                                                                                               55:   0x0000   PinMode Pin20=NotUsed   Pin21=NotUsed
                                                                                                                                                                               56:   0x0000   PinMode Pin22=NotUsed   Pin23=NotUsed
                                                                                                                                                                               57:   0x0000   Reserved
                                                                                                                                                                               58:   0x0000   Reserved
                                                                                                                                                                               59:   0x0000   Reserved
                                                                                                                                                                               60:   0x0000   Reserved
                                                                                                                                                                               61:   0x1800   IdleThread EntryPoint ValTypParams=0, RefTypParams=0
                                                                                                                                                                               62:   0x0015   SystemIdle
                                                                                                                                                                               63:   0x5002   BranchBack 62

****** CLASS INFORMATION
                                                                                                                                                                               64:   0x0049   Class Descriptor for class 'Global'. Next Descriptor at 73.
                                                                                                                                                                               65:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                               66:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                               67:   0x0008   Size of RefObject data.(8).
                                                                                                                                                                               68:   0x0020   Size of all data.(32).
                                                                                                                                                                               69:   0x6C47   Part of the class name 'Global'.
                                                                                                                                                                               70:   0x626F   Part of the class name 'Global'.
                                                                                                                                                                               71:   0x6C61   Part of the class name 'Global'.
                                                                                                                                                                               72:   0x0000   Part of the class name 'Global'.
                                                                                                                                                                               73:   0x0051   Class Descriptor for class 'Main'. Next Descriptor at 81.
                                                                                                                                                                               74:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                               75:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                               76:   0x0000   Size of RefObject data.(0).
                                                                                                                                                                               77:   0x0000   Size of all data.(0).
                                                                                                                                                                               78:   0x614D   Part of the class name 'Main'.
                                                                                                                                                                               79:   0x6E69   Part of the class name 'Main'.
                                                                                                                                                                               80:   0x0000   Part of the class name 'Main'.
                                                                                                                                                                               81:   0x005C   Class Descriptor for class 'TempSensor'. Next Descriptor at 92.
                                                                                                                                                                               82:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                               83:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                               84:   0x0000   Size of RefObject data.(0).
                                                                                                                                                                               85:   0x0000   Size of all data.(0).
                                                                                                                                                                               86:   0x6554   Part of the class name 'TempSensor'.
                                                                                                                                                                               87:   0x706D   Part of the class name 'TempSensor'.
                                                                                                                                                                               88:   0x6553   Part of the class name 'TempSensor'.
                                                                                                                                                                               89:   0x736E   Part of the class name 'TempSensor'.
                                                                                                                                                                               90:   0x726F   Part of the class name 'TempSensor'.
                                                                                                                                                                               91:   0x0000   Part of the class name 'TempSensor'.
                                                                                                                                                                               92:   0x0064   Class Descriptor for class 'MQTT'. Next Descriptor at 100.
                                                                                                                                                                               93:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                               94:   0x0000   Offset of RefObject data.(0).
                                                                                                                                                                               95:   0x0000   Size of RefObject data.(0).
                                                                                                                                                                               96:   0x0000   Size of all data.(0).
                                                                                                                                                                               97:   0x514D   Part of the class name 'MQTT'.
                                                                                                                                                                               98:   0x5454   Part of the class name 'MQTT'.
                                                                                                                                                                               99:   0x0000   Part of the class name 'MQTT'.
                                                                                                                                                                               100:  0x006D   Class Descriptor for class 'BME280'. Next Descriptor at 109.
                                                                                                                                                                               101:  0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                                                                                                                               102:  0x0000   Offset of RefObject data.(0).
                                                                                                                                                                               103:  0x0004   Size of RefObject data.(4).
                                                                                                                                                                               104:  0x0068   Size of all data.(104).
                                                                                                                                                                               105:  0x4D42   Part of the class name 'BME280'.
                                                                                                                                                                               106:  0x3245   Part of the class name 'BME280'.
                                                                                                                                                                               107:  0x3038   Part of the class name 'BME280'.
                                                                                                                                                                               108:  0x0000   Part of the class name 'BME280'.
                                                                                                                                                                               109:  0x0000   End Of Class Data.

****** APPLIACTION STATEMENTS
*************************************************************************************************************

000008  Class Main                                                                                                                                                             110:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000009      
000010      Shared SeaLevelPressure As Float
000011      Shared data As dataType
000012      Shared BME280_1 As BME280
000013      Const SLP_Topic As String = "MCThings/SeaLevelPressure"
000014      Const Sub_Topic As String = "MCThings/Publish"
000015      Shared Publish_data As Boolean
000016      
                                                                                                                                                                               112:  0x0001                           EventType=Boot
                                                                                                                                                                               113:  0x0700                           EventCategory=Interrupt
000017      Shared Event Boot()                                                                                                                                                114:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000018          data = dataType.UPTIME                                                                                                                                         115:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               116:  0x000C   PushGlobal              
                                                                                                                                                                               117:  0xD01C   PopFieldI32             data

000019          Publish_data = True                                                                                                                                            118:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               119:  0x000C   PushGlobal              
                                                                                                                                                                               120:  0xC814   PopFieldU8              Publish_data

000020          SeaLevelPressure = 1013.25 //standard Mean Sea Level Pressure                                                                                                  121:  0x0110   PushConstI32            1149063168 (0x447D5000)
                                                                                                                                                                               122:  0x5000                           
                                                                                                                                                                               123:  0x447D                           
                                                                                                                                                                               124:  0x000C   PushGlobal              
                                                                                                                                                                               125:  0xD018   PopFieldI32             SeaLevelPressure

000021          BME280_1 = New BME280                                                                                                                                          126:  0x8064   PushConstU10            100 (0x0064)
                                                                                                                                                                               127:  0x0010   ClassNew                
                                                                                                                                                                               128:  0x1E63   BranchSubr              740
                                                                                                                                                                               129:  0x1E6C   BranchSubr              750
                                                                                                                                                                               130:  0x000C   PushGlobal              
                                                                                                                                                                               131:  0xD400   PopFieldRef             BME280_1

000022          If BME280_1.online Then                                                                                                                                        132:  0x000C   PushGlobal              
                                                                                                                                                                               133:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               134:  0xB808   PushFieldU8             online
                                                                                                                                                                               135:  0x3C08   BranchFalse             144

000023              MQTT.Publish("Status", "BME280 Online")                                                                                                                    136:  0x8419   PushLiteral             25
                                                                                                                                                                               137:  0x841C   PushLiteral             28
                                                                                                                                                                               138:  0x000E   PushNothing             
                                                                                                                                                                               139:  0x1DB0   BranchSubr              572

000024              BME280_1.setMode(BME280.FORCED) //set to read-on-demand mode (this is default anyway)                                                                      140:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               141:  0x000C   PushGlobal              
                                                                                                                                                                               142:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               143:  0x1F8E   BranchSubr              1054

000025          End If
000026          MQTT.Subscribe(SLP_Topic)                                                                                                                                      144:  0x8409   PushLiteral             9
                                                                                                                                                                               145:  0x000E   PushNothing             
                                                                                                                                                                               146:  0x1E4D   BranchSubr              736

000027          MQTT.Subscribe(Sub_Topic)                                                                                                                                      147:  0x8411   PushLiteral             17
                                                                                                                                                                               148:  0x000E   PushNothing             
                                                                                                                                                                               149:  0x1E4A   BranchSubr              736

000028      End Event                                                                                                                                                          150:  0x0091   Return                  

000029      
                                                                                                                                                                               151:  0x0005                           EventType=NewGateway
                                                                                                                                                                               152:  0x0700                           EventCategory=Interrupt
000030      Shared Event NewGateway()                                                                                                                                          153:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000031          MQTT.Subscribe(SLP_Topic)                                                                                                                                      154:  0x8409   PushLiteral             9
                                                                                                                                                                               155:  0x000E   PushNothing             
                                                                                                                                                                               156:  0x1E43   BranchSubr              736

000032          MQTT.Subscribe(Sub_Topic)                                                                                                                                      157:  0x8411   PushLiteral             17
                                                                                                                                                                               158:  0x000E   PushNothing             
                                                                                                                                                                               159:  0x1E40   BranchSubr              736

000033      End Event                                                                                                                                                          160:  0x0091   Return                  

000034      
                                                                                                                                                                               161:  0x0003                           EventType=SubscriptionDelivery
                                                                                                                                                                               162:  0x0700                           EventCategory=Interrupt
000035      Shared Event SubscriptionDelivery()                                                                                                                                163:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               164:  0xE002   AllocateStackSpace      ValTypeSize=0, RefTypeSize=2

000036          Dim msg As Message = Lplan.GetDelivery()                                                                                                                       165:  0x00FE   LplanGetDelivery        
                                                                                                                                                                               166:  0x9400   PopLocalRef             msg

000037          Dim tmp_str As String = msg.PayLoad.ToString()                                                                                                                 167:  0x8C00   PushLocalRef            msg
                                                                                                                                                                               168:  0xC404   PushFieldRef            Offset=4
                                                                                                                                                                               169:  0x006B   StrFromListOfByte       
                                                                                                                                                                               170:  0x9401   PopLocalRef             tmp_str

000038          Select msg.Topic                                                                                                                                               171:  0x8C00   PushLocalRef            msg
                                                                                                                                                                               172:  0xC400   PushFieldRef            Offset=0
                                                                                                                                                                               173:  0x0122   CaseComputed            
                                                                                                                                                                               174:  0x0009                           CaseCommonClass=String
                                                                                                                                                                               175:  0x0002                           NumberOfCaseEntries=2
                                                                                                                                                                               176:  0x0038                           CaseElseBranch=233
                                                                                                                                                                               177:  0x0009                           LSH CaseValue=9
                                                                                                                                                                               178:  0x0000                           MSH CaseValue=9
                                                                                                                                                                               179:  0x0006                           CaseBranch=183
                                                                                                                                                                               180:  0x0011                           LSH CaseValue=17
                                                                                                                                                                               181:  0x0000                           MSH CaseValue=17
                                                                                                                                                                               182:  0x001E                           CaseBranch=207

000039              Case SLP_Topic                                                                                                                                             183:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000040                  Dim tmp As Float = 0
000041                  If Float.TryConvert(tmp_str, tmp) Then                                                                                                                 184:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                               185:  0x8800   PushLocalI32            tmp
                                                                                                                                                                               186:  0x008E   TryCvtStrToFlt          
                                                                                                                                                                               187:  0x9000   PopLocalI32             tmp
                                                                                                                                                                               188:  0x3C0A   BranchFalse             199

000042                      SeaLevelPressure = tmp                                                                                                                             189:  0x8800   PushLocalI32            tmp
                                                                                                                                                                               190:  0x000C   PushGlobal              
                                                                                                                                                                               191:  0xD018   PopFieldI32             SeaLevelPressure

000043                      MQTT.Publish("SeaLevelPressure", SeaLevelPressure)                                                                                                 192:  0x8421   PushLiteral             33
                                                                                                                                                                               193:  0x000C   PushGlobal              
                                                                                                                                                                               194:  0xC018   PushFieldI32            SeaLevelPressure
                                                                                                                                                                               195:  0x1406   Box                     BoxFloat
                                                                                                                                                                               196:  0x000E   PushNothing             
                                                                                                                                                                               197:  0x1D96   BranchSubr              604

                                                                                                                                                                               198:  0x4006   Branch                  205
000044                  Else                                                                                                                                                   

000045                      MQTT.Publish("SeaLevelPressure", tmp_str + " :Float Conversion failed")                                                                            199:  0x8421   PushLiteral             33
                                                                                                                                                                               200:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                               201:  0x8427   PushLiteral             39
                                                                                                                                                                               202:  0x0056   StrAdd                  
                                                                                                                                                                               203:  0x000E   PushNothing             
                                                                                                                                                                               204:  0x1D6F   BranchSubr              572

000046                  End If   
                                                                                                                                                                               205:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               206:  0x4024   Branch                  243
000047              Case Sub_Topic                                                                                                                                             207:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000048                  Dim tmp As Boolean = True                                                                                                                              208:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               209:  0x9000   PopLocalI32             tmp

000049                  If Boolean.TryConvert(tmp_str, tmp) Then                                                                                                               210:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                               211:  0x8800   PushLocalI32            tmp
                                                                                                                                                                               212:  0x008A   TryCvtStrToBoo          
                                                                                                                                                                               213:  0x9000   PopLocalI32             tmp
                                                                                                                                                                               214:  0x3C0A   BranchFalse             225

000050                      Publish_data = tmp                                                                                                                                 215:  0x8800   PushLocalI32            tmp
                                                                                                                                                                               216:  0x000C   PushGlobal              
                                                                                                                                                                               217:  0xC814   PopFieldU8              Publish_data

000051                      MQTT.Publish("Publish", Publish_data)                                                                                                              218:  0x842F   PushLiteral             47
                                                                                                                                                                               219:  0x000C   PushGlobal              
                                                                                                                                                                               220:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               221:  0x1401   Box                     BoxBoolean
                                                                                                                                                                               222:  0x000E   PushNothing             
                                                                                                                                                                               223:  0x1D7C   BranchSubr              604

                                                                                                                                                                               224:  0x4006   Branch                  231
000052                  Else                                                                                                                                                   

000053                      MQTT.Publish("Publish", tmp_str + " :Boolean Conversion failed")                                                                                   225:  0x842F   PushLiteral             47
                                                                                                                                                                               226:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                               227:  0x8432   PushLiteral             50
                                                                                                                                                                               228:  0x0056   StrAdd                  
                                                                                                                                                                               229:  0x000E   PushNothing             
                                                                                                                                                                               230:  0x1D55   BranchSubr              572

000054                  End If
                                                                                                                                                                               231:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               232:  0x400A   Branch                  243
000055              Case Else                                                                                                                                                  

000056                  MQTT.Publish("Warn", msg.Topic+ ":" + tmp_str " Received but not Processed")                                                                           233:  0x843A   PushLiteral             58
                                                                                                                                                                               234:  0x8C00   PushLocalRef            msg
                                                                                                                                                                               235:  0xC400   PushFieldRef            Offset=0
                                                                                                                                                                               236:  0x843D   PushLiteral             61
                                                                                                                                                                               237:  0x0056   StrAdd                  
                                                                                                                                                                               238:  0x8C01   PushLocalRef            tmp_str
                                                                                                                                                                               239:  0x843F   PushLiteral             63
                                                                                                                                                                               240:  0x0056   StrAdd                  
                                                                                                                                                                               241:  0x000E   PushNothing             
                                                                                                                                                                               242:  0x1D49   BranchSubr              572

000057          End Select
000058      End Event                                                                                                                                                          243:  0x0091   Return                  

000059      
                                                                                                                                                                               244:  0x000A                           TimeValue=10
                                                                                                                                                                               245:  0x0300                           EventCategory=TimeInSeconds
000060      Shared Event Publish() RaiseEvent Every 10 Seconds                                                                                                                 246:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000061          LedGreen = True                                                                                                                                                247:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               248:  0x080A   PopAndSetDigitalPin     Pin10

000062          Select data                                                                                                                                                    249:  0x000C   PushGlobal              
                                                                                                                                                                               250:  0xC01C   PushFieldI32            data
                                                                                                                                                                               251:  0x0122   CaseComputed            
                                                                                                                                                                               252:  0x0002                           CaseCommonClass=Byte
                                                                                                                                                                               253:  0x0009                           NumberOfCaseEntries=9
                                                                                                                                                                               254:  0x00E1                           CaseElseBranch=480
                                                                                                                                                                               255:  0x0002                           CaseValue=2
                                                                                                                                                                               256:  0x0012                           CaseBranch=273
                                                                                                                                                                               257:  0x0003                           CaseValue=3
                                                                                                                                                                               258:  0x0027                           CaseBranch=294
                                                                                                                                                                               259:  0x0004                           CaseValue=4
                                                                                                                                                                               260:  0x003C                           CaseBranch=315
                                                                                                                                                                               261:  0x0005                           CaseValue=5
                                                                                                                                                                               262:  0x005A                           CaseBranch=345
                                                                                                                                                                               263:  0x0006                           CaseValue=6
                                                                                                                                                                               264:  0x0072                           CaseBranch=369
                                                                                                                                                                               265:  0x0007                           CaseValue=7
                                                                                                                                                                               266:  0x008A                           CaseBranch=393
                                                                                                                                                                               267:  0x0008                           CaseValue=8
                                                                                                                                                                               268:  0x00A2                           CaseBranch=417
                                                                                                                                                                               269:  0x0009                           CaseValue=9
                                                                                                                                                                               270:  0x00C3                           CaseBranch=450
                                                                                                                                                                               271:  0x000A                           CaseValue=10
                                                                                                                                                                               272:  0x00DD                           CaseBranch=476

000063              Case dataType.UPTIME                                                                                                                                       273:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000064                  Dim Uptime As Integer = Device.Uptime()                                                                                                                274:  0x00F9   DeviceUptime            
                                                                                                                                                                               275:  0x9000   PopLocalI32             Uptime

000065                  If Publish_data Then                                                                                                                                   276:  0x000C   PushGlobal              
                                                                                                                                                                               277:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               278:  0x3C05   BranchFalse             284

000066                      MQTT.Publish("Uptime", Uptime)                                                                                                                     279:  0x8447   PushLiteral             71
                                                                                                                                                                               280:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                               281:  0x1404   Box                     BoxInteger
                                                                                                                                                                               282:  0x000E   PushNothing             
                                                                                                                                                                               283:  0x1D40   BranchSubr              604

000067                  End If
000068                  MQTT.BeaconPublish(dataType.UPTIME, Uptime)                                                                                                            284:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               285:  0x8800   PushLocalI32            Uptime
                                                                                                                                                                               286:  0x1404   Box                     BoxInteger
                                                                                                                                                                               287:  0x000E   PushNothing             
                                                                                                                                                                               288:  0x1D6C   BranchSubr              653

000069                  data = dataType.BATTVOLTAGE                                                                                                                            289:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               290:  0x000C   PushGlobal              
                                                                                                                                                                               291:  0xD01C   PopFieldI32             data

                                                                                                                                                                               292:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               293:  0x40BD   Branch                  483
000070              Case dataType.BATTVOLTAGE                                                                                                                                  294:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000071                  Dim BattVolt As Integer = Device.BatteryVoltage()                                                                                                      295:  0x00ED   DeviceBatteryVoltage    
                                                                                                                                                                               296:  0x9000   PopLocalI32             BattVolt

000072                  If Publish_data Then                                                                                                                                   297:  0x000C   PushGlobal              
                                                                                                                                                                               298:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               299:  0x3C05   BranchFalse             305

000073                      MQTT.Publish("BatteryVoltage", BattVolt)                                                                                                           300:  0x844A   PushLiteral             74
                                                                                                                                                                               301:  0x8800   PushLocalI32            BattVolt
                                                                                                                                                                               302:  0x1404   Box                     BoxInteger
                                                                                                                                                                               303:  0x000E   PushNothing             
                                                                                                                                                                               304:  0x1D2B   BranchSubr              604

000074                  End If
000075                  MQTT.BeaconPublish(dataType.BATTVOLTAGE, BattVolt)                                                                                                     305:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               306:  0x8800   PushLocalI32            BattVolt
                                                                                                                                                                               307:  0x1404   Box                     BoxInteger
                                                                                                                                                                               308:  0x000E   PushNothing             
                                                                                                                                                                               309:  0x1D57   BranchSubr              653

000076                  data = dataType.TEMPERATURE                                                                                                                            310:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               311:  0x000C   PushGlobal              
                                                                                                                                                                               312:  0xD01C   PopFieldI32             data

                                                                                                                                                                               313:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               314:  0x40A8   Branch                  483
000077              Case dataType.TEMPERATURE                                                                                                                                  315:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000078                  Dim TempC As Float = TempSensor.GetTemp                                                                                                                316:  0x000E   PushNothing             
                                                                                                                                                                               317:  0x1CAA   BranchSubr              488
                                                                                                                                                                               318:  0x9000   PopLocalI32             TempC

000079                  If Publish_data Then                                                                                                                                   319:  0x000C   PushGlobal              
                                                                                                                                                                               320:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               321:  0x3C05   BranchFalse             327

000080                      MQTT.Publish("Temperature", TempC)                                                                                                                 322:  0x844F   PushLiteral             79
                                                                                                                                                                               323:  0x8800   PushLocalI32            TempC
                                                                                                                                                                               324:  0x1406   Box                     BoxFloat
                                                                                                                                                                               325:  0x000E   PushNothing             
                                                                                                                                                                               326:  0x1D15   BranchSubr              604

000081                  End If
000082                  MQTT.BeaconPublish(dataType.TEMPERATURE, TempC)                                                                                                        327:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               328:  0x8800   PushLocalI32            TempC
                                                                                                                                                                               329:  0x1406   Box                     BoxFloat
                                                                                                                                                                               330:  0x000E   PushNothing             
                                                                                                                                                                               331:  0x1D41   BranchSubr              653

000083                  If BME280_1.online Then                                                                                                                                332:  0x000C   PushGlobal              
                                                                                                                                                                               333:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               334:  0xB808   PushFieldU8             online
                                                                                                                                                                               335:  0x3C04   BranchFalse             340

000084                      data = dataType.TEMPERATURE2                                                                                                                       336:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               337:  0x000C   PushGlobal              
                                                                                                                                                                               338:  0xD01C   PopFieldI32             data

                                                                                                                                                                               339:  0x4003   Branch                  343
000085                  Else                                                                                                                                                   

000086                      data = dataType.UPTIME                                                                                                                             340:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               341:  0x000C   PushGlobal              
                                                                                                                                                                               342:  0xD01C   PopFieldI32             data

000087                  End If
                                                                                                                                                                               343:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               344:  0x408A   Branch                  483
000088              Case dataType.TEMPERATURE2                                                                                                                                 345:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000089                  //external temperature
000090                  Dim TempC As Float = BME280_1.readTemperature                                                                                                          346:  0x000C   PushGlobal              
                                                                                                                                                                               347:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               348:  0x5800   JumpSubr                1477
                                                                                                                                                                               349:  0x05C5                           
                                                                                                                                                                               350:  0x9000   PopLocalI32             TempC

000091                  If Publish_data Then                                                                                                                                   351:  0x000C   PushGlobal              
                                                                                                                                                                               352:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               353:  0x3C05   BranchFalse             359

000092                      MQTT.Publish("Temperature2", TempC)                                                                                                                354:  0x8453   PushLiteral             83
                                                                                                                                                                               355:  0x8800   PushLocalI32            TempC
                                                                                                                                                                               356:  0x1406   Box                     BoxFloat
                                                                                                                                                                               357:  0x000E   PushNothing             
                                                                                                                                                                               358:  0x1CF5   BranchSubr              604

000093                  End If
000094                  MQTT.BeaconPublish(dataType.TEMPERATURE2, TempC)                                                                                                       359:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               360:  0x8800   PushLocalI32            TempC
                                                                                                                                                                               361:  0x1406   Box                     BoxFloat
                                                                                                                                                                               362:  0x000E   PushNothing             
                                                                                                                                                                               363:  0x1D21   BranchSubr              653

000095                  data = dataType.HUMIDITY                                                                                                                               364:  0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               365:  0x000C   PushGlobal              
                                                                                                                                                                               366:  0xD01C   PopFieldI32             data

                                                                                                                                                                               367:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               368:  0x4072   Branch                  483
000096              Case dataType.HUMIDITY                                                                                                                                     369:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000097                  //external humidity
000098                  Dim Humidity As Float = BME280_1.readHumidity                                                                                                          370:  0x000C   PushGlobal              
                                                                                                                                                                               371:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               372:  0x5800   JumpSubr                1724
                                                                                                                                                                               373:  0x06BC                           
                                                                                                                                                                               374:  0x9000   PopLocalI32             Humidity

000099                  If Publish_data Then                                                                                                                                   375:  0x000C   PushGlobal              
                                                                                                                                                                               376:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               377:  0x3C05   BranchFalse             383

000100                      MQTT.Publish("Humidity", Humidity)                                                                                                                 378:  0x8458   PushLiteral             88
                                                                                                                                                                               379:  0x8800   PushLocalI32            Humidity
                                                                                                                                                                               380:  0x1406   Box                     BoxFloat
                                                                                                                                                                               381:  0x000E   PushNothing             
                                                                                                                                                                               382:  0x1CDD   BranchSubr              604

000101                  End If
000102                  MQTT.BeaconPublish(dataType.HUMIDITY, Humidity)                                                                                                        383:  0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               384:  0x8800   PushLocalI32            Humidity
                                                                                                                                                                               385:  0x1406   Box                     BoxFloat
                                                                                                                                                                               386:  0x000E   PushNothing             
                                                                                                                                                                               387:  0x1D09   BranchSubr              653

000103                  data = dataType.DEWPOINT                                                                                                                               388:  0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               389:  0x000C   PushGlobal              
                                                                                                                                                                               390:  0xD01C   PopFieldI32             data

                                                                                                                                                                               391:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               392:  0x405A   Branch                  483
000104              Case dataType.DEWPOINT                                                                                                                                     393:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000105                  //external dewpoint
000106                  Dim Dewpoint As Float = BME280_1.readDewPoint                                                                                                          394:  0x000C   PushGlobal              
                                                                                                                                                                               395:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               396:  0x5800   JumpSubr                1916
                                                                                                                                                                               397:  0x077C                           
                                                                                                                                                                               398:  0x9000   PopLocalI32             Dewpoint

000107                  If Publish_data Then                                                                                                                                   399:  0x000C   PushGlobal              
                                                                                                                                                                               400:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               401:  0x3C05   BranchFalse             407

000108                      MQTT.Publish("Dewpoint", Dewpoint)                                                                                                                 402:  0x845C   PushLiteral             92
                                                                                                                                                                               403:  0x8800   PushLocalI32            Dewpoint
                                                                                                                                                                               404:  0x1406   Box                     BoxFloat
                                                                                                                                                                               405:  0x000E   PushNothing             
                                                                                                                                                                               406:  0x1CC5   BranchSubr              604

000109                  End If
000110                  MQTT.BeaconPublish(dataType.DEWPOINT, Dewpoint)                                                                                                        407:  0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               408:  0x8800   PushLocalI32            Dewpoint
                                                                                                                                                                               409:  0x1406   Box                     BoxFloat
                                                                                                                                                                               410:  0x000E   PushNothing             
                                                                                                                                                                               411:  0x1CF1   BranchSubr              653

000111                  data = dataType.PRESSURE                                                                                                                               412:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               413:  0x000C   PushGlobal              
                                                                                                                                                                               414:  0xD01C   PopFieldI32             data

                                                                                                                                                                               415:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               416:  0x4042   Branch                  483
000112              Case dataType.PRESSURE                                                                                                                                     417:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000113                  //external pressure
000114                  Dim Pressure As Float = BME280_1.readPressure                                                                                                          418:  0x000C   PushGlobal              
                                                                                                                                                                               419:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               420:  0x5800   JumpSubr                1574
                                                                                                                                                                               421:  0x0626                           
                                                                                                                                                                               422:  0x9000   PopLocalI32             Pressure

000115                  If Publish_data Then                                                                                                                                   423:  0x000C   PushGlobal              
                                                                                                                                                                               424:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               425:  0x3C05   BranchFalse             431

000116                      MQTT.Publish("Pressure", Pressure)                                                                                                                 426:  0x8460   PushLiteral             96
                                                                                                                                                                               427:  0x8800   PushLocalI32            Pressure
                                                                                                                                                                               428:  0x1406   Box                     BoxFloat
                                                                                                                                                                               429:  0x000E   PushNothing             
                                                                                                                                                                               430:  0x1CAD   BranchSubr              604

000117                  End If
000118                  MQTT.BeaconPublish(dataType.PRESSURE, Pressure)                                                                                                        431:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               432:  0x8800   PushLocalI32            Pressure
                                                                                                                                                                               433:  0x1406   Box                     BoxFloat
                                                                                                                                                                               434:  0x000E   PushNothing             
                                                                                                                                                                               435:  0x1CD9   BranchSubr              653

000119                  If SeaLevelPressure <> 0 Then                                                                                                                          436:  0x000C   PushGlobal              
                                                                                                                                                                               437:  0xC018   PushFieldI32            SeaLevelPressure
                                                                                                                                                                               438:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               439:  0x003A   FltCmp                  
                                                                                                                                                                               440:  0x2004   BranchEQ                445

000120                      data = dataType.ALTITUDE                                                                                                                           441:  0x8009   PushConstU10            9 (0x0009)
                                                                                                                                                                               442:  0x000C   PushGlobal              
                                                                                                                                                                               443:  0xD01C   PopFieldI32             data

                                                                                                                                                                               444:  0x4003   Branch                  448
000121                  Else                                                                                                                                                   

000122                      data = dataType.UPTIME                                                                                                                             445:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               446:  0x000C   PushGlobal              
                                                                                                                                                                               447:  0xD01C   PopFieldI32             data

000123                  End If
                                                                                                                                                                               448:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               449:  0x4021   Branch                  483
000124              Case dataType.ALTITUDE                                                                                                                                     450:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000125                  //Altitude
000126                  Dim Altitude As Float = BME280_1.readAltitude(SeaLevelPressure)                                                                                        451:  0x000C   PushGlobal              
                                                                                                                                                                               452:  0xC018   PushFieldI32            SeaLevelPressure
                                                                                                                                                                               453:  0x000C   PushGlobal              
                                                                                                                                                                               454:  0xC400   PushFieldRef            BME280_1
                                                                                                                                                                               455:  0x5800   JumpSubr                1819
                                                                                                                                                                               456:  0x071B                           
                                                                                                                                                                               457:  0x9000   PopLocalI32             Altitude

000127                  If Publish_data Then                                                                                                                                   458:  0x000C   PushGlobal              
                                                                                                                                                                               459:  0xB814   PushFieldU8             Publish_data
                                                                                                                                                                               460:  0x3C05   BranchFalse             466

000128                      MQTT.Publish("Altitude", Altitude)                                                                                                                 461:  0x8464   PushLiteral             100
                                                                                                                                                                               462:  0x8800   PushLocalI32            Altitude
                                                                                                                                                                               463:  0x1406   Box                     BoxFloat
                                                                                                                                                                               464:  0x000E   PushNothing             
                                                                                                                                                                               465:  0x1C8A   BranchSubr              604

000129                  End If
000130                  MQTT.BeaconPublish(dataType.ALTITUDE, Altitude)                                                                                                        466:  0x8009   PushConstU10            9 (0x0009)
                                                                                                                                                                               467:  0x8800   PushLocalI32            Altitude
                                                                                                                                                                               468:  0x1406   Box                     BoxFloat
                                                                                                                                                                               469:  0x000E   PushNothing             
                                                                                                                                                                               470:  0x1CB6   BranchSubr              653

000131                  //increment data
000132                  data = dataType.UPTIME                                                                                                                                 471:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               472:  0x000C   PushGlobal              
                                                                                                                                                                               473:  0xD01C   PopFieldI32             data

                                                                                                                                                                               474:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
                                                                                                                                                                               475:  0x4007   Branch                  483
000133              Case dataType.MOTION                                                                                                                                       

000134                  //increment data
000135                  data = dataType.UPTIME                                                                                                                                 476:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               477:  0x000C   PushGlobal              
                                                                                                                                                                               478:  0xD01C   PopFieldI32             data

                                                                                                                                                                               479:  0x4003   Branch                  483
000136              Case Else                                                                                                                                                  

000137                  data = dataType.UPTIME                                                                                                                                 480:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               481:  0x000C   PushGlobal              
                                                                                                                                                                               482:  0xD01C   PopFieldI32             data

000138          End Select
000139          LedGreen = False                                                                                                                                               483:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               484:  0x080A   PopAndSetDigitalPin     Pin10

000140      End Event                                                                                                                                                          485:  0x0091   Return                  

000141  End Class                                                                                                                                                              111:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for Main
    Block Class (Line 8:141)
        Main            Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        Float           SeaLevelPressure(SharedValTypVariableOffset=24)
        dataType        data            (SharedValTypVariableOffset=28)
        BME280          BME280_1        (SharedRefTypVariableOffset=0)
        String          SLP_Topic       (Literal="MCThings/SeaLevelPressure")
        String          Sub_Topic       (Literal="MCThings/Publish")
        Boolean         Publish_data    (SharedValTypVariableOffset=20)
        Block Event Boot (Line 17:28)
            Block If Then  (Line 22:25)
            End Block
        End Block
        Block Event NewGateway (Line 30:33)
        End Block
        Block Event SubscriptionDelivery (Line 35:58)
            Message         msg             (LocalRefTypVariableOffset=0)
            String          tmp_str         (LocalRefTypVariableOffset=1)
        End Block
        Block Event Publish (Line 60:140)
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000001  Class TempSensor                                                                                                                                                       486:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000002      // Function returns the temperature in degree celcius or 
000003      // Float.NaN if something is wrong
000004      Shared Function GetTemp() As Float                                                                                                                                 488:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               489:  0xE022   AllocateStackSpace      ValTypeSize=1, RefTypeSize=2

000005          // Define the properties of the I2C peripheral and device address
000006          Dim sensor As I2c
000007          sensor = I2c.Create(250000, Pin.SCL, Pin.SDA, 0x48)                                                                                                            490:  0x0110   PushConstI32            250000 (0x0003D090)
                                                                                                                                                                               491:  0xD090                           
                                                                                                                                                                               492:  0x0003                           
                                                                                                                                                                               493:  0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                               494:  0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                               495:  0x8048   PushConstU10            72 (0x0048)
                                                                                                                                                                               496:  0x803B   PushConstU10            59 (0x003B)
                                                                                                                                                                               497:  0x0010   ClassNew                
                                                                                                                                                                               498:  0x9400   PopLocalRef             sensor

000008          
000009          // Power up the sensor and give it some time to settle
000010          Device.EnableTempSensor()                                                                                                                                      499:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               500:  0x00F0   DeviceEnableTemp        

000011          Thread.Sleep(40000) // See page 13 of the datasheet                                                                                                            501:  0x0110   PushConstI32            40000 (0x00009C40)
                                                                                                                                                                               502:  0x9C40                           
                                                                                                                                                                               503:  0x0000                           
                                                                                                                                                                               504:  0x00D5   ThreadSleep             
                                                                                                                                                                               505:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000012          
000013          // Read the sensor (only 2 bytes to read
000014          Dim res As ListOfByte = sensor.Read(2)                                                                                                                         506:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               507:  0x8C00   PushLocalRef            sensor
                                                                                                                                                                               508:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               509:  0x00E0   I2cDeviceRead           
                                                                                                                                                                               510:  0x9401   PopLocalRef             res

000015          
000016          // See Tmp102 documentation how to interpret the data (page 8)
000017          Dim temp As Float = Float.NaN                                                                                                                                  511:  0x0110   PushConstI32            -4194304 (0xFFC00000)
                                                                                                                                                                               512:  0x0000                           
                                                                                                                                                                               513:  0xFFC0                           
                                                                                                                                                                               514:  0x9000   PopLocalI32             temp

000018          If res <> Nothing Then                                                                                                                                         515:  0x8C01   PushLocalRef            res
                                                                                                                                                                               516:  0x000E   PushNothing             
                                                                                                                                                                               517:  0x000B   RefCmpNE                
                                                                                                                                                                               518:  0x3C16   BranchFalse             541
                                                                                                                                                                               519:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000019              // Shift the partial part to the right nibble
000020              Dim part As Float = res(1) >> 4                                                                                                                            520:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               521:  0x8C01   PushLocalRef            res
                                                                                                                                                                               522:  0x00B4   ListItemGet             
                                                                                                                                                                               523:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               524:  0x002F   IntShr                  
                                                                                                                                                                               525:  0x007E   CvtIntToFlt             
                                                                                                                                                                               526:  0x9001   PopLocalI32             part

000021              // Temperature partial is 1/16*n where n is between 0 and 15            
000022              part = part / 16                                                                                                                                           527:  0x8801   PushLocalI32            part
                                                                                                                                                                               528:  0xEA10   PushConstFlt            16.0
                                                                                                                                                                               529:  0x003B   FltDiv                  
                                                                                                                                                                               530:  0x9001   PopLocalI32             part

000023              // Sign extend the byte to an integer
000024              temp = res(0).SignExtend() + part                                                                                                                          531:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               532:  0x8C01   PushLocalRef            res
                                                                                                                                                                               533:  0x00B4   ListItemGet             
                                                                                                                                                                               534:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               535:  0x0005   SignExtend              
                                                                                                                                                                               536:  0x8801   PushLocalI32            part
                                                                                                                                                                               537:  0x0078   CvtIntToFlt1            
                                                                                                                                                                               538:  0x0039   FltAdd                  
                                                                                                                                                                               539:  0x9000   PopLocalI32             temp

                                                                                                                                                                               540:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
000025          End If                                                                                                                                                         

000026          
000027          // power off
000028          Device.DisableTempSensor()                                                                                                                                     541:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               542:  0x00F0   DeviceEnableTemp        

000029          Return temp                                                                                                                                                    543:  0x8800   PushLocalI32            temp
                                                                                                                                                                               544:  0x0092   ReturnValType           

000030      End Function                                                                                                                                                       545:  0x0093   Return0                 

000031      
000032      Shared Function GetDieTemp() As Float                                                                                                                              546:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000033          // Just get the temperature and return
000034          Return Device.TempDie                                                                                                                                          547:  0x00F7   DeviceTempDie           
                                                                                                                                                                               548:  0x0092   ReturnValType           

000035      End Function                                                                                                                                                       549:  0x0093   Return0                 

000036      
000037      Shared Function ToFarenheit(celcius As Float) As Float                                                                                                             550:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000038          Return (celcius * 9) / 5 + 32                                                                                                                                  551:  0x8800   PushLocalI32            celcius
                                                                                                                                                                               552:  0xEA09   PushConstFlt            9.0
                                                                                                                                                                               553:  0x003C   FltMul                  
                                                                                                                                                                               554:  0xEA05   PushConstFlt            5.0
                                                                                                                                                                               555:  0x003B   FltDiv                  
                                                                                                                                                                               556:  0xEA20   PushConstFlt            32.0
                                                                                                                                                                               557:  0x0039   FltAdd                  
                                                                                                                                                                               558:  0x0092   ReturnValType           

000039      End Function                                                                                                                                                       559:  0x0093   Return0                 

000040      
000041      Shared Function ToCelcius(farenheit As Float) As Float                                                                                                             560:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000042          Return (farenheit - 32) * 5 / 9                                                                                                                                561:  0x8800   PushLocalI32            farenheit
                                                                                                                                                                               562:  0xEA20   PushConstFlt            32.0
                                                                                                                                                                               563:  0x003F   FltSub                  
                                                                                                                                                                               564:  0xEA05   PushConstFlt            5.0
                                                                                                                                                                               565:  0x003C   FltMul                  
                                                                                                                                                                               566:  0xEA09   PushConstFlt            9.0
                                                                                                                                                                               567:  0x003B   FltDiv                  
                                                                                                                                                                               568:  0x0092   ReturnValType           

000043      End Function                                                                                                                                                       569:  0x0093   Return0                 

000044      
000045  End Class                                                                                                                                                              487:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for TempSensor
    Block Class (Line 1:45)
        TempSensor      Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        Block Function GetTemp (Line 4:30)
            I2c             sensor          (LocalRefTypVariableOffset=0)
            ListOfByte      res             (LocalRefTypVariableOffset=1)
            Float           temp            (LocalValTypVariableOffset=0)
            Block If Then  (Line 18:25)
                Float           part            (LocalValTypVariableOffset=1)
            End Block
        End Block
        Block Function GetDieTemp (Line 32:35)
        End Block
        Block Function ToFarenheit (Line 37:39)
            Float           celcius         (LocalValTypVariableOffset=0)
        End Block
        Block Function ToCelcius (Line 41:43)
            Float           farenheit       (LocalValTypVariableOffset=0)
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000003  Enum dataType As Byte
000004      NONE = 0
000005      VERSION = 1 //default beacon data for MQTT
000006      UPTIME = 2
000007      BATTVOLTAGE = 3
000008      TEMPERATURE = 4
000009      TEMPERATURE2 = 5
000010      HUMIDITY = 6
000011      DEWPOINT = 7
000012      PRESSURE = 8
000013      ALTITUDE = 9
000014      MOTION = 10
000015      DOOR = 11
000016      KNOCK = 12
000017  End Enum

****** BLOCKS and VARIABLES for dataType
    Block Struct (Line 3:17)
        dataType        NONE            (Literal=0)
        dataType        VERSION         (Literal=1)
        dataType        UPTIME          (Literal=2)
        dataType        BATTVOLTAGE     (Literal=3)
        dataType        TEMPERATURE     (Literal=4)
        dataType        TEMPERATURE2    (Literal=5)
        dataType        HUMIDITY        (Literal=6)
        dataType        DEWPOINT        (Literal=7)
        dataType        PRESSURE        (Literal=8)
        dataType        ALTITUDE        (Literal=9)
        dataType        MOTION          (Literal=10)
        dataType        DOOR            (Literal=11)
        dataType        KNOCK           (Literal=12)
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000019  Class MQTT                                                                                                                                                             570:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000020      Shared mcUIDString As String
000021      
000022      Shared Sub Publish(topic As String, value As String)                                                                                                               572:  0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                               573:  0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000023          If mcUIDString = Nothing Then                                                                                                                                  574:  0x000C   PushGlobal              
                                                                                                                                                                               575:  0xC404   PushFieldRef            mcUIDString
                                                                                                                                                                               576:  0x000E   PushNothing             
                                                                                                                                                                               577:  0x000A   RefCmpEQ                
                                                                                                                                                                               578:  0x3C06   BranchFalse             585

000024              mcUIDString = Device.mcUID().ToString("X8")                                                                                                                579:  0x8468   PushLiteral             104
                                                                                                                                                                               580:  0x00F8   DeviceUID               
                                                                                                                                                                               581:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               582:  0x0069   StrFormat               
                                                                                                                                                                               583:  0x000C   PushGlobal              
                                                                                                                                                                               584:  0xD404   PopFieldRef             mcUIDString

000025          End If
000026          Dim text_string As ListOfByte = New ListOfByte()                                                                                                               585:  0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                               586:  0x0010   ClassNew                
                                                                                                                                                                               587:  0x9402   PopLocalRef             text_string

000027          text_string.Add(value)                                                                                                                                         588:  0x8C01   PushLocalRef            value
                                                                                                                                                                               589:  0x8C02   PushLocalRef            text_string
                                                                                                                                                                               590:  0x00A6   ListAddString           

000028          Lplan.Publish("MCThings/" + mcUIDString + "/" + topic, text_string)                                                                                            591:  0x846A   PushLiteral             106
                                                                                                                                                                               592:  0x000C   PushGlobal              
                                                                                                                                                                               593:  0xC404   PushFieldRef            mcUIDString
                                                                                                                                                                               594:  0x0056   StrAdd                  
                                                                                                                                                                               595:  0x846E   PushLiteral             110
                                                                                                                                                                               596:  0x0056   StrAdd                  
                                                                                                                                                                               597:  0x8C00   PushLocalRef            topic
                                                                                                                                                                               598:  0x0056   StrAdd                  
                                                                                                                                                                               599:  0x8C02   PushLocalRef            text_string
                                                                                                                                                                               600:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               601:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               602:  0x0101   LplanPublish            

000029      End Sub                                                                                                                                                            603:  0x0091   Return                  

000030      
000031      Shared Sub Publish(topic As String, value As Object)                                                                                                               604:  0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                               605:  0xE002   AllocateStackSpace      ValTypeSize=0, RefTypeSize=2

000032          Dim text As String = value.ToString()                                                                                                                          606:  0x8C01   PushLocalRef            value
                                                                                                                                                                               607:  0x0081   CvtObjToStr             
                                                                                                                                                                               608:  0x9402   PopLocalRef             text

000033          If mcUIDString = Nothing Then                                                                                                                                  609:  0x000C   PushGlobal              
                                                                                                                                                                               610:  0xC404   PushFieldRef            mcUIDString
                                                                                                                                                                               611:  0x000E   PushNothing             
                                                                                                                                                                               612:  0x000A   RefCmpEQ                
                                                                                                                                                                               613:  0x3C06   BranchFalse             620

000034              mcUIDString = Device.mcUID().ToString("X8")                                                                                                                614:  0x8468   PushLiteral             104
                                                                                                                                                                               615:  0x00F8   DeviceUID               
                                                                                                                                                                               616:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               617:  0x0069   StrFormat               
                                                                                                                                                                               618:  0x000C   PushGlobal              
                                                                                                                                                                               619:  0xD404   PopFieldRef             mcUIDString

000035          End If
000036          Dim text_string As ListOfByte = New ListOfByte()                                                                                                               620:  0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                               621:  0x0010   ClassNew                
                                                                                                                                                                               622:  0x9403   PopLocalRef             text_string

000037          text_string.Add(text)                                                                                                                                          623:  0x8C02   PushLocalRef            text
                                                                                                                                                                               624:  0x8C03   PushLocalRef            text_string
                                                                                                                                                                               625:  0x00A6   ListAddString           

000038          Lplan.Publish("MCThings/" + mcUIDString + "/" + topic, text_string)                                                                                            626:  0x846A   PushLiteral             106
                                                                                                                                                                               627:  0x000C   PushGlobal              
                                                                                                                                                                               628:  0xC404   PushFieldRef            mcUIDString
                                                                                                                                                                               629:  0x0056   StrAdd                  
                                                                                                                                                                               630:  0x846E   PushLiteral             110
                                                                                                                                                                               631:  0x0056   StrAdd                  
                                                                                                                                                                               632:  0x8C00   PushLocalRef            topic
                                                                                                                                                                               633:  0x0056   StrAdd                  
                                                                                                                                                                               634:  0x8C03   PushLocalRef            text_string
                                                                                                                                                                               635:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               636:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               637:  0x0101   LplanPublish            

000039      End Sub                                                                                                                                                            638:  0x0091   Return                  

000040      
000041      Shared Sub Publish_exact(topic As String, text As String)                                                                                                          639:  0x1802   EntryPoint              ValTypParams=0, RefTypParams=2
                                                                                                                                                                               640:  0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000042          Dim text_String As ListOfByte = New ListOfByte()                                                                                                               641:  0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                               642:  0x0010   ClassNew                
                                                                                                                                                                               643:  0x9402   PopLocalRef             text_String

000043          text_String.Add(text)                                                                                                                                          644:  0x8C01   PushLocalRef            text
                                                                                                                                                                               645:  0x8C02   PushLocalRef            text_String
                                                                                                                                                                               646:  0x00A6   ListAddString           

000044          Lplan.Publish(topic, text_String)                                                                                                                              647:  0x8C00   PushLocalRef            topic
                                                                                                                                                                               648:  0x8C02   PushLocalRef            text_String
                                                                                                                                                                               649:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               650:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               651:  0x0101   LplanPublish            

000045      End Sub                                                                                                                                                            652:  0x0091   Return                  

000046      
000047      //**************************************************************************/
000048      //*!
000049      //    Encodes Float or Integer into 4 bytes of beacon data
000050      //    encoding is - byte 0 is data type (numeric value)
000051      //    Integer as Short (2 bytes) 
000052      //    Fraction as byte (1 byte)
000053      //*/
000054      //**************************************************************************/
000055      Shared Sub BeaconPublish(data_Type As Byte, value As Object)                                                                                                       653:  0x1811   EntryPoint              ValTypParams=1, RefTypParams=1
                                                                                                                                                                               654:  0xE041   AllocateStackSpace      ValTypeSize=2, RefTypeSize=1

000056          Dim fraction As Byte = 0
000057          Dim data As Short = 0
000058          If value Is Float Then                                                                                                                                         655:  0x8C00   PushLocalRef            value
                                                                                                                                                                               656:  0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               657:  0x0006   ClassIs                 
                                                                                                                                                                               658:  0x3C12   BranchFalse             677

000059              data = value.Cast(Float).ToShort() //get integer part (16 bit only)                                                                                        659:  0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               660:  0x8C00   PushLocalRef            value
                                                                                                                                                                               661:  0x0007   Cast                    
                                                                                                                                                                               662:  0x007B   CvtFltToInt             
                                                                                                                                                                               663:  0x007F   CvtIntToSho             
                                                                                                                                                                               664:  0x9002   PopLocalI32             data

000060              fraction = ((value.Cast(Float) - data) * 100.0).ToByte()                                                                                                   665:  0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               666:  0x8C00   PushLocalRef            value
                                                                                                                                                                               667:  0x0007   Cast                    
                                                                                                                                                                               668:  0x8802   PushLocalI32            data
                                                                                                                                                                               669:  0x007E   CvtIntToFlt             
                                                                                                                                                                               670:  0x003F   FltSub                  
                                                                                                                                                                               671:  0xEA64   PushConstFlt            100.0
                                                                                                                                                                               672:  0x003C   FltMul                  
                                                                                                                                                                               673:  0x007B   CvtFltToInt             
                                                                                                                                                                               674:  0x007D   CvtIntToByt             
                                                                                                                                                                               675:  0x9001   PopLocalI32             fraction

                                                                                                                                                                               676:  0x4029   Branch                  718
000061          ElseIf value Is Integer Then                                                                                                                                   677:  0x8C00   PushLocalRef            value
                                                                                                                                                                               678:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               679:  0x0006   ClassIs                 
                                                                                                                                                                               680:  0x3C06   BranchFalse             687

000062              data = value.Cast(Integer).ToShort() //get integer part (16 bit only)                                                                                      681:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               682:  0x8C00   PushLocalRef            value
                                                                                                                                                                               683:  0x0007   Cast                    
                                                                                                                                                                               684:  0x007F   CvtIntToSho             
                                                                                                                                                                               685:  0x9002   PopLocalI32             data

                                                                                                                                                                               686:  0x401F   Branch                  718
000063          ElseIf value Is Short Then                                                                                                                                     687:  0x8C00   PushLocalRef            value
                                                                                                                                                                               688:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               689:  0x0006   ClassIs                 
                                                                                                                                                                               690:  0x3C05   BranchFalse             696

000064              data = value.Cast(Short)                                                                                                                                   691:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               692:  0x8C00   PushLocalRef            value
                                                                                                                                                                               693:  0x0007   Cast                    
                                                                                                                                                                               694:  0x9002   PopLocalI32             data

                                                                                                                                                                               695:  0x4016   Branch                  718
000065          ElseIf value Is Byte Then                                                                                                                                      696:  0x8C00   PushLocalRef            value
                                                                                                                                                                               697:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               698:  0x0006   ClassIs                 
                                                                                                                                                                               699:  0x3C05   BranchFalse             705

000066              data = value.Cast(Byte).ToShort() //get integer part (16 bit only)                                                                                         700:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               701:  0x8C00   PushLocalRef            value
                                                                                                                                                                               702:  0x0007   Cast                    
                                                                                                                                                                               703:  0x9002   PopLocalI32             data

                                                                                                                                                                               704:  0x400D   Branch                  718
000067          ElseIf value Is Boolean Then                                                                                                                                   705:  0x8C00   PushLocalRef            value
                                                                                                                                                                               706:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               707:  0x0006   ClassIs                 
                                                                                                                                                                               708:  0x3C09   BranchFalse             718
                                                                                                                                                                               709:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000068              Dim on As Boolean = value.Cast(Boolean)                                                                                                                    710:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               711:  0x8C00   PushLocalRef            value
                                                                                                                                                                               712:  0x0007   Cast                    
                                                                                                                                                                               713:  0x9003   PopLocalI32             on

000069              If on Then                                                                                                                                                 714:  0x8803   PushLocalI32            on
                                                                                                                                                                               715:  0x3C01   BranchFalse             717

000070                  data = 1                                                                                                                                               716:  0x6402   Const1toLocalI32        data

000071              End If
                                                                                                                                                                               717:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0
000072          End If                                                                                                                                                         

000073          Dim beaconData As ListOfByte = New ListOfByte()                                                                                                                718:  0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                               719:  0x0010   ClassNew                
                                                                                                                                                                               720:  0x9401   PopLocalRef             beaconData

000074          beaconData.Add(data_Type)                                                                                                                                      721:  0x8800   PushLocalI32            data_Type
                                                                                                                                                                               722:  0x8C01   PushLocalRef            beaconData
                                                                                                                                                                               723:  0x00A3   ListAdd                 

000075          beaconData.AddShort(data)                                                                                                                                      724:  0x8802   PushLocalI32            data
                                                                                                                                                                               725:  0x8C01   PushLocalRef            beaconData
                                                                                                                                                                               726:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               727:  0x00A7   ListAdd2Byte            

000076          beaconData.Add(fraction)                                                                                                                                       728:  0x8801   PushLocalI32            fraction
                                                                                                                                                                               729:  0x8C01   PushLocalRef            beaconData
                                                                                                                                                                               730:  0x00A3   ListAdd                 

000077          Lplan.SetBeaconData(beaconData)                                                                                                                                731:  0x8C01   PushLocalRef            beaconData
                                                                                                                                                                               732:  0x0016   PushConstMinus1         
                                                                                                                                                                               733:  0x0105   LplanSetBeacon          

000078          Lplan.SendBeacon()                                                                                                                                             734:  0x0104   LplanSendBeacon         

000079          //Lplan.BeaconNow () //does not seem to work
000080      End Sub                                                                                                                                                            735:  0x0091   Return                  

000081      
000082      Shared Sub Subscribe(topic As String)                                                                                                                              736:  0x1801   EntryPoint              ValTypParams=0, RefTypParams=1

000083          Lplan.Subscribe(topic)                                                                                                                                         737:  0x8C00   PushLocalRef            topic
                                                                                                                                                                               738:  0x0102   LplanSubscribe          

000084      End Sub                                                                                                                                                            739:  0x0091   Return                  

000085      
000086  End Class                                                                                                                                                              571:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for MQTT
    Block Class (Line 19:86)
        MQTT            Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        String          mcUIDString     (SharedRefTypVariableOffset=4)
        Block Sub Publish (Line 22:29)
            ListOfByte      text_string     (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            String          value           (LocalRefTypVariableOffset=1)
            Block If Then  (Line 23:25)
            End Block
        End Block
        Block Sub Publish (Line 31:39)
            String          text            (LocalRefTypVariableOffset=2)
            ListOfByte      text_string     (LocalRefTypVariableOffset=3)
            String          topic           (LocalRefTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=1)
            Block If Then  (Line 33:35)
            End Block
        End Block
        Block Sub Publish_exact (Line 41:45)
            ListOfByte      text_String     (LocalRefTypVariableOffset=2)
            String          topic           (LocalRefTypVariableOffset=0)
            String          text            (LocalRefTypVariableOffset=1)
        End Block
        Block Sub BeaconPublish (Line 55:80)
            Byte            fraction        (LocalValTypVariableOffset=1)
            Short           data            (LocalValTypVariableOffset=2)
            ListOfByte      beaconData      (LocalRefTypVariableOffset=1)
            Byte            data_Type       (LocalValTypVariableOffset=0)
            Object          value           (LocalRefTypVariableOffset=0)
            Block If Then  (Line 58:61)
            End Block
            Block ElseIf (Line 61:63)
            End Block
            Block ElseIf (Line 63:65)
            End Block
            Block ElseIf (Line 65:67)
            End Block
            Block ElseIf (Line 67:72)
                Boolean         on              (LocalValTypVariableOffset=3)
                Block If Then  (Line 69:71)
                End Block
            End Block
        End Block
        Block Sub Subscribe (Line 82:84)
            String          topic           (LocalRefTypVariableOffset=0)
        End Block
        Total Size of Member data including base classes = 0.
    End Block


*************************************************************************************************************

000025  Class BME280                                                                                                                                                           740:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000026      // Class To handle BME280 temperature/humidity/pressure BME280_I2C via I2C
000027      //Supply voltage VDD main supply voltage range: 1.71 V to 3.6 V
000028      //VDDIO interface voltage range: 1.2 V to 3.6 V
000029      //Current consumption 1.8 A @ 1 Hz humidity and temperature
000030      //2.8 A @ 1 Hz pressure and temperature
000031      //3.6 A @ 1 Hz humidity, pressure and temperature
000032      //0.1 A in sleep mode
000033      
000034      Const version As String = "1.0"
000035      
000036      //Registers
000037      Const REGISTER_DIG_T1 As Byte = 0x88
000038      Const REGISTER_DIG_T2 As Byte = 0x8a
000039      Const REGISTER_DIG_T3 As Byte = 0x8c
000040      
000041      Const REGISTER_DIG_P1 As Byte = 0x8e
000042      Const REGISTER_DIG_P2 As Byte = 0x90
000043      Const REGISTER_DIG_P3 As Byte = 0x92
000044      Const REGISTER_DIG_P4 As Byte = 0x94
000045      Const REGISTER_DIG_P5 As Byte = 0x96
000046      Const REGISTER_DIG_P6 As Byte = 0x98
000047      Const REGISTER_DIG_P7 As Byte = 0x9a
000048      Const REGISTER_DIG_P8 As Byte = 0x9c
000049      Const REGISTER_DIG_P9 As Byte = 0x9e
000050      
000051      Const REGISTER_DIG_H1 As Byte = 0xa1
000052      Const REGISTER_DIG_H2 As Byte = 0xe1
000053      Const REGISTER_DIG_H3 As Byte = 0xe3
000054      Const REGISTER_DIG_H4 As Byte = 0xe4
000055      Const REGISTER_DIG_H5 As Byte = 0xe5
000056      Const REGISTER_DIG_H6 As Byte = 0xe7
000057      
000058      Const REGISTER_CHIPID As Byte = 0xd0
000059      Const REGISTER_VERSION As Byte = 0xd1
000060      Const REGISTER_SOFTRESET As Byte = 0xe0
000061      
000062      Const REGISTER_CAL26 As Byte = 0xe1 // R calibration stored in 0xE1-0xF0
000063      
000064      Const REGISTER_CONTROLHUMID As Byte = 0xf2
000065      Const REGISTER_STATUS As Byte = 0xf3
000066      Const REGISTER_CONTROL As Byte = 0xf4
000067      Const REGISTER_CONFIG As Byte = 0xf5
000068      Const REGISTER_PRESSUREDATA As Byte = 0xf7
000069      Const REGISTER_TEMPDATA As Byte = 0xfa
000070      Const REGISTER_HUMIDDATA As Byte = 0xfd
000071      
000072      //mode Constants
000073      Const SLEEP As Byte = 0x00
000074      Const FORCED As Byte = 0x01
000075      Const NORMAL As Byte = 0x03
000076      
000077      //Sampling Constanats
000078      Const SAMPLING_0 As Byte = 0x00
000079      Const SAMPLING_1 As Byte = 0x01
000080      Const SAMPLING_2 As Byte = 0x02
000081      Const SAMPLING_4 As Byte = 0x03
000082      Const SAMPLING_8 As Byte = 0x04
000083      Const SAMPLING_16 As Byte = 0x05
000084      
000085      //IIR Sampling Constanats
000086      Const IIR_SAMPLING_0 As Byte = 0x00
000087      Const IIR_SAMPLING_2 As Byte = 0x01
000088      Const IIR_SAMPLING_4 As Byte = 0x02
000089      Const IIR_SAMPLING_8 As Byte = 0x03
000090      Const IIR_SAMPLING_16 As Byte = 0x04
000091      
000092      //Factory Calibration Factors (Typical Values) (Spakfun typical values)
000093      //SpakFun Typical values found here: https://learn.sparkfun.com/tutorials/sparkfun-bme280-breakout-hookup-guide#res
000094      Public dig_T1 As Integer //converted from unsigned Short  (28224)   (27974)     uint16
000095      Public dig_T2 As Integer //was Short                      (26762)   (26594)     int16
000096      Public dig_T3 As Integer //was Short                      (50)      (50)        int16
000097      
000098      
000099      Public dig_P1 As Integer //converted from unsigned Short  (37424)   (38207)     uint16
000100      Public dig_P2 As Integer //was Short                      (-10666)  (-10702)    int16
000101      Public dig_P3 As Integer //was Short                      (3024)    (3024)      int16
000102      Public dig_P4 As Integer //was Short                      (8136)    (7917)      int16
000103      Public dig_P5 As Integer //was Short                      (-21)     (-118)      int16
000104      Public dig_P6 As Integer //was Short                      (-7)      (-7)        int16
000105      Public dig_P7 As Integer //was Short                      (9900)    (9900)      int16
000106      Public dig_P8 As Integer //was Short                      (-10230)  (-10230)    int16
000107      Public dig_P9 As Integer //was Short                      (4285)    (4285)      int16
000108      
000109      Public dig_H1 As Integer //was Byte                       (75)      (75)        uint8
000110      Public dig_H2 As Integer //was Short                      (353)     (358)       int16
000111      Public dig_H3 As Integer //was Byte                       (0)       (0)         uint8
000112      Public dig_H4 As Integer //was Short                      (340)     (328)       int16
000113      Public dig_H5 As Integer //was Short                      (0)       (0)         int16
000114      Public dig_H6 As Integer //converted from signed Byte     (30)      (30)        uint8
000115      
000116      //raw values as read by readall()
000117      Public temperature_raw As Integer
000118      Public pressure_raw As Integer
000119      Public humidity_raw As Integer
000120      
000121      // Time to take sample, stored so that we don;t have to keep reading the I2C bus
000122      Public sample_time As Integer = 0
000123      
000124      //sensor mode
000125      Public normal_mode As Boolean = True                                                                                                                               741:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               742:  0xA804   PopMemberU8             normal_mode

000126      
000127      //sample rate
000128      Public sample_filter_rate As Byte = 0xa0                                                                                                                           743:  0x80A0   PushConstU10            160 (0x00A0)
                                                                                                                                                                               744:  0xA805   PopMemberU8             sample_filter_rate

000129      
000130      //humidity oversampling
000131      Public hum_oversample As Byte = 0x05                                                                                                                               745:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               746:  0xA806   PopMemberU8             hum_oversample

000132      
000133      //Temperature and Pressure oversampling
000134      Public temp_press_oversample As Byte = 0xb7                                                                                                                        747:  0x80B7   PushConstU10            183 (0x00B7)
                                                                                                                                                                               748:  0xA807   PopMemberU8             temp_press_oversample

000135      
000136      //Ambient Temperature adjustment, used in Humidity and Pressure calculations
000137      Public t_fine As Integer
000138      
000139      //I2c device for BME280_I2C
000140      Public BME280_I2C As I2c
000141      
000142      //Set devices status as online or not
000143      Public online As Boolean = False
000144      
000145      Public Sub New()                                                                                                                                                   750:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               751:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000146          BME280_I2C = I2c.Create(400000, Pin.SCL, Pin.SDA, 0x77) //0x77 is I2C address                                                                                  752:  0x0110   PushConstI32            400000 (0x00061A80)
                                                                                                                                                                               753:  0x1A80                           
                                                                                                                                                                               754:  0x0006                           
                                                                                                                                                                               755:  0x800D   PushConstU10            13 (0x000D)
                                                                                                                                                                               756:  0x800E   PushConstU10            14 (0x000E)
                                                                                                                                                                               757:  0x8077   PushConstU10            119 (0x0077)
                                                                                                                                                                               758:  0x803B   PushConstU10            59 (0x003B)
                                                                                                                                                                               759:  0x0010   ClassNew                
                                                                                                                                                                               760:  0xB400   PopMemberRef            BME280_I2C

000147          Reset()                                                                                                                                                        761:  0x000D   PushMe                  
                                                                                                                                                                               762:  0x1C52   BranchSubr              845

000148          Thread.Sleep(25000) // wait 25mS for module to come online                                                                                                     763:  0x0110   PushConstI32            25000 (0x000061A8)
                                                                                                                                                                               764:  0x61A8                           
                                                                                                                                                                               765:  0x0000                           
                                                                                                                                                                               766:  0x00D5   ThreadSleep             
                                                                                                                                                                               767:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000149          
000150          Dim chipid As Byte = getChipID()                                                                                                                               768:  0x000D   PushMe                  
                                                                                                                                                                               769:  0x1C1D   BranchSubr              799
                                                                                                                                                                               770:  0x9000   PopLocalI32             chipid

000151          
000152          If chipid = 0x60 Then                                                                                                                                          771:  0x8800   PushLocalI32            chipid
                                                                                                                                                                               772:  0x8060   PushConstU10            96 (0x0060)
                                                                                                                                                                               773:  0x2418   BranchNE                798

000153              online = True                                                                                                                                              774:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               775:  0xA808   PopMemberU8             online

000154              readCoefficients() //load calibration factors                                                                                                              776:  0x000D   PushMe                  
                                                                                                                                                                               777:  0x5800   JumpSubr                2201
                                                                                                                                                                               778:  0x0899                           

000155              // Set Humidity oversampling before Mode (DS 5.4.3) - setMode will do this automatically
000156              // more sampling = more time/current but better accuracy
000157              // Setting oversampling to 0 disables the sensor! retun value is then always 0x8000
000158              // Valid settings are 0,1,2,4,6,8,16
000159              setHumiditysamplingValue(1)                                                                                                                                779:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               780:  0x000D   PushMe                  
                                                                                                                                                                               781:  0x1CA8   BranchSubr              950

000160              setTemperaturesamplingValue(16)                                                                                                                            782:  0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               783:  0x000D   PushMe                  
                                                                                                                                                                               784:  0x1CCD   BranchSubr              990

000161              setPressuresamplingValue(16)                                                                                                                               785:  0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               786:  0x000D   PushMe                  
                                                                                                                                                                               787:  0x1CF6   BranchSubr              1034

000162              setIIRfilterValue(0) //(temp and press only) more filtering reduces transients, but increases time/current consumption                                     788:  0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               789:  0x000D   PushMe                  
                                                                                                                                                                               790:  0x1DE0   BranchSubr              1271

000163              setSamplerateValue(1000) //sample every 1000mS (only in NORMAL mode)                                                                                       791:  0x83E8   PushConstU10            1000 (0x03E8)
                                                                                                                                                                               792:  0x007E   CvtIntToFlt             
                                                                                                                                                                               793:  0x000D   PushMe                  
                                                                                                                                                                               794:  0x1D3B   BranchSubr              1110

000164              //setMode(NORMAL) //Free running mode (continuous sampling at SampleRate)
000165              setMode(FORCED) //only take samples when commanded                                                                                                         795:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               796:  0x000D   PushMe                  
                                                                                                                                                                               797:  0x1D00   BranchSubr              1054

000166          End If
000167      End Sub                                                                                                                                                            798:  0x0097   ReturnMe                

000168      
000169      Public Function getChipID() As Byte                                                                                                                                799:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000170          //ChipID should be 0x60 (96 decimal)
000171          Return read8(REGISTER_CHIPID).ToByte()                                                                                                                         800:  0x80D0   PushConstU10            208 (0x00D0)
                                                                                                                                                                               801:  0x000D   PushMe                  
                                                                                                                                                                               802:  0x5800   JumpSubr                1990
                                                                                                                                                                               803:  0x07C6                           
                                                                                                                                                                               804:  0x007D   CvtIntToByt             
                                                                                                                                                                               805:  0x0092   ReturnValType           

000172      End Function                                                                                                                                                       806:  0x0093   Return0                 

000173      
000174      Public Function getVersion() As Byte                                                                                                                               807:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000175          Return read8(REGISTER_VERSION).ToByte()                                                                                                                        808:  0x80D1   PushConstU10            209 (0x00D1)
                                                                                                                                                                               809:  0x000D   PushMe                  
                                                                                                                                                                               810:  0x5800   JumpSubr                1990
                                                                                                                                                                               811:  0x07C6                           
                                                                                                                                                                               812:  0x007D   CvtIntToByt             
                                                                                                                                                                               813:  0x0092   ReturnValType           

000176      End Function                                                                                                                                                       814:  0x0093   Return0                 

000177      
000178      Public Function getStatus() As Byte                                                                                                                                815:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000179          Return read8(REGISTER_STATUS).ToByte() //bit 3 = measuring, bit 0 = updating                                                                                   816:  0x80F3   PushConstU10            243 (0x00F3)
                                                                                                                                                                               817:  0x000D   PushMe                  
                                                                                                                                                                               818:  0x5800   JumpSubr                1990
                                                                                                                                                                               819:  0x07C6                           
                                                                                                                                                                               820:  0x007D   CvtIntToByt             
                                                                                                                                                                               821:  0x0092   ReturnValType           

000180      End Function                                                                                                                                                       822:  0x0093   Return0                 

000181      
000182      Public Function measuring() As Boolean                                                                                                                             823:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000183          Return (read8(REGISTER_STATUS).ToByte() & 0x04).ToBoolean() //bit 3 = measuring, bit 0 = updating                                                              824:  0x80F3   PushConstU10            243 (0x00F3)
                                                                                                                                                                               825:  0x000D   PushMe                  
                                                                                                                                                                               826:  0x5800   JumpSubr                1990
                                                                                                                                                                               827:  0x07C6                           
                                                                                                                                                                               828:  0x007D   CvtIntToByt             
                                                                                                                                                                               829:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               830:  0x001F   IntAnd                  
                                                                                                                                                                               831:  0x0000   Nop                     
                                                                                                                                                                               832:  0x0092   ReturnValType           

000184      End Function                                                                                                                                                       833:  0x0093   Return0                 

000185      
000186      Public Function updating() As Boolean                                                                                                                              834:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000187          Return (read8(REGISTER_STATUS).ToByte() & 0x01).ToBoolean() //bit 3 = measuring, bit 0 = updating                                                              835:  0x80F3   PushConstU10            243 (0x00F3)
                                                                                                                                                                               836:  0x000D   PushMe                  
                                                                                                                                                                               837:  0x5800   JumpSubr                1990
                                                                                                                                                                               838:  0x07C6                           
                                                                                                                                                                               839:  0x007D   CvtIntToByt             
                                                                                                                                                                               840:  0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               841:  0x001F   IntAnd                  
                                                                                                                                                                               842:  0x0000   Nop                     
                                                                                                                                                                               843:  0x0092   ReturnValType           

000188      End Function                                                                                                                                                       844:  0x0093   Return0                 

000189      
000190      Public Sub Reset()                                                                                                                                                 845:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000191          write8(REGISTER_SOFTRESET, 0xb6)                                                                                                                               846:  0x80E0   PushConstU10            224 (0x00E0)
                                                                                                                                                                               847:  0x80B6   PushConstU10            182 (0x00B6)
                                                                                                                                                                               848:  0x000D   PushMe                  
                                                                                                                                                                               849:  0x5800   JumpSubr                1960
                                                                                                                                                                               850:  0x07A8                           

000192          Thread.Sleep(25000) // wait 25mS for module to come online                                                                                                     851:  0x0110   PushConstI32            25000 (0x000061A8)
                                                                                                                                                                               852:  0x61A8                           
                                                                                                                                                                               853:  0x0000                           
                                                                                                                                                                               854:  0x00D5   ThreadSleep             
                                                                                                                                                                               855:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000193      End Sub                                                                                                                                                            856:  0x0091   Return                  

000194      
000195      Public Function getSampleValueAsByte(sample As Byte) As Byte                                                                                                       857:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               858:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000196          'converts sampling rate (0-16) as Byte value
000197          Dim Value As Byte
000198          Select sample                                                                                                                                                  859:  0x8800   PushLocalI32            sample
                                                                                                                                                                               860:  0x0122   CaseComputed            
                                                                                                                                                                               861:  0x0002                           CaseCommonClass=Byte
                                                                                                                                                                               862:  0x0005                           NumberOfCaseEntries=5
                                                                                                                                                                               863:  0x0016                           CaseElseBranch=886
                                                                                                                                                                               864:  0x0000                           CaseValue=0
                                                                                                                                                                               865:  0x000A                           CaseBranch=874
                                                                                                                                                                               866:  0x0001                           CaseValue=1
                                                                                                                                                                               867:  0x000C                           CaseBranch=876
                                                                                                                                                                               868:  0x0002                           CaseValue=2
                                                                                                                                                                               869:  0x000E                           CaseBranch=878
                                                                                                                                                                               870:  0x0004                           CaseValue=4
                                                                                                                                                                               871:  0x0010                           CaseBranch=880
                                                                                                                                                                               872:  0x0008                           CaseValue=8
                                                                                                                                                                               873:  0x0013                           CaseBranch=883

000199              Case 0
000200                  Value = SAMPLING_0                                                                                                                                     874:  0x6001   Const0toLocalI32        Value

                                                                                                                                                                               875:  0x400C   Branch                  888
000201              Case 1                                                                                                                                                     

000202                  Value = SAMPLING_1                                                                                                                                     876:  0x6401   Const1toLocalI32        Value

                                                                                                                                                                               877:  0x400A   Branch                  888
000203              Case 2                                                                                                                                                     

000204                  Value = SAMPLING_2                                                                                                                                     878:  0x6801   Const2toLocalI32        Value

                                                                                                                                                                               879:  0x4008   Branch                  888
000205              Case 4                                                                                                                                                     

000206                  Value = SAMPLING_4                                                                                                                                     880:  0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               881:  0x9001   PopLocalI32             Value

                                                                                                                                                                               882:  0x4005   Branch                  888
000207              Case 8                                                                                                                                                     

000208                  Value = SAMPLING_8                                                                                                                                     883:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               884:  0x9001   PopLocalI32             Value

                                                                                                                                                                               885:  0x4002   Branch                  888
000209              Case Else                                                                                                                                                  

000210                  Value = SAMPLING_16                                                                                                                                    886:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               887:  0x9001   PopLocalI32             Value

000211          End Select
000212          Return Value                                                                                                                                                   888:  0x8801   PushLocalI32            Value
                                                                                                                                                                               889:  0x0092   ReturnValType           

000213      End Function                                                                                                                                                       890:  0x0093   Return0                 

000214      
000215      Public Function getSampleByteAsValue(value As Byte) As Byte                                                                                                        891:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000216          'converts sampling rate Byte value into actual value (0-16)
000217          Select value                                                                                                                                                   892:  0x8800   PushLocalI32            value
                                                                                                                                                                               893:  0x0122   CaseComputed            
                                                                                                                                                                               894:  0x0002                           CaseCommonClass=Byte
                                                                                                                                                                               895:  0x0006                           NumberOfCaseEntries=6
                                                                                                                                                                               896:  0x001C                           CaseElseBranch=925
                                                                                                                                                                               897:  0x0000                           CaseValue=0
                                                                                                                                                                               898:  0x000C                           CaseBranch=909
                                                                                                                                                                               899:  0x0001                           CaseValue=1
                                                                                                                                                                               900:  0x000E                           CaseBranch=911
                                                                                                                                                                               901:  0x0002                           CaseValue=2
                                                                                                                                                                               902:  0x0010                           CaseBranch=913
                                                                                                                                                                               903:  0x0003                           CaseValue=3
                                                                                                                                                                               904:  0x0013                           CaseBranch=916
                                                                                                                                                                               905:  0x0004                           CaseValue=4
                                                                                                                                                                               906:  0x0016                           CaseBranch=919
                                                                                                                                                                               907:  0x0005                           CaseValue=5
                                                                                                                                                                               908:  0x0019                           CaseBranch=922

000218              Case SAMPLING_0
000219                  Return 0                                                                                                                                               909:  0x0093   Return0                 

                                                                                                                                                                               910:  0x4010   Branch                  927
000220              Case SAMPLING_1                                                                                                                                            

000221                  Return 1                                                                                                                                               911:  0x0094   Return1                 

                                                                                                                                                                               912:  0x400E   Branch                  927
000222              Case SAMPLING_2                                                                                                                                            

000223                  Return 2                                                                                                                                               913:  0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               914:  0x0092   ReturnValType           

                                                                                                                                                                               915:  0x400B   Branch                  927
000224              Case SAMPLING_4                                                                                                                                            

000225                  Return 4                                                                                                                                               916:  0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               917:  0x0092   ReturnValType           

                                                                                                                                                                               918:  0x4008   Branch                  927
000226              Case SAMPLING_8                                                                                                                                            

000227                  Return 8                                                                                                                                               919:  0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               920:  0x0092   ReturnValType           

                                                                                                                                                                               921:  0x4005   Branch                  927
000228              Case SAMPLING_16                                                                                                                                           

000229                  Return 16                                                                                                                                              922:  0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               923:  0x0092   ReturnValType           

                                                                                                                                                                               924:  0x4002   Branch                  927
000230              Case Else                                                                                                                                                  

000231                  Return 16                                                                                                                                              925:  0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               926:  0x0092   ReturnValType           

000232          End Select
000233      End Function                                                                                                                                                       927:  0x0093   Return0                 

000234      
000235      Public Sub setHumiditysampling(set_hum_oversample As Byte)                                                                                                         928:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000236          //Controls oversampling of humidity data.
000237          //000 Skipped (output set to 0x8000)
000238          //001 oversampling 1 (0x01)
000239          //010 oversampling 2 (0x02)
000240          //011 oversampling 4 (0x03)
000241          //100 oversampling 8 (0x04)
000242          //101, others oversampling 16 (default 0x05)
000243          sample_time = 0 //reset sample_time so that we calcuate it again                                                                                               929:  0x7860   Const0toMemberI32       sample_time

000244          If set_hum_oversample > 0x05 Then                                                                                                                              930:  0x8800   PushLocalI32            set_hum_oversample
                                                                                                                                                                               931:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               932:  0x2C02   BranchLE                935

000245              set_hum_oversample = 0x05                                                                                                                                  933:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               934:  0x9000   PopLocalI32             set_hum_oversample

000246          End If
000247          hum_oversample = set_hum_oversample                                                                                                                            935:  0x8800   PushLocalI32            set_hum_oversample
                                                                                                                                                                               936:  0xA806   PopMemberU8             hum_oversample

000248          write8(REGISTER_CONTROLHUMID, hum_oversample)                                                                                                                  937:  0x80F2   PushConstU10            242 (0x00F2)
                                                                                                                                                                               938:  0x9806   PushMemberU8            hum_oversample
                                                                                                                                                                               939:  0x000D   PushMe                  
                                                                                                                                                                               940:  0x1FFB   BranchSubr              1960

000249          write8(REGISTER_CONFIG, sample_filter_rate)                                                                                                                    941:  0x80F5   PushConstU10            245 (0x00F5)
                                                                                                                                                                               942:  0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               943:  0x000D   PushMe                  
                                                                                                                                                                               944:  0x1FF7   BranchSubr              1960

000250          write8(REGISTER_CONTROL, temp_press_oversample)                                                                                                                945:  0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               946:  0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               947:  0x000D   PushMe                  
                                                                                                                                                                               948:  0x1FF3   BranchSubr              1960

000251      End Sub                                                                                                                                                            949:  0x0091   Return                  

000252      
000253      Public Sub setHumiditysamplingValue(set_hum_oversample As Byte)                                                                                                    950:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               951:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000254          'value as 0-16 times
000255          Dim Value As Byte = getSampleValueAsByte(set_hum_oversample)                                                                                                   952:  0x8800   PushLocalI32            set_hum_oversample
                                                                                                                                                                               953:  0x000D   PushMe                  
                                                                                                                                                                               954:  0x5462   BranchSubrBack          857
                                                                                                                                                                               955:  0x9001   PopLocalI32             Value

000256          setHumiditysampling(Value)                                                                                                                                     956:  0x8801   PushLocalI32            Value
                                                                                                                                                                               957:  0x000D   PushMe                  
                                                                                                                                                                               958:  0x541F   BranchSubrBack          928

000257      End Sub                                                                                                                                                            959:  0x0091   Return                  

000258      
000259      Public Function getHumiditysamplingValue() As Integer                                                                                                              960:  0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000260          //returns current humidity sampling value (not byte)
000261          Return getSampleByteAsValue(hum_oversample)                                                                                                                    961:  0x9806   PushMemberU8            hum_oversample
                                                                                                                                                                               962:  0x000D   PushMe                  
                                                                                                                                                                               963:  0x5449   BranchSubrBack          891
                                                                                                                                                                               964:  0x0092   ReturnValType           

000262      End Function                                                                                                                                                       965:  0x0093   Return0                 

000263      
000264      Public Sub setTemperaturesampling(set_temp_oversample As Byte)                                                                                                     966:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000265          //Controls oversampling of Temperature data. bits 7,6,5
000266          //000 Skipped (output set to 0x8000)
000267          //001 oversampling 1 (0x01)
000268          //010 oversampling 2 (0x02)
000269          //011 oversampling 4 (0x03)
000270          //100 oversampling 8 (0x04)
000271          //101, others oversampling 16 (default 0x05)
000272          sample_time = 0 //reset sample_time so that we calcuate it again                                                                                               967:  0x7860   Const0toMemberI32       sample_time

000273          If set_temp_oversample > 0x05 Then                                                                                                                             968:  0x8800   PushLocalI32            set_temp_oversample
                                                                                                                                                                               969:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               970:  0x2C02   BranchLE                973

000274              set_temp_oversample = 0x05                                                                                                                                 971:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               972:  0x9000   PopLocalI32             set_temp_oversample

000275          End If
000276          temp_press_oversample = (set_temp_oversample << 5) | (temp_press_oversample & 0x1f)                                                                            973:  0x8800   PushLocalI32            set_temp_oversample
                                                                                                                                                                               974:  0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               975:  0x002E   IntShl                  
                                                                                                                                                                               976:  0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               977:  0x801F   PushConstU10            31 (0x001F)
                                                                                                                                                                               978:  0x001F   IntAnd                  
                                                                                                                                                                               979:  0x002D   IntOr                   
                                                                                                                                                                               980:  0xA807   PopMemberU8             temp_press_oversample

000277          write8(REGISTER_CONFIG, sample_filter_rate)                                                                                                                    981:  0x80F5   PushConstU10            245 (0x00F5)
                                                                                                                                                                               982:  0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               983:  0x000D   PushMe                  
                                                                                                                                                                               984:  0x1FCF   BranchSubr              1960

000278          write8(REGISTER_CONTROL, temp_press_oversample)                                                                                                                985:  0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               986:  0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               987:  0x000D   PushMe                  
                                                                                                                                                                               988:  0x1FCB   BranchSubr              1960

000279      End Sub                                                                                                                                                            989:  0x0091   Return                  

000280      
000281      Public Sub setTemperaturesamplingValue(set_temp_oversample As Byte)                                                                                                990:  0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               991:  0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000282          'value as 0-16 times
000283          Dim Value As Byte = getSampleValueAsByte(set_temp_oversample)                                                                                                  992:  0x8800   PushLocalI32            set_temp_oversample
                                                                                                                                                                               993:  0x000D   PushMe                  
                                                                                                                                                                               994:  0x548A   BranchSubrBack          857
                                                                                                                                                                               995:  0x9001   PopLocalI32             Value

000284          setTemperaturesampling(Value)                                                                                                                                  996:  0x8801   PushLocalI32            Value
                                                                                                                                                                               997:  0x000D   PushMe                  
                                                                                                                                                                               998:  0x5421   BranchSubrBack          966

000285      End Sub                                                                                                                                                            999:  0x0091   Return                  

000286      
000287      Public Function getTemperaturesamplingValue() As Integer                                                                                                           1000: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000288          //returns current temperature sampling value (not byte)
000289          Return getSampleByteAsValue((temp_press_oversample >> 5) & 0x07)                                                                                               1001: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1002: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1003: 0x002F   IntShr                  
                                                                                                                                                                               1004: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               1005: 0x001F   IntAnd                  
                                                                                                                                                                               1006: 0x000D   PushMe                  
                                                                                                                                                                               1007: 0x5475   BranchSubrBack          891
                                                                                                                                                                               1008: 0x0092   ReturnValType           

000290      End Function                                                                                                                                                       1009: 0x0093   Return0                 

000291      
000292      Public Sub setPressuresampling(set_press_oversample As Byte)                                                                                                       1010: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000293          //Controls oversampling of Temperature data. bits 4,3,2
000294          //000 Skipped (output set to 0x8000)
000295          //001 oversampling 1 (0x01)
000296          //010 oversampling 2 (0x02)
000297          //011 oversampling 4 (0x03)
000298          //100 oversampling 8 (0x04)
000299          //101, others oversampling 16 (default 0x05)
000300          sample_time = 0 //reset sample_time so that we calcuate it again                                                                                               1011: 0x7860   Const0toMemberI32       sample_time

000301          If set_press_oversample > 0x05 Then                                                                                                                            1012: 0x8800   PushLocalI32            set_press_oversample
                                                                                                                                                                               1013: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1014: 0x2C02   BranchLE                1017

000302              set_press_oversample = 0x05                                                                                                                                1015: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1016: 0x9000   PopLocalI32             set_press_oversample

000303          End If
000304          temp_press_oversample = (set_press_oversample << 2) | (temp_press_oversample & 0xe3)                                                                           1017: 0x8800   PushLocalI32            set_press_oversample
                                                                                                                                                                               1018: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1019: 0x002E   IntShl                  
                                                                                                                                                                               1020: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1021: 0x80E3   PushConstU10            227 (0x00E3)
                                                                                                                                                                               1022: 0x001F   IntAnd                  
                                                                                                                                                                               1023: 0x002D   IntOr                   
                                                                                                                                                                               1024: 0xA807   PopMemberU8             temp_press_oversample

000305          write8(REGISTER_CONFIG, sample_filter_rate)                                                                                                                    1025: 0x80F5   PushConstU10            245 (0x00F5)
                                                                                                                                                                               1026: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1027: 0x000D   PushMe                  
                                                                                                                                                                               1028: 0x1FA3   BranchSubr              1960

000306          write8(REGISTER_CONTROL, temp_press_oversample)                                                                                                                1029: 0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               1030: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1031: 0x000D   PushMe                  
                                                                                                                                                                               1032: 0x1F9F   BranchSubr              1960

000307      End Sub                                                                                                                                                            1033: 0x0091   Return                  

000308      
000309      Public Sub setPressuresamplingValue(set_press_oversample As Byte)                                                                                                  1034: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1035: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000310          'value as 0-16 times
000311          Dim Value As Byte = getSampleValueAsByte(set_press_oversample)                                                                                                 1036: 0x8800   PushLocalI32            set_press_oversample
                                                                                                                                                                               1037: 0x000D   PushMe                  
                                                                                                                                                                               1038: 0x54B6   BranchSubrBack          857
                                                                                                                                                                               1039: 0x9001   PopLocalI32             Value

000312          setPressuresampling(Value)                                                                                                                                     1040: 0x8801   PushLocalI32            Value
                                                                                                                                                                               1041: 0x000D   PushMe                  
                                                                                                                                                                               1042: 0x5421   BranchSubrBack          1010

000313      End Sub                                                                                                                                                            1043: 0x0091   Return                  

000314      
000315      Public Function getPressuresamplingValue() As Integer                                                                                                              1044: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000316          //returns current pressure sampling value (not byte)
000317          Return getSampleByteAsValue((temp_press_oversample) >> 2 & 0x07)                                                                                               1045: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1046: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1047: 0x002F   IntShr                  
                                                                                                                                                                               1048: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               1049: 0x001F   IntAnd                  
                                                                                                                                                                               1050: 0x000D   PushMe                  
                                                                                                                                                                               1051: 0x54A1   BranchSubrBack          891
                                                                                                                                                                               1052: 0x0092   ReturnValType           

000318      End Function                                                                                                                                                       1053: 0x0093   Return0                 

000319      
000320      Public Sub setMode(set_mode As Byte)                                                                                                                               1054: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000321          // Normal Mode is free running, sampling at sample rate (usually 1/sec)
000322          // Forced mode is one sample at request. This is minnimum power mode
000323          // Sleep Mode is no readings (registers are available though)
000324          
000325          //From Data Sheet:
000326          //The BME280 offers three sensor modes: sleep mode, forced mode and normal mode. These
000327          //can be selected using the mode[1:0] setting (see chapter 5.4.5). The available modes are:
000328          //* Sleep mode: no operation, all registers accessible, lowest power, selected after startup
000329          //* Forced mode: perform one measurement, store results and return to sleep mode
000330          //* Normal mode: perpetual cycling of measurements and inactive periods.
000331          //The modes will be explained in detail in chapters 3.3.2 (sleep mode), 3.3.3 (forced mode) and
000332          //3.3.4 (normal mode).
000333          
000334          //00 Sleep
000335          //01 Forced (0x01)
000336          //10 Forced (0x02)
000337          //11 Normal (0x03)
000338          sample_time = 0 //reset sample_time so that we calcuate it again                                                                                               1055: 0x7860   Const0toMemberI32       sample_time

000339          If set_mode >= 0x03 Then                                                                                                                                       1056: 0x8800   PushLocalI32            set_mode
                                                                                                                                                                               1057: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               1058: 0x2805   BranchLT                1064

000340              normal_mode = True                                                                                                                                         1059: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               1060: 0xA804   PopMemberU8             normal_mode

000341              set_mode = 0x03                                                                                                                                            1061: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               1062: 0x9000   PopLocalI32             set_mode

                                                                                                                                                                               1063: 0x4002   Branch                  1066
000342          Else                                                                                                                                                           

000343              normal_mode = False                                                                                                                                        1064: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               1065: 0xA804   PopMemberU8             normal_mode

000344          End If
000345          temp_press_oversample = set_mode | (temp_press_oversample & 0xfc)                                                                                              1066: 0x8800   PushLocalI32            set_mode
                                                                                                                                                                               1067: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1068: 0x80FC   PushConstU10            252 (0x00FC)
                                                                                                                                                                               1069: 0x001F   IntAnd                  
                                                                                                                                                                               1070: 0x002D   IntOr                   
                                                                                                                                                                               1071: 0xA807   PopMemberU8             temp_press_oversample

000346          write8(REGISTER_CONFIG, sample_filter_rate)                                                                                                                    1072: 0x80F5   PushConstU10            245 (0x00F5)
                                                                                                                                                                               1073: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1074: 0x000D   PushMe                  
                                                                                                                                                                               1075: 0x1F74   BranchSubr              1960

000347          write8(REGISTER_CONTROL, temp_press_oversample)                                                                                                                1076: 0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               1077: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1078: 0x000D   PushMe                  
                                                                                                                                                                               1079: 0x1F70   BranchSubr              1960

000348      End Sub                                                                                                                                                            1080: 0x0091   Return                  

000349      
000350      Public Function getMode() As Byte                                                                                                                                  1081: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000351          //returns current mode
000352          Return temp_press_oversample & 0x03                                                                                                                            1082: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1083: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               1084: 0x001F   IntAnd                  
                                                                                                                                                                               1085: 0x0092   ReturnValType           

000353      End Function                                                                                                                                                       1086: 0x0093   Return0                 

000354      
000355      Public Sub setSamplerate(set_sample_rate As Byte)                                                                                                                  1087: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000356          //Controls inactive duration (standby) in normal mode. bits 7,6,5
000357          //000 0.5mS  (0x00)
000358          //001 62.5mS (0x01)
000359          //010 125mS  (0x02)
000360          //011 250mS  (0x03)
000361          //100 500mS  (0x04)
000362          //101 1000mS (default 0x05)
000363          //110 10mS   (0x06)
000364          //111 20mS    (0x07)
000365          
000366          If set_sample_rate > 0x07 Then                                                                                                                                 1088: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1089: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               1090: 0x2C02   BranchLE                1093

000367              set_sample_rate = 0x07                                                                                                                                     1091: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               1092: 0x9000   PopLocalI32             set_sample_rate

000368          End If
000369          sample_filter_rate = (set_sample_rate << 5) | (sample_filter_rate & 0x1f)                                                                                      1093: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1094: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1095: 0x002E   IntShl                  
                                                                                                                                                                               1096: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1097: 0x801F   PushConstU10            31 (0x001F)
                                                                                                                                                                               1098: 0x001F   IntAnd                  
                                                                                                                                                                               1099: 0x002D   IntOr                   
                                                                                                                                                                               1100: 0xA805   PopMemberU8             sample_filter_rate

000370          write8(REGISTER_CONFIG, sample_filter_rate)                                                                                                                    1101: 0x80F5   PushConstU10            245 (0x00F5)
                                                                                                                                                                               1102: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1103: 0x000D   PushMe                  
                                                                                                                                                                               1104: 0x1F57   BranchSubr              1960

000371          write8(REGISTER_CONTROL, temp_press_oversample)                                                                                                                1105: 0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               1106: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1107: 0x000D   PushMe                  
                                                                                                                                                                               1108: 0x1F53   BranchSubr              1960

000372      End Sub                                                                                                                                                            1109: 0x0091   Return                  

000373      
000374      Public Sub setSamplerateValue(set_sample_rate As Float)                                                                                                            1110: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1111: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000375          //Controls inactive duration (standby) in normal mode. value in mS
000376          Dim value As Byte = 0x00
000377          If set_sample_rate <= 0.5 Then                                                                                                                                 1112: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1113: 0x0110   PushConstI32            1056964608 (0x3F000000)
                                                                                                                                                                               1114: 0x0000                           
                                                                                                                                                                               1115: 0x3F00                           
                                                                                                                                                                               1116: 0x003A   FltCmp                  
                                                                                                                                                                               1117: 0x3002   BranchGT                1120

000378              value = 0x00                                                                                                                                               1118: 0x6001   Const0toLocalI32        value

                                                                                                                                                                               1119: 0x4039   Branch                  1177
000379          ElseIf set_sample_rate <= 10.0 Then                                                                                                                            1120: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1121: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                               1122: 0x003A   FltCmp                  
                                                                                                                                                                               1123: 0x3003   BranchGT                1127

000380              value = 0x06                                                                                                                                               1124: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               1125: 0x9001   PopLocalI32             value

                                                                                                                                                                               1126: 0x4032   Branch                  1177
000381          ElseIf set_sample_rate <= 20.0 Then                                                                                                                            1127: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1128: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                               1129: 0x003A   FltCmp                  
                                                                                                                                                                               1130: 0x3003   BranchGT                1134

000382              value = 0x07                                                                                                                                               1131: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               1132: 0x9001   PopLocalI32             value

                                                                                                                                                                               1133: 0x402B   Branch                  1177
000383          ElseIf set_sample_rate <= 62.5 Then                                                                                                                            1134: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1135: 0x0110   PushConstI32            1115291648 (0x427A0000)
                                                                                                                                                                               1136: 0x0000                           
                                                                                                                                                                               1137: 0x427A                           
                                                                                                                                                                               1138: 0x003A   FltCmp                  
                                                                                                                                                                               1139: 0x3002   BranchGT                1142

000384              value = 0x01                                                                                                                                               1140: 0x6401   Const1toLocalI32        value

                                                                                                                                                                               1141: 0x4023   Branch                  1177
000385          ElseIf set_sample_rate <= 125.0 Then                                                                                                                           1142: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1143: 0xEA7D   PushConstFlt            125.0
                                                                                                                                                                               1144: 0x003A   FltCmp                  
                                                                                                                                                                               1145: 0x3002   BranchGT                1148

000386              value = 0x02                                                                                                                                               1146: 0x6801   Const2toLocalI32        value

                                                                                                                                                                               1147: 0x401D   Branch                  1177
000387          ElseIf set_sample_rate <= 250.0 Then                                                                                                                           1148: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1149: 0x0110   PushConstI32            1132068864 (0x437A0000)
                                                                                                                                                                               1150: 0x0000                           
                                                                                                                                                                               1151: 0x437A                           
                                                                                                                                                                               1152: 0x003A   FltCmp                  
                                                                                                                                                                               1153: 0x3003   BranchGT                1157

000388              value = 0x03                                                                                                                                               1154: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               1155: 0x9001   PopLocalI32             value

                                                                                                                                                                               1156: 0x4014   Branch                  1177
000389          ElseIf set_sample_rate <= 500.0 Then                                                                                                                           1157: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1158: 0x0110   PushConstI32            1140457472 (0x43FA0000)
                                                                                                                                                                               1159: 0x0000                           
                                                                                                                                                                               1160: 0x43FA                           
                                                                                                                                                                               1161: 0x003A   FltCmp                  
                                                                                                                                                                               1162: 0x3003   BranchGT                1166

000390              value = 0x04                                                                                                                                               1163: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1164: 0x9001   PopLocalI32             value

                                                                                                                                                                               1165: 0x400B   Branch                  1177
000391          ElseIf set_sample_rate <= 1000.0 Then                                                                                                                          1166: 0x8800   PushLocalI32            set_sample_rate
                                                                                                                                                                               1167: 0x0110   PushConstI32            1148846080 (0x447A0000)
                                                                                                                                                                               1168: 0x0000                           
                                                                                                                                                                               1169: 0x447A                           
                                                                                                                                                                               1170: 0x003A   FltCmp                  
                                                                                                                                                                               1171: 0x3003   BranchGT                1175

000392              value = 0x05                                                                                                                                               1172: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1173: 0x9001   PopLocalI32             value

                                                                                                                                                                               1174: 0x4002   Branch                  1177
000393          Else                                                                                                                                                           

000394              value = 0x05                                                                                                                                               1175: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1176: 0x9001   PopLocalI32             value

000395          End If
000396          setSamplerate(value)                                                                                                                                           1177: 0x8801   PushLocalI32            value
                                                                                                                                                                               1178: 0x000D   PushMe                  
                                                                                                                                                                               1179: 0x545D   BranchSubrBack          1087

000397      End Sub                                                                                                                                                            1180: 0x0091   Return                  

000398      
000399      Public Function getSampleRateValue() As Float                                                                                                                      1181: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               1182: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000400          // returns Sample Rate in mS
000401          Dim sample_rate As Byte = sample_filter_rate >> 5                                                                                                              1183: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1184: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1185: 0x002F   IntShr                  
                                                                                                                                                                               1186: 0x9000   PopLocalI32             sample_rate

000402          Select sample_rate                                                                                                                                             1187: 0x8800   PushLocalI32            sample_rate
                                                                                                                                                                               1188: 0x0122   CaseComputed            
                                                                                                                                                                               1189: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                               1190: 0x0008                           NumberOfCaseEntries=8
                                                                                                                                                                               1191: 0x0032                           CaseElseBranch=1242
                                                                                                                                                                               1192: 0x0000                           CaseValue=0
                                                                                                                                                                               1193: 0x0010                           CaseBranch=1208
                                                                                                                                                                               1194: 0x0001                           CaseValue=1
                                                                                                                                                                               1195: 0x0015                           CaseBranch=1213
                                                                                                                                                                               1196: 0x0002                           CaseValue=2
                                                                                                                                                                               1197: 0x001A                           CaseBranch=1218
                                                                                                                                                                               1198: 0x0003                           CaseValue=3
                                                                                                                                                                               1199: 0x001D                           CaseBranch=1221
                                                                                                                                                                               1200: 0x0004                           CaseValue=4
                                                                                                                                                                               1201: 0x0022                           CaseBranch=1226
                                                                                                                                                                               1202: 0x0005                           CaseValue=5
                                                                                                                                                                               1203: 0x0027                           CaseBranch=1231
                                                                                                                                                                               1204: 0x0006                           CaseValue=6
                                                                                                                                                                               1205: 0x002C                           CaseBranch=1236
                                                                                                                                                                               1206: 0x0007                           CaseValue=7
                                                                                                                                                                               1207: 0x002F                           CaseBranch=1239

000403              Case 0x00
000404                  Return 0.50                                                                                                                                            1208: 0x0110   PushConstI32            1056964608 (0x3F000000)
                                                                                                                                                                               1209: 0x0000                           
                                                                                                                                                                               1210: 0x3F00                           
                                                                                                                                                                               1211: 0x0092   ReturnValType           

                                                                                                                                                                               1212: 0x4021   Branch                  1246
000405              Case 0x01                                                                                                                                                  

000406                  Return 62.50                                                                                                                                           1213: 0x0110   PushConstI32            1115291648 (0x427A0000)
                                                                                                                                                                               1214: 0x0000                           
                                                                                                                                                                               1215: 0x427A                           
                                                                                                                                                                               1216: 0x0092   ReturnValType           

                                                                                                                                                                               1217: 0x401C   Branch                  1246
000407              Case 0x02                                                                                                                                                  

000408                  Return 125.00                                                                                                                                          1218: 0xEA7D   PushConstFlt            125.0
                                                                                                                                                                               1219: 0x0092   ReturnValType           

                                                                                                                                                                               1220: 0x4019   Branch                  1246
000409              Case 0x03                                                                                                                                                  

000410                  Return 250.00                                                                                                                                          1221: 0x0110   PushConstI32            1132068864 (0x437A0000)
                                                                                                                                                                               1222: 0x0000                           
                                                                                                                                                                               1223: 0x437A                           
                                                                                                                                                                               1224: 0x0092   ReturnValType           

                                                                                                                                                                               1225: 0x4014   Branch                  1246
000411              Case 0x04                                                                                                                                                  

000412                  Return 500.00                                                                                                                                          1226: 0x0110   PushConstI32            1140457472 (0x43FA0000)
                                                                                                                                                                               1227: 0x0000                           
                                                                                                                                                                               1228: 0x43FA                           
                                                                                                                                                                               1229: 0x0092   ReturnValType           

                                                                                                                                                                               1230: 0x400F   Branch                  1246
000413              Case 0x05                                                                                                                                                  

000414                  Return 1000.00                                                                                                                                         1231: 0x0110   PushConstI32            1148846080 (0x447A0000)
                                                                                                                                                                               1232: 0x0000                           
                                                                                                                                                                               1233: 0x447A                           
                                                                                                                                                                               1234: 0x0092   ReturnValType           

                                                                                                                                                                               1235: 0x400A   Branch                  1246
000415              Case 0x06                                                                                                                                                  

000416                  Return 10.00                                                                                                                                           1236: 0xEA0A   PushConstFlt            10.0
                                                                                                                                                                               1237: 0x0092   ReturnValType           

                                                                                                                                                                               1238: 0x4007   Branch                  1246
000417              Case 0x07                                                                                                                                                  

000418                  Return 20.00                                                                                                                                           1239: 0xEA14   PushConstFlt            20.0
                                                                                                                                                                               1240: 0x0092   ReturnValType           

                                                                                                                                                                               1241: 0x4004   Branch                  1246
000419              Case Else                                                                                                                                                  

000420                  Return 1000.00 //unknown, but this is default                                                                                                          1242: 0x0110   PushConstI32            1148846080 (0x447A0000)
                                                                                                                                                                               1243: 0x0000                           
                                                                                                                                                                               1244: 0x447A                           
                                                                                                                                                                               1245: 0x0092   ReturnValType           

000421          End Select
000422      End Function                                                                                                                                                       1246: 0x0093   Return0                 

000423      
000424      Public Sub setIIRfilter(set_IIR_filter As Byte)                                                                                                                    1247: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000425          //Controls the time constant of the IIR filter. bits 4,3,2
000426          //000 Filter off (0x00 default)
000427          //001 2 (0x01)
000428          //010 4 (0x02)
000429          //011 8 (0x03)
000430          //100, others 16 (0x04)
000431          sample_time = 0 //reset sample_time so that we calcuate it again                                                                                               1248: 0x7860   Const0toMemberI32       sample_time

000432          If set_IIR_filter > 0x04 Then                                                                                                                                  1249: 0x8800   PushLocalI32            set_IIR_filter
                                                                                                                                                                               1250: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1251: 0x2C02   BranchLE                1254

000433              set_IIR_filter = 0x04                                                                                                                                      1252: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1253: 0x9000   PopLocalI32             set_IIR_filter

000434          End If
000435          sample_filter_rate = (set_IIR_filter << 2) | (sample_filter_rate & 0xe3)                                                                                       1254: 0x8800   PushLocalI32            set_IIR_filter
                                                                                                                                                                               1255: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1256: 0x002E   IntShl                  
                                                                                                                                                                               1257: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1258: 0x80E3   PushConstU10            227 (0x00E3)
                                                                                                                                                                               1259: 0x001F   IntAnd                  
                                                                                                                                                                               1260: 0x002D   IntOr                   
                                                                                                                                                                               1261: 0xA805   PopMemberU8             sample_filter_rate

000436          write8(REGISTER_CONFIG, sample_filter_rate)                                                                                                                    1262: 0x80F5   PushConstU10            245 (0x00F5)
                                                                                                                                                                               1263: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1264: 0x000D   PushMe                  
                                                                                                                                                                               1265: 0x1EB6   BranchSubr              1960

000437          write8(REGISTER_CONTROL, temp_press_oversample)                                                                                                                1266: 0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               1267: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1268: 0x000D   PushMe                  
                                                                                                                                                                               1269: 0x1EB2   BranchSubr              1960

000438      End Sub                                                                                                                                                            1270: 0x0091   Return                  

000439      
000440      Public Sub setIIRfilterValue(set_IIRFilter_oversample As Integer)                                                                                                  1271: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1272: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000441          'value as 0-16 times
000442          Dim Value As Byte = 0x00
000443          Select set_IIRFilter_oversample                                                                                                                                1273: 0x8800   PushLocalI32            set_IIRFilter_oversample
                                                                                                                                                                               1274: 0x0122   CaseComputed            
                                                                                                                                                                               1275: 0x0004                           CaseCommonClass=Integer
                                                                                                                                                                               1276: 0x0005                           NumberOfCaseEntries=5
                                                                                                                                                                               1277: 0x001B                           CaseElseBranch=1305
                                                                                                                                                                               1278: 0x0000                           LSH CaseValue=0
                                                                                                                                                                               1279: 0x0000                           MSH CaseValue=0
                                                                                                                                                                               1280: 0x000F                           CaseBranch=1293
                                                                                                                                                                               1281: 0x0002                           LSH CaseValue=2
                                                                                                                                                                               1282: 0x0000                           MSH CaseValue=2
                                                                                                                                                                               1283: 0x0011                           CaseBranch=1295
                                                                                                                                                                               1284: 0x0004                           LSH CaseValue=4
                                                                                                                                                                               1285: 0x0000                           MSH CaseValue=4
                                                                                                                                                                               1286: 0x0013                           CaseBranch=1297
                                                                                                                                                                               1287: 0x0008                           LSH CaseValue=8
                                                                                                                                                                               1288: 0x0000                           MSH CaseValue=8
                                                                                                                                                                               1289: 0x0015                           CaseBranch=1299
                                                                                                                                                                               1290: 0x0010                           LSH CaseValue=16
                                                                                                                                                                               1291: 0x0000                           MSH CaseValue=16
                                                                                                                                                                               1292: 0x0018                           CaseBranch=1302

000444              Case 0
000445                  Value = IIR_SAMPLING_0                                                                                                                                 1293: 0x6001   Const0toLocalI32        Value

                                                                                                                                                                               1294: 0x400C   Branch                  1307
000446              Case 2                                                                                                                                                     

000447                  Value = IIR_SAMPLING_2                                                                                                                                 1295: 0x6401   Const1toLocalI32        Value

                                                                                                                                                                               1296: 0x400A   Branch                  1307
000448              Case 4                                                                                                                                                     

000449                  Value = IIR_SAMPLING_4                                                                                                                                 1297: 0x6801   Const2toLocalI32        Value

                                                                                                                                                                               1298: 0x4008   Branch                  1307
000450              Case 8                                                                                                                                                     

000451                  Value = IIR_SAMPLING_8                                                                                                                                 1299: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               1300: 0x9001   PopLocalI32             Value

                                                                                                                                                                               1301: 0x4005   Branch                  1307
000452              Case 16                                                                                                                                                    

000453                  Value = IIR_SAMPLING_16                                                                                                                                1302: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1303: 0x9001   PopLocalI32             Value

                                                                                                                                                                               1304: 0x4002   Branch                  1307
000454              Case Else                                                                                                                                                  

000455                  Value = IIR_SAMPLING_16                                                                                                                                1305: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1306: 0x9001   PopLocalI32             Value

000456          End Select
000457          setIIRfilter(Value)                                                                                                                                            1307: 0x8801   PushLocalI32            Value
                                                                                                                                                                               1308: 0x000D   PushMe                  
                                                                                                                                                                               1309: 0x543F   BranchSubrBack          1247

000458      End Sub                                                                                                                                                            1310: 0x0091   Return                  

000459      
000460      Public Function getIIRFilterValue() As Integer                                                                                                                     1311: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               1312: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000461          // returns IIRFilter value (not byte)
000462          Dim IIRFilter As Byte = (sample_filter_rate >> 2) & 0x07                                                                                                       1313: 0x9805   PushMemberU8            sample_filter_rate
                                                                                                                                                                               1314: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1315: 0x002F   IntShr                  
                                                                                                                                                                               1316: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               1317: 0x001F   IntAnd                  
                                                                                                                                                                               1318: 0x9000   PopLocalI32             IIRFilter

000463          Select IIRFilter                                                                                                                                               1319: 0x8800   PushLocalI32            IIRFilter
                                                                                                                                                                               1320: 0x0122   CaseComputed            
                                                                                                                                                                               1321: 0x0002                           CaseCommonClass=Byte
                                                                                                                                                                               1322: 0x0005                           NumberOfCaseEntries=5
                                                                                                                                                                               1323: 0x0018                           CaseElseBranch=1348
                                                                                                                                                                               1324: 0x0000                           CaseValue=0
                                                                                                                                                                               1325: 0x000A                           CaseBranch=1334
                                                                                                                                                                               1326: 0x0001                           CaseValue=1
                                                                                                                                                                               1327: 0x000C                           CaseBranch=1336
                                                                                                                                                                               1328: 0x0002                           CaseValue=2
                                                                                                                                                                               1329: 0x000F                           CaseBranch=1339
                                                                                                                                                                               1330: 0x0003                           CaseValue=3
                                                                                                                                                                               1331: 0x0012                           CaseBranch=1342
                                                                                                                                                                               1332: 0x0004                           CaseValue=4
                                                                                                                                                                               1333: 0x0015                           CaseBranch=1345

000464              Case IIR_SAMPLING_0
000465                  Return 0                                                                                                                                               1334: 0x0093   Return0                 

                                                                                                                                                                               1335: 0x400E   Branch                  1350
000466              Case IIR_SAMPLING_2                                                                                                                                        

000467                  Return 2                                                                                                                                               1336: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1337: 0x0092   ReturnValType           

                                                                                                                                                                               1338: 0x400B   Branch                  1350
000468              Case IIR_SAMPLING_4                                                                                                                                        

000469                  Return 4                                                                                                                                               1339: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1340: 0x0092   ReturnValType           

                                                                                                                                                                               1341: 0x4008   Branch                  1350
000470              Case IIR_SAMPLING_8                                                                                                                                        

000471                  Return 8                                                                                                                                               1342: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               1343: 0x0092   ReturnValType           

                                                                                                                                                                               1344: 0x4005   Branch                  1350
000472              Case IIR_SAMPLING_16                                                                                                                                       

000473                  Return 16                                                                                                                                              1345: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               1346: 0x0092   ReturnValType           

                                                                                                                                                                               1347: 0x4002   Branch                  1350
000474              Case Else                                                                                                                                                  

000475                  Return 16                                                                                                                                              1348: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               1349: 0x0092   ReturnValType           

000476          End Select
000477      End Function                                                                                                                                                       1350: 0x0093   Return0                 

000478      
000479      Public Function getConversionTime() As Integer                                                                                                                     1351: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000480          // Returns conversion time in uS
000481          // normally this will be a few ms (about 69 depending on sampling), but worst case is 2.156 seconds!
000482          // See appendix B of DS for equation
000483          If sample_time <> 0 Then                                                                                                                                       1352: 0xA060   PushMemberI32           sample_time
                                                                                                                                                                               1353: 0x3C03   BranchFalse             1357

000484              Return sample_time //if sample_time has already been calculated, just return it                                                                            1354: 0xA060   PushMemberI32           sample_time
                                                                                                                                                                               1355: 0x0092   ReturnValType           

                                                                                                                                                                               1356: 0x4065   Branch                  1458
000485          Else                                                                                                                                                           1357: 0xE0A0   AllocateStackSpace      ValTypeSize=5, RefTypeSize=0

000486              //calculate sample time, and save it
000487              Dim IIRFilter As Integer = getIIRFilterValue()                                                                                                             1358: 0x000D   PushMe                  
                                                                                                                                                                               1359: 0x5431   BranchSubrBack          1311
                                                                                                                                                                               1360: 0x9000   PopLocalI32             IIRFilter

000488              Dim Temp_Sample_Time As Float = 2 * getTemperaturesamplingValue()                                                                                          1361: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1362: 0x000D   PushMe                  
                                                                                                                                                                               1363: 0x556C   BranchSubrBack          1000
                                                                                                                                                                               1364: 0x002A   IntMul                  
                                                                                                                                                                               1365: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1366: 0x9001   PopLocalI32             Temp_Sample_Time

000489              Dim Press_Sample_Time As Float = 2 * getPressuresamplingValue()                                                                                            1367: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1368: 0x000D   PushMe                  
                                                                                                                                                                               1369: 0x5546   BranchSubrBack          1044
                                                                                                                                                                               1370: 0x002A   IntMul                  
                                                                                                                                                                               1371: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1372: 0x9002   PopLocalI32             Press_Sample_Time

000490              If Press_Sample_Time <> 0 Then                                                                                                                             1373: 0x8802   PushLocalI32            Press_Sample_Time
                                                                                                                                                                               1374: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               1375: 0x003A   FltCmp                  
                                                                                                                                                                               1376: 0x2006   BranchEQ                1383

000491                  Press_Sample_Time += 0.5                                                                                                                               1377: 0x8802   PushLocalI32            Press_Sample_Time
                                                                                                                                                                               1378: 0x0110   PushConstI32            1056964608 (0x3F000000)
                                                                                                                                                                               1379: 0x0000                           
                                                                                                                                                                               1380: 0x3F00                           
                                                                                                                                                                               1381: 0x0039   FltAdd                  
                                                                                                                                                                               1382: 0x9002   PopLocalI32             Press_Sample_Time

000492              End If
000493              Dim Humid_Sample_Time As Float = 2 * getHumiditysamplingValue()                                                                                            1383: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1384: 0x000D   PushMe                  
                                                                                                                                                                               1385: 0x55AA   BranchSubrBack          960
                                                                                                                                                                               1386: 0x002A   IntMul                  
                                                                                                                                                                               1387: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1388: 0x9003   PopLocalI32             Humid_Sample_Time

000494              If Humid_Sample_Time <> 0 Then                                                                                                                             1389: 0x8803   PushLocalI32            Humid_Sample_Time
                                                                                                                                                                               1390: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               1391: 0x003A   FltCmp                  
                                                                                                                                                                               1392: 0x2006   BranchEQ                1399

000495                  Humid_Sample_Time += 0.5                                                                                                                               1393: 0x8803   PushLocalI32            Humid_Sample_Time
                                                                                                                                                                               1394: 0x0110   PushConstI32            1056964608 (0x3F000000)
                                                                                                                                                                               1395: 0x0000                           
                                                                                                                                                                               1396: 0x3F00                           
                                                                                                                                                                               1397: 0x0039   FltAdd                  
                                                                                                                                                                               1398: 0x9003   PopLocalI32             Humid_Sample_Time

000496              End If
000497              Dim conversion_time As Integer = ((1 + Temp_Sample_Time + Press_Sample_Time + Humid_Sample_Time) * 1000).ToInteger                                         1399: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               1400: 0x8801   PushLocalI32            Temp_Sample_Time
                                                                                                                                                                               1401: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1402: 0x0039   FltAdd                  
                                                                                                                                                                               1403: 0x8802   PushLocalI32            Press_Sample_Time
                                                                                                                                                                               1404: 0x0039   FltAdd                  
                                                                                                                                                                               1405: 0x8803   PushLocalI32            Humid_Sample_Time
                                                                                                                                                                               1406: 0x0039   FltAdd                  
                                                                                                                                                                               1407: 0x83E8   PushConstU10            1000 (0x03E8)
                                                                                                                                                                               1408: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1409: 0x003C   FltMul                  
                                                                                                                                                                               1410: 0x007B   CvtFltToInt             
                                                                                                                                                                               1411: 0x9004   PopLocalI32             conversion_time

000498              Select IIRFilter                                                                                                                                           1412: 0x8800   PushLocalI32            IIRFilter
                                                                                                                                                                               1413: 0x0122   CaseComputed            
                                                                                                                                                                               1414: 0x0004                           CaseCommonClass=Integer
                                                                                                                                                                               1415: 0x0005                           NumberOfCaseEntries=5
                                                                                                                                                                               1416: 0x0026                           CaseElseBranch=1455
                                                                                                                                                                               1417: 0x0000                           LSH CaseValue=0
                                                                                                                                                                               1418: 0x0000                           MSH CaseValue=0
                                                                                                                                                                               1419: 0x000F                           CaseBranch=1432
                                                                                                                                                                               1420: 0x0002                           LSH CaseValue=2
                                                                                                                                                                               1421: 0x0000                           MSH CaseValue=2
                                                                                                                                                                               1422: 0x0012                           CaseBranch=1435
                                                                                                                                                                               1423: 0x0004                           LSH CaseValue=4
                                                                                                                                                                               1424: 0x0000                           MSH CaseValue=4
                                                                                                                                                                               1425: 0x0017                           CaseBranch=1440
                                                                                                                                                                               1426: 0x0008                           LSH CaseValue=8
                                                                                                                                                                               1427: 0x0000                           MSH CaseValue=8
                                                                                                                                                                               1428: 0x001C                           CaseBranch=1445
                                                                                                                                                                               1429: 0x0010                           LSH CaseValue=16
                                                                                                                                                                               1430: 0x0000                           MSH CaseValue=16
                                                                                                                                                                               1431: 0x0021                           CaseBranch=1450

000499                  Case 0
000500                      sample_time = conversion_time                                                                                                                      1432: 0x8804   PushLocalI32            conversion_time
                                                                                                                                                                               1433: 0xB060   PopMemberI32            sample_time

                                                                                                                                                                               1434: 0x4016   Branch                  1457
000501                  Case 2                                                                                                                                                 

000502                      sample_time = 2 * conversion_time                                                                                                                  1435: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1436: 0x8804   PushLocalI32            conversion_time
                                                                                                                                                                               1437: 0x002A   IntMul                  
                                                                                                                                                                               1438: 0xB060   PopMemberI32            sample_time

                                                                                                                                                                               1439: 0x4011   Branch                  1457
000503                  Case 4                                                                                                                                                 

000504                      sample_time = 5 * conversion_time                                                                                                                  1440: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               1441: 0x8804   PushLocalI32            conversion_time
                                                                                                                                                                               1442: 0x002A   IntMul                  
                                                                                                                                                                               1443: 0xB060   PopMemberI32            sample_time

                                                                                                                                                                               1444: 0x400C   Branch                  1457
000505                  Case 8                                                                                                                                                 

000506                      sample_time = 11 * conversion_time                                                                                                                 1445: 0x800B   PushConstU10            11 (0x000B)
                                                                                                                                                                               1446: 0x8804   PushLocalI32            conversion_time
                                                                                                                                                                               1447: 0x002A   IntMul                  
                                                                                                                                                                               1448: 0xB060   PopMemberI32            sample_time

                                                                                                                                                                               1449: 0x4007   Branch                  1457
000507                  Case 16                                                                                                                                                

000508                      sample_time = 22 * conversion_time                                                                                                                 1450: 0x8016   PushConstU10            22 (0x0016)
                                                                                                                                                                               1451: 0x8804   PushLocalI32            conversion_time
                                                                                                                                                                               1452: 0x002A   IntMul                  
                                                                                                                                                                               1453: 0xB060   PopMemberI32            sample_time

                                                                                                                                                                               1454: 0x4002   Branch                  1457
000509                  Case Else                                                                                                                                              

000510                      sample_time = conversion_time                                                                                                                      1455: 0x8804   PushLocalI32            conversion_time
                                                                                                                                                                               1456: 0xB060   PopMemberI32            sample_time

000511              End Select
                                                                                                                                                                               1457: 0xE4A0   FreeStackSpace          ValTypeSize=5, RefTypeSize=0
000512          End If                                                                                                                                                         

000513          Return sample_time                                                                                                                                             1458: 0xA060   PushMemberI32           sample_time
                                                                                                                                                                               1459: 0x0092   ReturnValType           

000514      End Function                                                                                                                                                       1460: 0x0093   Return0                 

000515      
000516      Public Sub TakeReading()                                                                                                                                           1461: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               1462: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000517          Dim conversion_time As Integer = getConversionTime()                                                                                                           1463: 0x000D   PushMe                  
                                                                                                                                                                               1464: 0x5472   BranchSubrBack          1351
                                                                                                                                                                               1465: 0x9000   PopLocalI32             conversion_time

000518          If Device.GetTimeSpan() > conversion_time Then //if time since last run is more than conversion time, take new reading                                         1466: 0x00FB   DeviceGetTimeSpan       
                                                                                                                                                                               1467: 0x8800   PushLocalI32            conversion_time
                                                                                                                                                                               1468: 0x2C07   BranchLE                1476

000519              write8(REGISTER_CONTROL, temp_press_oversample) //take reading                                                                                             1469: 0x80F4   PushConstU10            244 (0x00F4)
                                                                                                                                                                               1470: 0x9807   PushMemberU8            temp_press_oversample
                                                                                                                                                                               1471: 0x000D   PushMe                  
                                                                                                                                                                               1472: 0x1DE7   BranchSubr              1960

000520              Thread.Sleep(conversion_time) // wait ConversionTime for reading                                                                                           1473: 0x8800   PushLocalI32            conversion_time
                                                                                                                                                                               1474: 0x00D5   ThreadSleep             
                                                                                                                                                                               1475: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000521          End If
000522      End Sub                                                                                                                                                            1476: 0x0091   Return                  

000523      
000524      //================ Read Temp/Humidity/Pressure Functions ==============//
000525      
000526      Public Function readTemperature() As Float                                                                                                                         1477: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000527          //uses 20 bit unsigned int Typical raw result = Temperature_raw 535189
000528          //returns temperature in degrees C
000529          If online = False Then                                                                                                                                         1478: 0x9808   PushMemberU8            online
                                                                                                                                                                               1479: 0x3801   BranchTrue              1481

000530              Return 0                                                                                                                                                   1480: 0x0093   Return0                 

000531          End If
000532          
000533          If normal_mode = False Then                                                                                                                                    1481: 0x9804   PushMemberU8            normal_mode
                                                                                                                                                                               1482: 0x3802   BranchTrue              1485

000534              TakeReading()                                                                                                                                              1483: 0x000D   PushMe                  
                                                                                                                                                                               1484: 0x5418   BranchSubrBack          1461

000535          End If
000536          
000537          readall()                                                                                                                                                      1485: 0x000D   PushMe                  
                                                                                                                                                                               1486: 0x1E91   BranchSubr              2144

000538          
000539          Return BME280_compensate_T_double(temperature_raw >> 4)                                                                                                        1487: 0xA054   PushMemberI32           temperature_raw
                                                                                                                                                                               1488: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1489: 0x002F   IntShr                  
                                                                                                                                                                               1490: 0x000D   PushMe                  
                                                                                                                                                                               1491: 0x1C10   BranchSubr              1508
                                                                                                                                                                               1492: 0x0092   ReturnValType           

000540      End Function                                                                                                                                                       1493: 0x0093   Return0                 

000541      
000542      Public Function readTemperatureF() As Float                                                                                                                        1494: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000543          //returns temperature in degrees F
000544          If online = False Then                                                                                                                                         1495: 0x9808   PushMemberU8            online
                                                                                                                                                                               1496: 0x3801   BranchTrue              1498

000545              Return 0                                                                                                                                                   1497: 0x0093   Return0                 

000546          End If    
000547          Return ((readTemperature() * 9) / 5) + 32                                                                                                                      1498: 0x000D   PushMe                  
                                                                                                                                                                               1499: 0x5417   BranchSubrBack          1477
                                                                                                                                                                               1500: 0xEA09   PushConstFlt            9.0
                                                                                                                                                                               1501: 0x003C   FltMul                  
                                                                                                                                                                               1502: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                               1503: 0x003B   FltDiv                  
                                                                                                                                                                               1504: 0xEA20   PushConstFlt            32.0
                                                                                                                                                                               1505: 0x0039   FltAdd                  
                                                                                                                                                                               1506: 0x0092   ReturnValType           

000548      End Function                                                                                                                                                       1507: 0x0093   Return0                 

000549      
000550      Public Function BME280_compensate_T_double(adc_T As Integer) As Float                                                                                              1508: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1509: 0xE060   AllocateStackSpace      ValTypeSize=3, RefTypeSize=0

000551          // Returns temperature in DegC, double precision. Output value of 51.23 equals 51.23 DegC.
000552          // t_fine carries fine temperature as global value
000553          
000554          Dim var1 As Float
000555          Dim var2 As Float
000556          Dim T As Float
000557          
000558          var1 = (adc_T / 16384.0 - dig_T1 / 1024.0) * dig_T2                                                                                                            1510: 0x8800   PushLocalI32            adc_T
                                                                                                                                                                               1511: 0x0110   PushConstI32            1182793728 (0x46800000)
                                                                                                                                                                               1512: 0x0000                           
                                                                                                                                                                               1513: 0x4680                           
                                                                                                                                                                               1514: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1515: 0x003B   FltDiv                  
                                                                                                                                                                               1516: 0xA00C   PushMemberI32           dig_T1
                                                                                                                                                                               1517: 0x0110   PushConstI32            1149239296 (0x44800000)
                                                                                                                                                                               1518: 0x0000                           
                                                                                                                                                                               1519: 0x4480                           
                                                                                                                                                                               1520: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1521: 0x003B   FltDiv                  
                                                                                                                                                                               1522: 0x003F   FltSub                  
                                                                                                                                                                               1523: 0xA010   PushMemberI32           dig_T2
                                                                                                                                                                               1524: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1525: 0x003C   FltMul                  
                                                                                                                                                                               1526: 0x9001   PopLocalI32             var1

000559          var2 = ((adc_T / 131072.0 - dig_T1 / 8192.0) * (adc_T / 131072.0 - dig_T1 / 8192.0)) * dig_T3                                                                  1527: 0x8800   PushLocalI32            adc_T
                                                                                                                                                                               1528: 0x0110   PushConstI32            1207959552 (0x48000000)
                                                                                                                                                                               1529: 0x0000                           
                                                                                                                                                                               1530: 0x4800                           
                                                                                                                                                                               1531: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1532: 0x003B   FltDiv                  
                                                                                                                                                                               1533: 0xA00C   PushMemberI32           dig_T1
                                                                                                                                                                               1534: 0x0110   PushConstI32            1174405120 (0x46000000)
                                                                                                                                                                               1535: 0x0000                           
                                                                                                                                                                               1536: 0x4600                           
                                                                                                                                                                               1537: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1538: 0x003B   FltDiv                  
                                                                                                                                                                               1539: 0x003F   FltSub                  
                                                                                                                                                                               1540: 0x8800   PushLocalI32            adc_T
                                                                                                                                                                               1541: 0x0110   PushConstI32            1207959552 (0x48000000)
                                                                                                                                                                               1542: 0x0000                           
                                                                                                                                                                               1543: 0x4800                           
                                                                                                                                                                               1544: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1545: 0x003B   FltDiv                  
                                                                                                                                                                               1546: 0xA00C   PushMemberI32           dig_T1
                                                                                                                                                                               1547: 0x0110   PushConstI32            1174405120 (0x46000000)
                                                                                                                                                                               1548: 0x0000                           
                                                                                                                                                                               1549: 0x4600                           
                                                                                                                                                                               1550: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1551: 0x003B   FltDiv                  
                                                                                                                                                                               1552: 0x003F   FltSub                  
                                                                                                                                                                               1553: 0x003C   FltMul                  
                                                                                                                                                                               1554: 0xA014   PushMemberI32           dig_T3
                                                                                                                                                                               1555: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1556: 0x003C   FltMul                  
                                                                                                                                                                               1557: 0x9002   PopLocalI32             var2

000560          t_fine = (var1 + var2).ToInteger()                                                                                                                             1558: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1559: 0x8802   PushLocalI32            var2
                                                                                                                                                                               1560: 0x0039   FltAdd                  
                                                                                                                                                                               1561: 0x007B   CvtFltToInt             
                                                                                                                                                                               1562: 0xB064   PopMemberI32            t_fine

000561          T = (var1 + var2) / 5120.0                                                                                                                                     1563: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1564: 0x8802   PushLocalI32            var2
                                                                                                                                                                               1565: 0x0039   FltAdd                  
                                                                                                                                                                               1566: 0x0110   PushConstI32            1168113664 (0x45A00000)
                                                                                                                                                                               1567: 0x0000                           
                                                                                                                                                                               1568: 0x45A0                           
                                                                                                                                                                               1569: 0x003B   FltDiv                  
                                                                                                                                                                               1570: 0x9003   PopLocalI32             T

000562          Return T                                                                                                                                                       1571: 0x8803   PushLocalI32            T
                                                                                                                                                                               1572: 0x0092   ReturnValType           

000563      End Function                                                                                                                                                       1573: 0x0093   Return0                 

000564      
000565      Public Function readPressure() As Float                                                                                                                            1574: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000566          //uses 20 bit unsigned int Typical raw result = Pressure_raw 321916
000567          If online = False Then                                                                                                                                         1575: 0x9808   PushMemberU8            online
                                                                                                                                                                               1576: 0x3801   BranchTrue              1578

000568              Return 0                                                                                                                                                   1577: 0x0093   Return0                 

000569          End If
000570          
000571          readTemperature() // must be done first to get t_fine                                                                                                          1578: 0x000D   PushMe                  
                                                                                                                                                                               1579: 0x5467   BranchSubrBack          1477
                                                                                                                                                                               1580: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000572          
000573          Return BME280_compensate_P_double(pressure_raw >> 4)                                                                                                           1581: 0xA058   PushMemberI32           pressure_raw
                                                                                                                                                                               1582: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               1583: 0x002F   IntShr                  
                                                                                                                                                                               1584: 0x000D   PushMe                  
                                                                                                                                                                               1585: 0x1C02   BranchSubr              1588
                                                                                                                                                                               1586: 0x0092   ReturnValType           

000574      End Function                                                                                                                                                       1587: 0x0093   Return0                 

000575      
000576      Public Function BME280_compensate_P_double(adc_P As Integer) As Float                                                                                              1588: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1589: 0xE060   AllocateStackSpace      ValTypeSize=3, RefTypeSize=0

000577          // Returns pressure in Pa as unsigned 32 bit integer. Output value of 96386 equals 96386 Pa = 963.86 hPa (mBar)
000578          Dim var1 As Float 
000579          Dim var2 As Float 
000580          Dim p As Float
000581          var1 = t_fine / 2 - 64000.0                                                                                                                                    1590: 0xA064   PushMemberI32           t_fine
                                                                                                                                                                               1591: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1592: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1593: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1594: 0x003B   FltDiv                  
                                                                                                                                                                               1595: 0x0110   PushConstI32            1199177728 (0x477A0000)
                                                                                                                                                                               1596: 0x0000                           
                                                                                                                                                                               1597: 0x477A                           
                                                                                                                                                                               1598: 0x003F   FltSub                  
                                                                                                                                                                               1599: 0x9001   PopLocalI32             var1

000582          var2 = var1 * var1 * dig_P6 / 32768.0                                                                                                                          1600: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1601: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1602: 0x003C   FltMul                  
                                                                                                                                                                               1603: 0xA02C   PushMemberI32           dig_P6
                                                                                                                                                                               1604: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1605: 0x003C   FltMul                  
                                                                                                                                                                               1606: 0x0110   PushConstI32            1191182336 (0x47000000)
                                                                                                                                                                               1607: 0x0000                           
                                                                                                                                                                               1608: 0x4700                           
                                                                                                                                                                               1609: 0x003B   FltDiv                  
                                                                                                                                                                               1610: 0x9002   PopLocalI32             var2

000583          var2 = var2 + var1 * dig_P5 * 2.0                                                                                                                              1611: 0x8802   PushLocalI32            var2
                                                                                                                                                                               1612: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1613: 0xA028   PushMemberI32           dig_P5
                                                                                                                                                                               1614: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1615: 0x003C   FltMul                  
                                                                                                                                                                               1616: 0xE91E   PushConstBit            1<<30  (0x40000000 Or 1073741824)
                                                                                                                                                                               1617: 0x003C   FltMul                  
                                                                                                                                                                               1618: 0x0039   FltAdd                  
                                                                                                                                                                               1619: 0x9002   PopLocalI32             var2

000584          var2 = (var2 / 4.0) + (dig_P4 * 65536.0)                                                                                                                       1620: 0x8802   PushLocalI32            var2
                                                                                                                                                                               1621: 0xEA04   PushConstFlt            4.0
                                                                                                                                                                               1622: 0x003B   FltDiv                  
                                                                                                                                                                               1623: 0xA024   PushMemberI32           dig_P4
                                                                                                                                                                               1624: 0x0110   PushConstI32            1199570944 (0x47800000)
                                                                                                                                                                               1625: 0x0000                           
                                                                                                                                                                               1626: 0x4780                           
                                                                                                                                                                               1627: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1628: 0x003C   FltMul                  
                                                                                                                                                                               1629: 0x0039   FltAdd                  
                                                                                                                                                                               1630: 0x9002   PopLocalI32             var2

000585          var1 = (dig_P3 * var1 * var1 / 524288.0 + dig_P2 * var1) / 524288.0                                                                                            1631: 0xA020   PushMemberI32           dig_P3
                                                                                                                                                                               1632: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1633: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1634: 0x003C   FltMul                  
                                                                                                                                                                               1635: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1636: 0x003C   FltMul                  
                                                                                                                                                                               1637: 0x0110   PushConstI32            1224736768 (0x49000000)
                                                                                                                                                                               1638: 0x0000                           
                                                                                                                                                                               1639: 0x4900                           
                                                                                                                                                                               1640: 0x003B   FltDiv                  
                                                                                                                                                                               1641: 0xA01C   PushMemberI32           dig_P2
                                                                                                                                                                               1642: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1643: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1644: 0x003C   FltMul                  
                                                                                                                                                                               1645: 0x0039   FltAdd                  
                                                                                                                                                                               1646: 0x0110   PushConstI32            1224736768 (0x49000000)
                                                                                                                                                                               1647: 0x0000                           
                                                                                                                                                                               1648: 0x4900                           
                                                                                                                                                                               1649: 0x003B   FltDiv                  
                                                                                                                                                                               1650: 0x9001   PopLocalI32             var1

000586          var1 = (1.0 + var1 / 32768.0) * dig_P1                                                                                                                         1651: 0xEA01   PushConstFlt            1.0
                                                                                                                                                                               1652: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1653: 0x0110   PushConstI32            1191182336 (0x47000000)
                                                                                                                                                                               1654: 0x0000                           
                                                                                                                                                                               1655: 0x4700                           
                                                                                                                                                                               1656: 0x003B   FltDiv                  
                                                                                                                                                                               1657: 0x0039   FltAdd                  
                                                                                                                                                                               1658: 0xA018   PushMemberI32           dig_P1
                                                                                                                                                                               1659: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1660: 0x003C   FltMul                  
                                                                                                                                                                               1661: 0x9001   PopLocalI32             var1

000587          If (var1 = 0.0) Then                                                                                                                                           1662: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1663: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               1664: 0x003A   FltCmp                  
                                                                                                                                                                               1665: 0x2401   BranchNE                1667

000588              Return 0 // avoid exception caused by division by zero                                                                                                     1666: 0x0093   Return0                 

000589          End If
000590          p = 1048576.0 - adc_P                                                                                                                                          1667: 0x0110   PushConstI32            1233125376 (0x49800000)
                                                                                                                                                                               1668: 0x0000                           
                                                                                                                                                                               1669: 0x4980                           
                                                                                                                                                                               1670: 0x8800   PushLocalI32            adc_P
                                                                                                                                                                               1671: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1672: 0x003F   FltSub                  
                                                                                                                                                                               1673: 0x9003   PopLocalI32             p

000591          p = (p - (var2 / 4096.0)) * 6250.0 / var1                                                                                                                      1674: 0x8803   PushLocalI32            p
                                                                                                                                                                               1675: 0x8802   PushLocalI32            var2
                                                                                                                                                                               1676: 0x0110   PushConstI32            1166016512 (0x45800000)
                                                                                                                                                                               1677: 0x0000                           
                                                                                                                                                                               1678: 0x4580                           
                                                                                                                                                                               1679: 0x003B   FltDiv                  
                                                                                                                                                                               1680: 0x003F   FltSub                  
                                                                                                                                                                               1681: 0x0110   PushConstI32            1170427904 (0x45C35000)
                                                                                                                                                                               1682: 0x5000                           
                                                                                                                                                                               1683: 0x45C3                           
                                                                                                                                                                               1684: 0x003C   FltMul                  
                                                                                                                                                                               1685: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1686: 0x003B   FltDiv                  
                                                                                                                                                                               1687: 0x9003   PopLocalI32             p

000592          var1 = dig_P9 * p * p / 2147483648.0                                                                                                                           1688: 0xA038   PushMemberI32           dig_P9
                                                                                                                                                                               1689: 0x8803   PushLocalI32            p
                                                                                                                                                                               1690: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1691: 0x003C   FltMul                  
                                                                                                                                                                               1692: 0x8803   PushLocalI32            p
                                                                                                                                                                               1693: 0x003C   FltMul                  
                                                                                                                                                                               1694: 0x0110   PushConstI32            1325400064 (0x4F000000)
                                                                                                                                                                               1695: 0x0000                           
                                                                                                                                                                               1696: 0x4F00                           
                                                                                                                                                                               1697: 0x003B   FltDiv                  
                                                                                                                                                                               1698: 0x9001   PopLocalI32             var1

000593          var2 = p * dig_P8 / 32768.0                                                                                                                                    1699: 0x8803   PushLocalI32            p
                                                                                                                                                                               1700: 0xA034   PushMemberI32           dig_P8
                                                                                                                                                                               1701: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1702: 0x003C   FltMul                  
                                                                                                                                                                               1703: 0x0110   PushConstI32            1191182336 (0x47000000)
                                                                                                                                                                               1704: 0x0000                           
                                                                                                                                                                               1705: 0x4700                           
                                                                                                                                                                               1706: 0x003B   FltDiv                  
                                                                                                                                                                               1707: 0x9002   PopLocalI32             var2

000594          p = p + (var1 + var2 + dig_P7) / 16.0                                                                                                                          1708: 0x8803   PushLocalI32            p
                                                                                                                                                                               1709: 0x8801   PushLocalI32            var1
                                                                                                                                                                               1710: 0x8802   PushLocalI32            var2
                                                                                                                                                                               1711: 0x0039   FltAdd                  
                                                                                                                                                                               1712: 0xA030   PushMemberI32           dig_P7
                                                                                                                                                                               1713: 0x007E   CvtIntToFlt             
                                                                                                                                                                               1714: 0x0039   FltAdd                  
                                                                                                                                                                               1715: 0xEA10   PushConstFlt            16.0
                                                                                                                                                                               1716: 0x003B   FltDiv                  
                                                                                                                                                                               1717: 0x0039   FltAdd                  
                                                                                                                                                                               1718: 0x9003   PopLocalI32             p

000595          Return p / 100                                                                                                                                                 1719: 0x8803   PushLocalI32            p
                                                                                                                                                                               1720: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                               1721: 0x003B   FltDiv                  
                                                                                                                                                                               1722: 0x0092   ReturnValType           

000596      End Function                                                                                                                                                       1723: 0x0093   Return0                 

000597      
000598      Public Function readHumidity() As Float                                                                                                                            1724: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000599          //uses 16 bit unsigned int Typical raw result = Humidity_raw 27991
000600          If online = False Then                                                                                                                                         1725: 0x9808   PushMemberU8            online
                                                                                                                                                                               1726: 0x3801   BranchTrue              1728

000601              Return 0                                                                                                                                                   1727: 0x0093   Return0                 

000602          End If
000603          
000604          readTemperature() // must be done first to get t_fine                                                                                                          1728: 0x000D   PushMe                  
                                                                                                                                                                               1729: 0x54FD   BranchSubrBack          1477
                                                                                                                                                                               1730: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000605          
000606          Return bme280_compensate_H_double(humidity_raw)                                                                                                                1731: 0xA05C   PushMemberI32           humidity_raw
                                                                                                                                                                               1732: 0x000D   PushMe                  
                                                                                                                                                                               1733: 0x1C02   BranchSubr              1736
                                                                                                                                                                               1734: 0x0092   ReturnValType           

000607      End Function                                                                                                                                                       1735: 0x0093   Return0                 

000608      
000609      
000610      Public Function bme280_compensate_H_double(adc_H As Integer) As Float                                                                                              1736: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1737: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000611          // Returns humidity in %rH as as double. Output value of 46.332 represents 46.332 %rH
000612          
000613          Dim var_H As Float
000614          var_H = t_fine - 76800.0                                                                                                                                       1738: 0xA064   PushMemberI32           t_fine
                                                                                                                                                                               1739: 0x0110   PushConstI32            1201012736 (0x47960000)
                                                                                                                                                                               1740: 0x0000                           
                                                                                                                                                                               1741: 0x4796                           
                                                                                                                                                                               1742: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1743: 0x003F   FltSub                  
                                                                                                                                                                               1744: 0x9001   PopLocalI32             var_H

000615          var_H = (adc_H - (dig_H4 * 64.0 + dig_H5 / 16384.0 * var_H)) * (dig_H2 / 65536.0 * (1.0 + dig_H6 / 67108864.0 * var_H * (1.0 + dig_H3 / 67108864.0 * var_H)))  1745: 0x8800   PushLocalI32            adc_H
                                                                                                                                                                               1746: 0xA048   PushMemberI32           dig_H4
                                                                                                                                                                               1747: 0xEA40   PushConstFlt            64.0
                                                                                                                                                                               1748: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1749: 0x003C   FltMul                  
                                                                                                                                                                               1750: 0xA04C   PushMemberI32           dig_H5
                                                                                                                                                                               1751: 0x0110   PushConstI32            1182793728 (0x46800000)
                                                                                                                                                                               1752: 0x0000                           
                                                                                                                                                                               1753: 0x4680                           
                                                                                                                                                                               1754: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1755: 0x003B   FltDiv                  
                                                                                                                                                                               1756: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1757: 0x003C   FltMul                  
                                                                                                                                                                               1758: 0x0039   FltAdd                  
                                                                                                                                                                               1759: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1760: 0x003F   FltSub                  
                                                                                                                                                                               1761: 0xA040   PushMemberI32           dig_H2
                                                                                                                                                                               1762: 0x0110   PushConstI32            1199570944 (0x47800000)
                                                                                                                                                                               1763: 0x0000                           
                                                                                                                                                                               1764: 0x4780                           
                                                                                                                                                                               1765: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1766: 0x003B   FltDiv                  
                                                                                                                                                                               1767: 0xEA01   PushConstFlt            1.0
                                                                                                                                                                               1768: 0xA050   PushMemberI32           dig_H6
                                                                                                                                                                               1769: 0x0110   PushConstI32            1283457024 (0x4C800000)
                                                                                                                                                                               1770: 0x0000                           
                                                                                                                                                                               1771: 0x4C80                           
                                                                                                                                                                               1772: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1773: 0x003B   FltDiv                  
                                                                                                                                                                               1774: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1775: 0x003C   FltMul                  
                                                                                                                                                                               1776: 0xEA01   PushConstFlt            1.0
                                                                                                                                                                               1777: 0xA044   PushMemberI32           dig_H3
                                                                                                                                                                               1778: 0x0110   PushConstI32            1283457024 (0x4C800000)
                                                                                                                                                                               1779: 0x0000                           
                                                                                                                                                                               1780: 0x4C80                           
                                                                                                                                                                               1781: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1782: 0x003B   FltDiv                  
                                                                                                                                                                               1783: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1784: 0x003C   FltMul                  
                                                                                                                                                                               1785: 0x0039   FltAdd                  
                                                                                                                                                                               1786: 0x003C   FltMul                  
                                                                                                                                                                               1787: 0x0039   FltAdd                  
                                                                                                                                                                               1788: 0x003C   FltMul                  
                                                                                                                                                                               1789: 0x003C   FltMul                  
                                                                                                                                                                               1790: 0x9001   PopLocalI32             var_H

000616          var_H = var_H * (1.0 - dig_H1 * var_H / 524288.0)                                                                                                              1791: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1792: 0xEA01   PushConstFlt            1.0
                                                                                                                                                                               1793: 0xA03C   PushMemberI32           dig_H1
                                                                                                                                                                               1794: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1795: 0x0078   CvtIntToFlt1            
                                                                                                                                                                               1796: 0x003C   FltMul                  
                                                                                                                                                                               1797: 0x0110   PushConstI32            1224736768 (0x49000000)
                                                                                                                                                                               1798: 0x0000                           
                                                                                                                                                                               1799: 0x4900                           
                                                                                                                                                                               1800: 0x003B   FltDiv                  
                                                                                                                                                                               1801: 0x003F   FltSub                  
                                                                                                                                                                               1802: 0x003C   FltMul                  
                                                                                                                                                                               1803: 0x9001   PopLocalI32             var_H

000617          If (var_H > 100.0) Then                                                                                                                                        1804: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1805: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                               1806: 0x003A   FltCmp                  
                                                                                                                                                                               1807: 0x2C03   BranchLE                1811

000618              var_H = 100.0                                                                                                                                              1808: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                               1809: 0x9001   PopLocalI32             var_H

                                                                                                                                                                               1810: 0x4005   Branch                  1816
000619          ElseIf (var_H < 0.0) Then                                                                                                                                      1811: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1812: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               1813: 0x003A   FltCmp                  
                                                                                                                                                                               1814: 0x3401   BranchGE                1816

000620              var_H = 0.0                                                                                                                                                1815: 0x6001   Const0toLocalI32        var_H

000621          End If
000622          Return var_H                                                                                                                                                   1816: 0x8801   PushLocalI32            var_H
                                                                                                                                                                               1817: 0x0092   ReturnValType           

000623      End Function                                                                                                                                                       1818: 0x0093   Return0                 

000624      
000625      //**************************************************************************/
000626      //
000627      //    Calculates the altitude (in meters) from the specified atmospheric
000628      //    pressure (in hPa), and sea-level pressure (in hPa).
000629      //    @param  seaLevel      Sea-level pressure in hPa
000630      //    @param  atmospheric   Atmospheric pressure in hPa
000631      //
000632      //**************************************************************************/
000633      Public Function readAltitude(seaLevel As Float) As Float                                                                                                           1819: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1820: 0xE060   AllocateStackSpace      ValTypeSize=3, RefTypeSize=0

000634          
000635          // Equation taken from BMP180 datasheet (page 16):
000636          
000637          // Note that using the equation from wikipedia can give bad results
000638          // at high altitude.
000639          
000640          // Mean Sea Level Pressure is assumed to be 1013.25 unless changed.
000641          
000642          Dim atmospheric As Float = readPressure()                                                                                                                      1821: 0x000D   PushMe                  
                                                                                                                                                                               1822: 0x54F9   BranchSubrBack          1574
                                                                                                                                                                               1823: 0x9001   PopLocalI32             atmospheric

000643          Dim factor As Float = atmospheric / seaLevel                                                                                                                   1824: 0x8801   PushLocalI32            atmospheric
                                                                                                                                                                               1825: 0x8800   PushLocalI32            seaLevel
                                                                                                                                                                               1826: 0x003B   FltDiv                  
                                                                                                                                                                               1827: 0x9002   PopLocalI32             factor

000644          Dim res As Float = factor.Pow(0.1903)                                                                                                                          1828: 0x0110   PushConstI32            1044569601 (0x3E42DE01)
                                                                                                                                                                               1829: 0xDE01                           
                                                                                                                                                                               1830: 0x3E42                           
                                                                                                                                                                               1831: 0x8802   PushLocalI32            factor
                                                                                                                                                                               1832: 0x004E   FltPow                  
                                                                                                                                                                               1833: 0x9003   PopLocalI32             res

000645          Return 44330.0 * (1.0 - (res))                                                                                                                                 1834: 0x0110   PushConstI32            1194142208 (0x472D2A00)
                                                                                                                                                                               1835: 0x2A00                           
                                                                                                                                                                               1836: 0x472D                           
                                                                                                                                                                               1837: 0xEA01   PushConstFlt            1.0
                                                                                                                                                                               1838: 0x8803   PushLocalI32            res
                                                                                                                                                                               1839: 0x003F   FltSub                  
                                                                                                                                                                               1840: 0x003C   FltMul                  
                                                                                                                                                                               1841: 0x0092   ReturnValType           

000646      End Function                                                                                                                                                       1842: 0x0093   Return0                 

000647      
000648      Public Function readAltitude() As Float                                                                                                                            1843: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000649          Return readAltitude(1013.25)                                                                                                                                   1844: 0x0110   PushConstI32            1149063168 (0x447D5000)
                                                                                                                                                                               1845: 0x5000                           
                                                                                                                                                                               1846: 0x447D                           
                                                                                                                                                                               1847: 0x000D   PushMe                  
                                                                                                                                                                               1848: 0x541E   BranchSubrBack          1819
                                                                                                                                                                               1849: 0x0092   ReturnValType           

000650      End Function                                                                                                                                                       1850: 0x0093   Return0                 

000651      
000652      //Or in Feet
000653      Public Function readAltitudeFeet(seaLevel As Float) As Float                                                                                                       1851: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000654          Return readAltitude(seaLevel) * 3.28084                                                                                                                        1852: 0x8800   PushLocalI32            seaLevel
                                                                                                                                                                               1853: 0x000D   PushMe                  
                                                                                                                                                                               1854: 0x5424   BranchSubrBack          1819
                                                                                                                                                                               1855: 0x0110   PushConstI32            1079114056 (0x4051F948)
                                                                                                                                                                               1856: 0xF948                           
                                                                                                                                                                               1857: 0x4051                           
                                                                                                                                                                               1858: 0x003C   FltMul                  
                                                                                                                                                                               1859: 0x0092   ReturnValType           

000655      End Function                                                                                                                                                       1860: 0x0093   Return0                 

000656      
000657      Public Function readAltitudeFeet() As Float                                                                                                                        1861: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000658          Return readAltitude(1013.25) * 3.28084                                                                                                                         1862: 0x0110   PushConstI32            1149063168 (0x447D5000)
                                                                                                                                                                               1863: 0x5000                           
                                                                                                                                                                               1864: 0x447D                           
                                                                                                                                                                               1865: 0x000D   PushMe                  
                                                                                                                                                                               1866: 0x5430   BranchSubrBack          1819
                                                                                                                                                                               1867: 0x0110   PushConstI32            1079114056 (0x4051F948)
                                                                                                                                                                               1868: 0xF948                           
                                                                                                                                                                               1869: 0x4051                           
                                                                                                                                                                               1870: 0x003C   FltMul                  
                                                                                                                                                                               1871: 0x0092   ReturnValType           

000659      End Function                                                                                                                                                       1872: 0x0093   Return0                 

000660      
000661      //**************************************************************************/
000662      //
000663      //    Calculates Dew Point (in degrees C) from the specified temperature and
000664      //    relative Humidity (in %) This equation is an aproximation, but
000665      //    is fairly accurate for relative humidity values above 50%.
000666      //    Dewpoint is the temperature at which a given concentration of water vapor
000667      //    in air will form dew
000668      //    from:
000669      //    Lawrence, Mark G., 2005: 
000670      //    The relationship between relative humidity and the dewpoint temperature in moist air: 
000671      //    A simple conversion and applications.
000672      //    Bull. Amer. Meteor. Soc., 86, 225-233. doi: http;//dx.doi.org/10.1175/BAMS-86-2-225
000673      //
000674      //**************************************************************************/
000675      Public Function readAproxDewPoint() As Float                                                                                                                       1873: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               1874: 0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000676          Dim Temperature As Float = readTemperature()                                                                                                                   1875: 0x000D   PushMe                  
                                                                                                                                                                               1876: 0x5590   BranchSubrBack          1477
                                                                                                                                                                               1877: 0x9000   PopLocalI32             Temperature

000677          Dim Humidity As Float = readHumidity()                                                                                                                         1878: 0x000D   PushMe                  
                                                                                                                                                                               1879: 0x549C   BranchSubrBack          1724
                                                                                                                                                                               1880: 0x9001   PopLocalI32             Humidity

000678          Return Temperature - ((100.0 - Humidity) / 5.0)                                                                                                                1881: 0x8800   PushLocalI32            Temperature
                                                                                                                                                                               1882: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                               1883: 0x8801   PushLocalI32            Humidity
                                                                                                                                                                               1884: 0x003F   FltSub                  
                                                                                                                                                                               1885: 0xEA05   PushConstFlt            5.0
                                                                                                                                                                               1886: 0x003B   FltDiv                  
                                                                                                                                                                               1887: 0x003F   FltSub                  
                                                                                                                                                                               1888: 0x0092   ReturnValType           

000679      End Function                                                                                                                                                       1889: 0x0093   Return0                 

000680      
000681      //**************************************************************************/
000682      //
000683      //    Calculates Dew Point (in degrees C) from the specified temperature and
000684      //    relative Humidity (in %) 
000685      //    Uses the Magnus Formula (see https://en.wikipedia.org/wiki/Dew_point)
000686      //
000687      //**************************************************************************/
000688      Public Function calculateDewPoint(b As Float, c As Float, T As Float, H As Float) As Float                                                                         1890: 0x1840   EntryPoint              ValTypParams=4, RefTypParams=0
                                                                                                                                                                               1891: 0xE040   AllocateStackSpace      ValTypeSize=2, RefTypeSize=0

000689          'Dim a As Float = 6.1121   //not used
000690          'b sometimes called c17 is ~ 18
000691          'c sometimes called c243 is ~ 250
000692          'Dim d As Float = 234.5   //not used in Magnus basic formula
000693          'T is Temperature
000694          'H is Humidity
000695          Dim g As Float = (H / 100.0).Log() + ((b * T) / (c + T))                                                                                                       1892: 0x8803   PushLocalI32            H
                                                                                                                                                                               1893: 0xEA64   PushConstFlt            100.0
                                                                                                                                                                               1894: 0x003B   FltDiv                  
                                                                                                                                                                               1895: 0x004C   FltLog                  
                                                                                                                                                                               1896: 0x8800   PushLocalI32            b
                                                                                                                                                                               1897: 0x8802   PushLocalI32            T
                                                                                                                                                                               1898: 0x003C   FltMul                  
                                                                                                                                                                               1899: 0x8801   PushLocalI32            c
                                                                                                                                                                               1900: 0x8802   PushLocalI32            T
                                                                                                                                                                               1901: 0x0039   FltAdd                  
                                                                                                                                                                               1902: 0x003B   FltDiv                  
                                                                                                                                                                               1903: 0x0039   FltAdd                  
                                                                                                                                                                               1904: 0x9004   PopLocalI32             g

000696          Dim Dewpoint As Float = (c * g) / (b - g)                                                                                                                      1905: 0x8801   PushLocalI32            c
                                                                                                                                                                               1906: 0x8804   PushLocalI32            g
                                                                                                                                                                               1907: 0x003C   FltMul                  
                                                                                                                                                                               1908: 0x8800   PushLocalI32            b
                                                                                                                                                                               1909: 0x8804   PushLocalI32            g
                                                                                                                                                                               1910: 0x003F   FltSub                  
                                                                                                                                                                               1911: 0x003B   FltDiv                  
                                                                                                                                                                               1912: 0x9005   PopLocalI32             Dewpoint

000697          Return Dewpoint                                                                                                                                                1913: 0x8805   PushLocalI32            Dewpoint
                                                                                                                                                                               1914: 0x0092   ReturnValType           

000698      End Function                                                                                                                                                       1915: 0x0093   Return0                 

000699      
000700      Public Function readDewPoint() As Float                                                                                                                            1916: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000701          //uses Wikepeadia formula constants for Magnus equation
000702          Return calculateDewPoint(18.675, 257.14, readTemperature(), readHumidity())                                                                                    1917: 0x0110   PushConstI32            1100310118 (0x41956666)
                                                                                                                                                                               1918: 0x6666                           
                                                                                                                                                                               1919: 0x4195                           
                                                                                                                                                                               1920: 0x0110   PushConstI32            1132499436 (0x438091EC)
                                                                                                                                                                               1921: 0x91EC                           
                                                                                                                                                                               1922: 0x4380                           
                                                                                                                                                                               1923: 0x000D   PushMe                  
                                                                                                                                                                               1924: 0x55C0   BranchSubrBack          1477
                                                                                                                                                                               1925: 0x000D   PushMe                  
                                                                                                                                                                               1926: 0x54CB   BranchSubrBack          1724
                                                                                                                                                                               1927: 0x000D   PushMe                  
                                                                                                                                                                               1928: 0x5427   BranchSubrBack          1890
                                                                                                                                                                               1929: 0x0092   ReturnValType           

000703      End Function                                                                                                                                                       1930: 0x0093   Return0                 

000704      
000705      Public Function readAlternateDewPoint() As Float                                                                                                                   1931: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000706          //uses alternate constants
000707          Return calculateDewPoint(17.67, 243.5, readTemperature(), readHumidity())                                                                                      1932: 0x0110   PushConstI32            1099783209 (0x418D5C29)
                                                                                                                                                                               1933: 0x5C29                           
                                                                                                                                                                               1934: 0x418D                           
                                                                                                                                                                               1935: 0x0110   PushConstI32            1131642880 (0x43738000)
                                                                                                                                                                               1936: 0x8000                           
                                                                                                                                                                               1937: 0x4373                           
                                                                                                                                                                               1938: 0x000D   PushMe                  
                                                                                                                                                                               1939: 0x55CF   BranchSubrBack          1477
                                                                                                                                                                               1940: 0x000D   PushMe                  
                                                                                                                                                                               1941: 0x54DA   BranchSubrBack          1724
                                                                                                                                                                               1942: 0x000D   PushMe                  
                                                                                                                                                                               1943: 0x5436   BranchSubrBack          1890
                                                                                                                                                                               1944: 0x0092   ReturnValType           

000708      End Function                                                                                                                                                       1945: 0x0093   Return0                 

000709      
000710      //====================== I2C read/write stuff =============================//
000711      
000712      //**************************************************************************/
000713      //
000714      //    @brief  Writes an 8 bit value over I2C
000715      //
000716      //**************************************************************************/
000717      Public Sub SetRegister(reg As Byte)                                                                                                                                1946: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1947: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000718          Dim data As ListOfByte = New ListOfByte                                                                                                                        1948: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                               1949: 0x0010   ClassNew                
                                                                                                                                                                               1950: 0x9400   PopLocalRef             data

000719          data.Add(reg)                                                                                                                                                  1951: 0x8800   PushLocalI32            reg
                                                                                                                                                                               1952: 0x8C00   PushLocalRef            data
                                                                                                                                                                               1953: 0x00A3   ListAdd                 

000720          BME280_I2C.Write(data)                                                                                                                                         1954: 0x8C00   PushLocalRef            data
                                                                                                                                                                               1955: 0xA400   PushMemberRef           BME280_I2C
                                                                                                                                                                               1956: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               1957: 0x00E1   I2cDeviceWrite          
                                                                                                                                                                               1958: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000721      End Sub                                                                                                                                                            1959: 0x0091   Return                  

000722      
000723      Public Sub write8(reg As Byte, value As Byte)                                                                                                                      1960: 0x1820   EntryPoint              ValTypParams=2, RefTypParams=0
                                                                                                                                                                               1961: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000724          Dim data As ListOfByte = New ListOfByte                                                                                                                        1962: 0x800C   PushConstU10            12 (0x000C)
                                                                                                                                                                               1963: 0x0010   ClassNew                
                                                                                                                                                                               1964: 0x9400   PopLocalRef             data

000725          data.Add(reg)                                                                                                                                                  1965: 0x8800   PushLocalI32            reg
                                                                                                                                                                               1966: 0x8C00   PushLocalRef            data
                                                                                                                                                                               1967: 0x00A3   ListAdd                 

000726          data.Add(value)                                                                                                                                                1968: 0x8801   PushLocalI32            value
                                                                                                                                                                               1969: 0x8C00   PushLocalRef            data
                                                                                                                                                                               1970: 0x00A3   ListAdd                 

000727          BME280_I2C.Write(data)                                                                                                                                         1971: 0x8C00   PushLocalRef            data
                                                                                                                                                                               1972: 0xA400   PushMemberRef           BME280_I2C
                                                                                                                                                                               1973: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               1974: 0x00E1   I2cDeviceWrite          
                                                                                                                                                                               1975: 0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000728      End Sub                                                                                                                                                            1976: 0x0091   Return                  

000729      
000730      //**************************************************************************/
000731      //
000732      //    @brief  Reads a 16 bit value over I2C returns two byte ListOfBytes
000733      //
000734      //**************************************************************************/
000735      Public Function read2X8(reg As Byte) As ListOfByte                                                                                                                 1977: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1978: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000736          SetRegister(reg)                                                                                                                                               1979: 0x8800   PushLocalI32            reg
                                                                                                                                                                               1980: 0x000D   PushMe                  
                                                                                                                                                                               1981: 0x5424   BranchSubrBack          1946

000737          Dim value As ListOfByte = BME280_I2C.Read(2)                                                                                                                   1982: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               1983: 0xA400   PushMemberRef           BME280_I2C
                                                                                                                                                                               1984: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               1985: 0x00E0   I2cDeviceRead           
                                                                                                                                                                               1986: 0x9400   PopLocalRef             value

000738          Return value                                                                                                                                                   1987: 0x8C00   PushLocalRef            value
                                                                                                                                                                               1988: 0x0095   ReturnRefType           

000739      End Function                                                                                                                                                       1989: 0x0096   ReturnNothing           

000740      
000741      //**************************************************************************/
000742      //
000743      //    @brief  Reads an unsigned 8 bit value over I2C
000744      //
000745      //**************************************************************************/
000746      Public Function read8(reg As Byte) As Integer //should return unsigned Byte                                                                                        1990: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               1991: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

000747          SetRegister(reg)                                                                                                                                               1992: 0x8800   PushLocalI32            reg
                                                                                                                                                                               1993: 0x000D   PushMe                  
                                                                                                                                                                               1994: 0x5431   BranchSubrBack          1946

000748          Dim result As Short = 0
000749          Dim value As ListOfByte = BME280_I2C.Read(1)                                                                                                                   1995: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               1996: 0xA400   PushMemberRef           BME280_I2C
                                                                                                                                                                               1997: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               1998: 0x00E0   I2cDeviceRead           
                                                                                                                                                                               1999: 0x9400   PopLocalRef             value

000750          If value <> Nothing Then                                                                                                                                       2000: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2001: 0x000E   PushNothing             
                                                                                                                                                                               2002: 0x000B   RefCmpNE                
                                                                                                                                                                               2003: 0x3C04   BranchFalse             2008

000751              result = value(0)                                                                                                                                          2004: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2005: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2006: 0x00B4   ListItemGet             
                                                                                                                                                                               2007: 0x9001   PopLocalI32             result

000752          End If
000753          Return result                                                                                                                                                  2008: 0x8801   PushLocalI32            result
                                                                                                                                                                               2009: 0x0092   ReturnValType           

000754      End Function                                                                                                                                                       2010: 0x0093   Return0                 

000755      
000756      //**************************************************************************/
000757      //
000758      //    @brief  Reads a signed 8 bit value over I2C
000759      //
000760      //**************************************************************************/
000761      Public Function readS8(reg As Byte) As Integer                                                                                                                     2011: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               2012: 0xE020   AllocateStackSpace      ValTypeSize=1, RefTypeSize=0

000762          Dim result As Byte = read8(reg).ToByte()                                                                                                                       2013: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2014: 0x000D   PushMe                  
                                                                                                                                                                               2015: 0x541A   BranchSubrBack          1990
                                                                                                                                                                               2016: 0x007D   CvtIntToByt             
                                                                                                                                                                               2017: 0x9001   PopLocalI32             result

000763          Return result.SignExtend() //return signed Integer                                                                                                             2018: 0x8801   PushLocalI32            result
                                                                                                                                                                               2019: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2020: 0x0005   SignExtend              
                                                                                                                                                                               2021: 0x0092   ReturnValType           

000764      End Function                                                                                                                                                       2022: 0x0093   Return0                 

000765      
000766      //**************************************************************************/
000767      //
000768      //    @brief  Reads an unsigned 16 bit value over I2C
000769      //
000770      //**************************************************************************/
000771      Public Function read16(reg As Byte) As Integer                                                                                                                     2023: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000772          Return readS16(reg).ToShort.ZeroExtend()                                                                                                                       2024: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2025: 0x000D   PushMe                  
                                                                                                                                                                               2026: 0x1C0E   BranchSubr              2041
                                                                                                                                                                               2027: 0x007F   CvtIntToSho             
                                                                                                                                                                               2028: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2029: 0x0005   SignExtend              
                                                                                                                                                                               2030: 0x0092   ReturnValType           

000773      End Function                                                                                                                                                       2031: 0x0093   Return0                 

000774      
000775      Public Function read16_LE(reg As Byte) As Integer                                                                                                                  2032: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0

000776          Return readS16_LE(reg).ToShort.ZeroExtend()                                                                                                                    2033: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2034: 0x000D   PushMe                  
                                                                                                                                                                               2035: 0x1C28   BranchSubr              2076
                                                                                                                                                                               2036: 0x007F   CvtIntToSho             
                                                                                                                                                                               2037: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2038: 0x0005   SignExtend              
                                                                                                                                                                               2039: 0x0092   ReturnValType           

000777      End Function                                                                                                                                                       2040: 0x0093   Return0                 

000778      
000779      //**************************************************************************/
000780      //
000781      //    @brief  Reads a signed 16 bit value over I2C
000782      //
000783      //**************************************************************************/
000784      Public Function readS16(reg As Byte) As Integer //should return Short                                                                                              2041: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               2042: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

000785          Dim result As Short = 0
000786          Dim value As ListOfByte = read2X8(reg)                                                                                                                         2043: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2044: 0x000D   PushMe                  
                                                                                                                                                                               2045: 0x5445   BranchSubrBack          1977
                                                                                                                                                                               2046: 0x9400   PopLocalRef             value

000787          If value <> Nothing Then                                                                                                                                       2047: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2048: 0x000E   PushNothing             
                                                                                                                                                                               2049: 0x000B   RefCmpNE                
                                                                                                                                                                               2050: 0x3C0A   BranchFalse             2061

000788              result = (value(0) << 8) | value(1)                                                                                                                        2051: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2052: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2053: 0x00B4   ListItemGet             
                                                                                                                                                                               2054: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2055: 0x002E   IntShl                  
                                                                                                                                                                               2056: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2057: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2058: 0x00B4   ListItemGet             
                                                                                                                                                                               2059: 0x002D   IntOr                   
                                                                                                                                                                               2060: 0x9001   PopLocalI32             result

000789              //result = value.ExtractShort(0, Endianness.Big) //not working
000790          End If
000791          //convert value to 2's compliment
000792          If (value(0) > 0x7f) Then                                                                                                                                      2061: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2062: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2063: 0x00B4   ListItemGet             
                                                                                                                                                                               2064: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                               2065: 0x2C07   BranchLE                2073

000793              result = (~result + 1) * (-1)                                                                                                                              2066: 0x8801   PushLocalI32            result
                                                                                                                                                                               2067: 0x002C   IntNot                  
                                                                                                                                                                               2068: 0x007F   CvtIntToSho             
                                                                                                                                                                               2069: 0x0028   IntInc                  
                                                                                                                                                                               2070: 0x0016   PushConstMinus1         
                                                                                                                                                                               2071: 0x002A   IntMul                  
                                                                                                                                                                               2072: 0x9001   PopLocalI32             result

000794          End If
000795          Return result                                                                                                                                                  2073: 0x8801   PushLocalI32            result
                                                                                                                                                                               2074: 0x0092   ReturnValType           

000796      End Function                                                                                                                                                       2075: 0x0093   Return0                 

000797      
000798      Public Function readS16_LE(reg As Byte) As Integer //should return Short                                                                                           2076: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               2077: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

000799          Dim result As Short = 0
000800          Dim value As ListOfByte = read2X8(reg)                                                                                                                         2078: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2079: 0x000D   PushMe                  
                                                                                                                                                                               2080: 0x5468   BranchSubrBack          1977
                                                                                                                                                                               2081: 0x9400   PopLocalRef             value

000801          If value <> Nothing Then                                                                                                                                       2082: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2083: 0x000E   PushNothing             
                                                                                                                                                                               2084: 0x000B   RefCmpNE                
                                                                                                                                                                               2085: 0x3C0A   BranchFalse             2096

000802              result = (value(1) << 8) | value(0)                                                                                                                        2086: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2087: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2088: 0x00B4   ListItemGet             
                                                                                                                                                                               2089: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2090: 0x002E   IntShl                  
                                                                                                                                                                               2091: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2092: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2093: 0x00B4   ListItemGet             
                                                                                                                                                                               2094: 0x002D   IntOr                   
                                                                                                                                                                               2095: 0x9001   PopLocalI32             result

000803              //result = value.ExtractShort(0, Endianness.Little) //not working
000804          End If
000805          //convert value to 2's compliment
000806          If (value(1) > 0x7f) Then                                                                                                                                      2096: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2097: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2098: 0x00B4   ListItemGet             
                                                                                                                                                                               2099: 0x807F   PushConstU10            127 (0x007F)
                                                                                                                                                                               2100: 0x2C07   BranchLE                2108

000807              result = (~result + 1) * (-1)                                                                                                                              2101: 0x8801   PushLocalI32            result
                                                                                                                                                                               2102: 0x002C   IntNot                  
                                                                                                                                                                               2103: 0x007F   CvtIntToSho             
                                                                                                                                                                               2104: 0x0028   IntInc                  
                                                                                                                                                                               2105: 0x0016   PushConstMinus1         
                                                                                                                                                                               2106: 0x002A   IntMul                  
                                                                                                                                                                               2107: 0x9001   PopLocalI32             result

000808          End If
000809          Return result                                                                                                                                                  2108: 0x8801   PushLocalI32            result
                                                                                                                                                                               2109: 0x0092   ReturnValType           

000810      End Function                                                                                                                                                       2110: 0x0093   Return0                 

000811      
000812      //**************************************************************************/
000813      //
000814      //    @brief  Reads a signed 24 bit value over I2C
000815      //
000816      //**************************************************************************/
000817      
000818      Public Function read24(reg As Byte) As Integer                                                                                                                     2111: 0x1810   EntryPoint              ValTypParams=1, RefTypParams=0
                                                                                                                                                                               2112: 0xE021   AllocateStackSpace      ValTypeSize=1, RefTypeSize=1

000819          SetRegister(reg)                                                                                                                                               2113: 0x8800   PushLocalI32            reg
                                                                                                                                                                               2114: 0x000D   PushMe                  
                                                                                                                                                                               2115: 0x54AA   BranchSubrBack          1946

000820          Dim result As Integer = 0
000821          Dim value As ListOfByte = BME280_I2C.Read(3)                                                                                                                   2116: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               2117: 0xA400   PushMemberRef           BME280_I2C
                                                                                                                                                                               2118: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2119: 0x00E0   I2cDeviceRead           
                                                                                                                                                                               2120: 0x9400   PopLocalRef             value

000822          If value <> Nothing Then                                                                                                                                       2121: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2122: 0x000E   PushNothing             
                                                                                                                                                                               2123: 0x000B   RefCmpNE                
                                                                                                                                                                               2124: 0x3C10   BranchFalse             2141

000823              result = (value(0) << 16) | (value(1) << 8) | value(2)                                                                                                     2125: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2126: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2127: 0x00B4   ListItemGet             
                                                                                                                                                                               2128: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               2129: 0x002E   IntShl                  
                                                                                                                                                                               2130: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2131: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2132: 0x00B4   ListItemGet             
                                                                                                                                                                               2133: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2134: 0x002E   IntShl                  
                                                                                                                                                                               2135: 0x002D   IntOr                   
                                                                                                                                                                               2136: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               2137: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2138: 0x00B4   ListItemGet             
                                                                                                                                                                               2139: 0x002D   IntOr                   
                                                                                                                                                                               2140: 0x9001   PopLocalI32             result

000824          End If
000825          Return result                                                                                                                                                  2141: 0x8801   PushLocalI32            result
                                                                                                                                                                               2142: 0x0092   ReturnValType           

000826      End Function                                                                                                                                                       2143: 0x0093   Return0                 

000827      
000828      //**************************************************************************/
000829      //
000830      //    @brief  Reads all values (press/temp/humid) values over I2C
000831      //    reg is start register - to read all read 0xF7 to 0xFE (8 registers)
000832      //    Allows use of Shadow registers in normal mode (ie can read registers
000833      //    to get previous reading while module is acquiring new reading)
000834      //
000835      //**************************************************************************/
000836      
000837      Public Sub readall()                                                                                                                                               2144: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                                                                                                                               2145: 0xE001   AllocateStackSpace      ValTypeSize=0, RefTypeSize=1

000838          SetRegister(REGISTER_PRESSUREDATA)                                                                                                                             2146: 0x80F7   PushConstU10            247 (0x00F7)
                                                                                                                                                                               2147: 0x000D   PushMe                  
                                                                                                                                                                               2148: 0x54CB   BranchSubrBack          1946

000839          Dim value As ListOfByte = BME280_I2C.Read(8)                                                                                                                   2149: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2150: 0xA400   PushMemberRef           BME280_I2C
                                                                                                                                                                               2151: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2152: 0x00E0   I2cDeviceRead           
                                                                                                                                                                               2153: 0x9400   PopLocalRef             value

000840          If value <> Nothing Then                                                                                                                                       2154: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2155: 0x000E   PushNothing             
                                                                                                                                                                               2156: 0x000B   RefCmpNE                
                                                                                                                                                                               2157: 0x3C2A   BranchFalse             2200

000841              pressure_raw = (value(0) << 16) | (value(1) << 8) | value(2)                                                                                               2158: 0x8000   PushConstU10            0 (0x0000)
                                                                                                                                                                               2159: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2160: 0x00B4   ListItemGet             
                                                                                                                                                                               2161: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               2162: 0x002E   IntShl                  
                                                                                                                                                                               2163: 0x8001   PushConstU10            1 (0x0001)
                                                                                                                                                                               2164: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2165: 0x00B4   ListItemGet             
                                                                                                                                                                               2166: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2167: 0x002E   IntShl                  
                                                                                                                                                                               2168: 0x002D   IntOr                   
                                                                                                                                                                               2169: 0x8002   PushConstU10            2 (0x0002)
                                                                                                                                                                               2170: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2171: 0x00B4   ListItemGet             
                                                                                                                                                                               2172: 0x002D   IntOr                   
                                                                                                                                                                               2173: 0xB058   PopMemberI32            pressure_raw

000842              temperature_raw = (value(3) << 16) | (value(4) << 8) | value(5)                                                                                            2174: 0x8003   PushConstU10            3 (0x0003)
                                                                                                                                                                               2175: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2176: 0x00B4   ListItemGet             
                                                                                                                                                                               2177: 0x8010   PushConstU10            16 (0x0010)
                                                                                                                                                                               2178: 0x002E   IntShl                  
                                                                                                                                                                               2179: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               2180: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2181: 0x00B4   ListItemGet             
                                                                                                                                                                               2182: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2183: 0x002E   IntShl                  
                                                                                                                                                                               2184: 0x002D   IntOr                   
                                                                                                                                                                               2185: 0x8005   PushConstU10            5 (0x0005)
                                                                                                                                                                               2186: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2187: 0x00B4   ListItemGet             
                                                                                                                                                                               2188: 0x002D   IntOr                   
                                                                                                                                                                               2189: 0xB054   PopMemberI32            temperature_raw

000843              humidity_raw = (value(6) << 8) | value(7)                                                                                                                  2190: 0x8006   PushConstU10            6 (0x0006)
                                                                                                                                                                               2191: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2192: 0x00B4   ListItemGet             
                                                                                                                                                                               2193: 0x8008   PushConstU10            8 (0x0008)
                                                                                                                                                                               2194: 0x002E   IntShl                  
                                                                                                                                                                               2195: 0x8007   PushConstU10            7 (0x0007)
                                                                                                                                                                               2196: 0x8C00   PushLocalRef            value
                                                                                                                                                                               2197: 0x00B4   ListItemGet             
                                                                                                                                                                               2198: 0x002D   IntOr                   
                                                                                                                                                                               2199: 0xB05C   PopMemberI32            humidity_raw

000844          End If 
000845      End Sub                                                                                                                                                            2200: 0x0091   Return                  

000846      
000847      //**************************************************************************/
000848      //
000849      //    @brief  Reads the factory-set coefficients
000850      //
000851      //**************************************************************************/
000852      Public Sub readCoefficients()                                                                                                                                      2201: 0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000853          
000854          dig_T1 = read16_LE(REGISTER_DIG_T1)                                                                                                                            2202: 0x8088   PushConstU10            136 (0x0088)
                                                                                                                                                                               2203: 0x000D   PushMe                  
                                                                                                                                                                               2204: 0x54AD   BranchSubrBack          2032
                                                                                                                                                                               2205: 0xB00C   PopMemberI32            dig_T1

000855          dig_T2 = readS16_LE(REGISTER_DIG_T2)                                                                                                                           2206: 0x808A   PushConstU10            138 (0x008A)
                                                                                                                                                                               2207: 0x000D   PushMe                  
                                                                                                                                                                               2208: 0x5485   BranchSubrBack          2076
                                                                                                                                                                               2209: 0xB010   PopMemberI32            dig_T2

000856          dig_T3 = readS16_LE(REGISTER_DIG_T3)                                                                                                                           2210: 0x808C   PushConstU10            140 (0x008C)
                                                                                                                                                                               2211: 0x000D   PushMe                  
                                                                                                                                                                               2212: 0x5489   BranchSubrBack          2076
                                                                                                                                                                               2213: 0xB014   PopMemberI32            dig_T3

000857          
000858          dig_P1 = read16_LE(REGISTER_DIG_P1)                                                                                                                            2214: 0x808E   PushConstU10            142 (0x008E)
                                                                                                                                                                               2215: 0x000D   PushMe                  
                                                                                                                                                                               2216: 0x54B9   BranchSubrBack          2032
                                                                                                                                                                               2217: 0xB018   PopMemberI32            dig_P1

000859          dig_P2 = readS16_LE(REGISTER_DIG_P2)                                                                                                                           2218: 0x8090   PushConstU10            144 (0x0090)
                                                                                                                                                                               2219: 0x000D   PushMe                  
                                                                                                                                                                               2220: 0x5491   BranchSubrBack          2076
                                                                                                                                                                               2221: 0xB01C   PopMemberI32            dig_P2

000860          dig_P3 = readS16_LE(REGISTER_DIG_P3)                                                                                                                           2222: 0x8092   PushConstU10            146 (0x0092)
                                                                                                                                                                               2223: 0x000D   PushMe                  
                                                                                                                                                                               2224: 0x5495   BranchSubrBack          2076
                                                                                                                                                                               2225: 0xB020   PopMemberI32            dig_P3

000861          dig_P4 = readS16_LE(REGISTER_DIG_P4)                                                                                                                           2226: 0x8094   PushConstU10            148 (0x0094)
                                                                                                                                                                               2227: 0x000D   PushMe                  
                                                                                                                                                                               2228: 0x5499   BranchSubrBack          2076
                                                                                                                                                                               2229: 0xB024   PopMemberI32            dig_P4

000862          dig_P5 = readS16_LE(REGISTER_DIG_P5)                                                                                                                           2230: 0x8096   PushConstU10            150 (0x0096)
                                                                                                                                                                               2231: 0x000D   PushMe                  
                                                                                                                                                                               2232: 0x549D   BranchSubrBack          2076
                                                                                                                                                                               2233: 0xB028   PopMemberI32            dig_P5

000863          dig_P6 = readS16_LE(REGISTER_DIG_P6)                                                                                                                           2234: 0x8098   PushConstU10            152 (0x0098)
                                                                                                                                                                               2235: 0x000D   PushMe                  
                                                                                                                                                                               2236: 0x54A1   BranchSubrBack          2076
                                                                                                                                                                               2237: 0xB02C   PopMemberI32            dig_P6

000864          dig_P7 = readS16_LE(REGISTER_DIG_P7)                                                                                                                           2238: 0x809A   PushConstU10            154 (0x009A)
                                                                                                                                                                               2239: 0x000D   PushMe                  
                                                                                                                                                                               2240: 0x54A5   BranchSubrBack          2076
                                                                                                                                                                               2241: 0xB030   PopMemberI32            dig_P7

000865          dig_P8 = readS16_LE(REGISTER_DIG_P8)                                                                                                                           2242: 0x809C   PushConstU10            156 (0x009C)
                                                                                                                                                                               2243: 0x000D   PushMe                  
                                                                                                                                                                               2244: 0x54A9   BranchSubrBack          2076
                                                                                                                                                                               2245: 0xB034   PopMemberI32            dig_P8

000866          dig_P9 = readS16_LE(REGISTER_DIG_P9)                                                                                                                           2246: 0x809E   PushConstU10            158 (0x009E)
                                                                                                                                                                               2247: 0x000D   PushMe                  
                                                                                                                                                                               2248: 0x54AD   BranchSubrBack          2076
                                                                                                                                                                               2249: 0xB038   PopMemberI32            dig_P9

000867          
000868          dig_H1 = read8(REGISTER_DIG_H1)                                                                                                                                2250: 0x80A1   PushConstU10            161 (0x00A1)
                                                                                                                                                                               2251: 0x000D   PushMe                  
                                                                                                                                                                               2252: 0x5507   BranchSubrBack          1990
                                                                                                                                                                               2253: 0xB03C   PopMemberI32            dig_H1

000869          dig_H2 = readS16_LE(REGISTER_DIG_H2)                                                                                                                           2254: 0x80E1   PushConstU10            225 (0x00E1)
                                                                                                                                                                               2255: 0x000D   PushMe                  
                                                                                                                                                                               2256: 0x54B5   BranchSubrBack          2076
                                                                                                                                                                               2257: 0xB040   PopMemberI32            dig_H2

000870          dig_H3 = read8(REGISTER_DIG_H3)                                                                                                                                2258: 0x80E3   PushConstU10            227 (0x00E3)
                                                                                                                                                                               2259: 0x000D   PushMe                  
                                                                                                                                                                               2260: 0x550F   BranchSubrBack          1990
                                                                                                                                                                               2261: 0xB044   PopMemberI32            dig_H3

000871          dig_H4 = (read8(REGISTER_DIG_H4) << 4) | (read8(REGISTER_DIG_H4 + 1) & 0x0f)                                                                                   2262: 0x80E4   PushConstU10            228 (0x00E4)
                                                                                                                                                                               2263: 0x000D   PushMe                  
                                                                                                                                                                               2264: 0x5513   BranchSubrBack          1990
                                                                                                                                                                               2265: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               2266: 0x002E   IntShl                  
                                                                                                                                                                               2267: 0x80E5   PushConstU10            229 (0x00E5)
                                                                                                                                                                               2268: 0x000D   PushMe                  
                                                                                                                                                                               2269: 0x5518   BranchSubrBack          1990
                                                                                                                                                                               2270: 0x800F   PushConstU10            15 (0x000F)
                                                                                                                                                                               2271: 0x001F   IntAnd                  
                                                                                                                                                                               2272: 0x002D   IntOr                   
                                                                                                                                                                               2273: 0xB048   PopMemberI32            dig_H4

000872          dig_H5 = (read8(REGISTER_DIG_H5 + 1) << 4) | (read8(REGISTER_DIG_H5) >> 4)                                                                                     2274: 0x80E6   PushConstU10            230 (0x00E6)
                                                                                                                                                                               2275: 0x000D   PushMe                  
                                                                                                                                                                               2276: 0x551F   BranchSubrBack          1990
                                                                                                                                                                               2277: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               2278: 0x002E   IntShl                  
                                                                                                                                                                               2279: 0x80E5   PushConstU10            229 (0x00E5)
                                                                                                                                                                               2280: 0x000D   PushMe                  
                                                                                                                                                                               2281: 0x5524   BranchSubrBack          1990
                                                                                                                                                                               2282: 0x8004   PushConstU10            4 (0x0004)
                                                                                                                                                                               2283: 0x002F   IntShr                  
                                                                                                                                                                               2284: 0x002D   IntOr                   
                                                                                                                                                                               2285: 0xB04C   PopMemberI32            dig_H5

000873          dig_H6 = readS8(REGISTER_DIG_H6)                                                                                                                               2286: 0x80E7   PushConstU10            231 (0x00E7)
                                                                                                                                                                               2287: 0x000D   PushMe                  
                                                                                                                                                                               2288: 0x5516   BranchSubrBack          2011
                                                                                                                                                                               2289: 0xB050   PopMemberI32            dig_H6

000874      End Sub                                                                                                                                                            2290: 0x0091   Return                  

000875      
000876  End Class                                                                                                                                                              749:  0x0097   ReturnMe                


****** BLOCKS and VARIABLES for BME280
    Block Class (Line 25:876)
        BME280          Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        String          version         (Literal="1.0")
        Byte            REGISTER_DIG_T1 (Literal=136)
        Byte            REGISTER_DIG_T2 (Literal=138)
        Byte            REGISTER_DIG_T3 (Literal=140)
        Byte            REGISTER_DIG_P1 (Literal=142)
        Byte            REGISTER_DIG_P2 (Literal=144)
        Byte            REGISTER_DIG_P3 (Literal=146)
        Byte            REGISTER_DIG_P4 (Literal=148)
        Byte            REGISTER_DIG_P5 (Literal=150)
        Byte            REGISTER_DIG_P6 (Literal=152)
        Byte            REGISTER_DIG_P7 (Literal=154)
        Byte            REGISTER_DIG_P8 (Literal=156)
        Byte            REGISTER_DIG_P9 (Literal=158)
        Byte            REGISTER_DIG_H1 (Literal=161)
        Byte            REGISTER_DIG_H2 (Literal=225)
        Byte            REGISTER_DIG_H3 (Literal=227)
        Byte            REGISTER_DIG_H4 (Literal=228)
        Byte            REGISTER_DIG_H5 (Literal=229)
        Byte            REGISTER_DIG_H6 (Literal=231)
        Byte            REGISTER_CHIPID (Literal=208)
        Byte            REGISTER_VERSION(Literal=209)
        Byte            REGISTER_SOFTRES(Literal=224)
        Byte            REGISTER_CAL26  (Literal=225)
        Byte            REGISTER_CONTROL(Literal=242)
        Byte            REGISTER_STATUS (Literal=243)
        Byte            REGISTER_CONTROL(Literal=244)
        Byte            REGISTER_CONFIG (Literal=245)
        Byte            REGISTER_PRESSUR(Literal=247)
        Byte            REGISTER_TEMPDAT(Literal=250)
        Byte            REGISTER_HUMIDDA(Literal=253)
        Byte            SLEEP           (Literal=0)
        Byte            FORCED          (Literal=1)
        Byte            NORMAL          (Literal=3)
        Byte            SAMPLING_0      (Literal=0)
        Byte            SAMPLING_1      (Literal=1)
        Byte            SAMPLING_2      (Literal=2)
        Byte            SAMPLING_4      (Literal=3)
        Byte            SAMPLING_8      (Literal=4)
        Byte            SAMPLING_16     (Literal=5)
        Byte            IIR_SAMPLING_0  (Literal=0)
        Byte            IIR_SAMPLING_2  (Literal=1)
        Byte            IIR_SAMPLING_4  (Literal=2)
        Byte            IIR_SAMPLING_8  (Literal=3)
        Byte            IIR_SAMPLING_16 (Literal=4)
        Integer         dig_T1          (MemberValTypVariableOffset=12)
        Integer         dig_T2          (MemberValTypVariableOffset=16)
        Integer         dig_T3          (MemberValTypVariableOffset=20)
        Integer         dig_P1          (MemberValTypVariableOffset=24)
        Integer         dig_P2          (MemberValTypVariableOffset=28)
        Integer         dig_P3          (MemberValTypVariableOffset=32)
        Integer         dig_P4          (MemberValTypVariableOffset=36)
        Integer         dig_P5          (MemberValTypVariableOffset=40)
        Integer         dig_P6          (MemberValTypVariableOffset=44)
        Integer         dig_P7          (MemberValTypVariableOffset=48)
        Integer         dig_P8          (MemberValTypVariableOffset=52)
        Integer         dig_P9          (MemberValTypVariableOffset=56)
        Integer         dig_H1          (MemberValTypVariableOffset=60)
        Integer         dig_H2          (MemberValTypVariableOffset=64)
        Integer         dig_H3          (MemberValTypVariableOffset=68)
        Integer         dig_H4          (MemberValTypVariableOffset=72)
        Integer         dig_H5          (MemberValTypVariableOffset=76)
        Integer         dig_H6          (MemberValTypVariableOffset=80)
        Integer         temperature_raw (MemberValTypVariableOffset=84)
        Integer         pressure_raw    (MemberValTypVariableOffset=88)
        Integer         humidity_raw    (MemberValTypVariableOffset=92)
        Integer         sample_time     (MemberValTypVariableOffset=96)
        Boolean         normal_mode     (MemberValTypVariableOffset=4)
        Byte            sample_filter_ra(MemberValTypVariableOffset=5)
        Byte            hum_oversample  (MemberValTypVariableOffset=6)
        Byte            temp_press_overs(MemberValTypVariableOffset=7)
        Integer         t_fine          (MemberValTypVariableOffset=100)
        I2c             BME280_I2C      (MemberRefTypVariableOffset=0)
        Boolean         online          (MemberValTypVariableOffset=8)
        Block Sub New (Line 145:167)
            Byte            chipid          (LocalValTypVariableOffset=0)
            Block If Then  (Line 152:166)
            End Block
        End Block
        Block Function getChipID (Line 169:172)
        End Block
        Block Function getVersion (Line 174:176)
        End Block
        Block Function getStatus (Line 178:180)
        End Block
        Block Function measuring (Line 182:184)
        End Block
        Block Function updating (Line 186:188)
        End Block
        Block Sub Reset (Line 190:193)
        End Block
        Block Function getSampleValueAsByte (Line 195:213)
            Byte            Value           (LocalValTypVariableOffset=1)
            Byte            sample          (LocalValTypVariableOffset=0)
        End Block
        Block Function getSampleByteAsValue (Line 215:233)
            Byte            value           (LocalValTypVariableOffset=0)
        End Block
        Block Sub setHumiditysampling (Line 235:251)
            Byte            set_hum_oversamp(LocalValTypVariableOffset=0)
            Block If Then  (Line 244:246)
            End Block
        End Block
        Block Sub setHumiditysamplingValue (Line 253:257)
            Byte            Value           (LocalValTypVariableOffset=1)
            Byte            set_hum_oversamp(LocalValTypVariableOffset=0)
        End Block
        Block Function getHumiditysamplingValue (Line 259:262)
        End Block
        Block Sub setTemperaturesampling (Line 264:279)
            Byte            set_temp_oversam(LocalValTypVariableOffset=0)
            Block If Then  (Line 273:275)
            End Block
        End Block
        Block Sub setTemperaturesamplingValue (Line 281:285)
            Byte            Value           (LocalValTypVariableOffset=1)
            Byte            set_temp_oversam(LocalValTypVariableOffset=0)
        End Block
        Block Function getTemperaturesamplingValue (Line 287:290)
        End Block
        Block Sub setPressuresampling (Line 292:307)
            Byte            set_press_oversa(LocalValTypVariableOffset=0)
            Block If Then  (Line 301:303)
            End Block
        End Block
        Block Sub setPressuresamplingValue (Line 309:313)
            Byte            Value           (LocalValTypVariableOffset=1)
            Byte            set_press_oversa(LocalValTypVariableOffset=0)
        End Block
        Block Function getPressuresamplingValue (Line 315:318)
        End Block
        Block Sub setMode (Line 320:348)
            Byte            set_mode        (LocalValTypVariableOffset=0)
            Block If Then  (Line 339:342)
            End Block
            Block Else (Line 342:344)
            End Block
        End Block
        Block Function getMode (Line 350:353)
        End Block
        Block Sub setSamplerate (Line 355:372)
            Byte            set_sample_rate (LocalValTypVariableOffset=0)
            Block If Then  (Line 366:368)
            End Block
        End Block
        Block Sub setSamplerateValue (Line 374:397)
            Byte            value           (LocalValTypVariableOffset=1)
            Float           set_sample_rate (LocalValTypVariableOffset=0)
            Block If Then  (Line 377:379)
            End Block
            Block ElseIf (Line 379:381)
            End Block
            Block ElseIf (Line 381:383)
            End Block
            Block ElseIf (Line 383:385)
            End Block
            Block ElseIf (Line 385:387)
            End Block
            Block ElseIf (Line 387:389)
            End Block
            Block ElseIf (Line 389:391)
            End Block
            Block ElseIf (Line 391:393)
            End Block
            Block Else (Line 393:395)
            End Block
        End Block
        Block Function getSampleRateValue (Line 399:422)
            Byte            sample_rate     (LocalValTypVariableOffset=0)
        End Block
        Block Sub setIIRfilter (Line 424:438)
            Byte            set_IIR_filter  (LocalValTypVariableOffset=0)
            Block If Then  (Line 432:434)
            End Block
        End Block
        Block Sub setIIRfilterValue (Line 440:458)
            Byte            Value           (LocalValTypVariableOffset=1)
            Integer         set_IIRFilter_ov(LocalValTypVariableOffset=0)
        End Block
        Block Function getIIRFilterValue (Line 460:477)
            Byte            IIRFilter       (LocalValTypVariableOffset=0)
        End Block
        Block Function getConversionTime (Line 479:514)
            Block If Then  (Line 483:485)
            End Block
            Block Else (Line 485:512)
                Integer         IIRFilter       (LocalValTypVariableOffset=0)
                Float           Temp_Sample_Time(LocalValTypVariableOffset=1)
                Float           Press_Sample_Tim(LocalValTypVariableOffset=2)
                Float           Humid_Sample_Tim(LocalValTypVariableOffset=3)
                Integer         conversion_time (LocalValTypVariableOffset=4)
                Block If Then  (Line 490:492)
                End Block
                Block If Then  (Line 494:496)
                End Block
            End Block
        End Block
        Block Sub TakeReading (Line 516:522)
            Integer         conversion_time (LocalValTypVariableOffset=0)
            Block If Then  (Line 518:521)
            End Block
        End Block
        Block Function readTemperature (Line 526:540)
            Block If Then  (Line 529:531)
            End Block
            Block If Then  (Line 533:535)
            End Block
        End Block
        Block Function readTemperatureF (Line 542:548)
            Block If Then  (Line 544:546)
            End Block
        End Block
        Block Function BME280_compensate_T_double (Line 550:563)
            Float           var1            (LocalValTypVariableOffset=1)
            Float           var2            (LocalValTypVariableOffset=2)
            Float           T               (LocalValTypVariableOffset=3)
            Integer         adc_T           (LocalValTypVariableOffset=0)
        End Block
        Block Function readPressure (Line 565:574)
            Block If Then  (Line 567:569)
            End Block
        End Block
        Block Function BME280_compensate_P_double (Line 576:596)
            Float           var1            (LocalValTypVariableOffset=1)
            Float           var2            (LocalValTypVariableOffset=2)
            Float           p               (LocalValTypVariableOffset=3)
            Integer         adc_P           (LocalValTypVariableOffset=0)
            Block If Then  (Line 587:589)
            End Block
        End Block
        Block Function readHumidity (Line 598:607)
            Block If Then  (Line 600:602)
            End Block
        End Block
        Block Function bme280_compensate_H_double (Line 610:623)
            Float           var_H           (LocalValTypVariableOffset=1)
            Integer         adc_H           (LocalValTypVariableOffset=0)
            Block If Then  (Line 617:619)
            End Block
            Block ElseIf (Line 619:621)
            End Block
        End Block
        Block Function readAltitude (Line 633:646)
            Float           atmospheric     (LocalValTypVariableOffset=1)
            Float           factor          (LocalValTypVariableOffset=2)
            Float           res             (LocalValTypVariableOffset=3)
            Float           seaLevel        (LocalValTypVariableOffset=0)
        End Block
        Block Function readAltitude (Line 648:650)
        End Block
        Block Function readAltitudeFeet (Line 653:655)
            Float           seaLevel        (LocalValTypVariableOffset=0)
        End Block
        Block Function readAltitudeFeet (Line 657:659)
        End Block
        Block Function readAproxDewPoint (Line 675:679)
            Float           Temperature     (LocalValTypVariableOffset=0)
            Float           Humidity        (LocalValTypVariableOffset=1)
        End Block
        Block Function calculateDewPoint (Line 688:698)
            Float           g               (LocalValTypVariableOffset=4)
            Float           Dewpoint        (LocalValTypVariableOffset=5)
            Float           b               (LocalValTypVariableOffset=0)
            Float           c               (LocalValTypVariableOffset=1)
            Float           T               (LocalValTypVariableOffset=2)
            Float           H               (LocalValTypVariableOffset=3)
        End Block
        Block Function readDewPoint (Line 700:703)
        End Block
        Block Function readAlternateDewPoint (Line 705:708)
        End Block
        Block Sub SetRegister (Line 717:721)
            ListOfByte      data            (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
        End Block
        Block Sub write8 (Line 723:728)
            ListOfByte      data            (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
            Byte            value           (LocalValTypVariableOffset=1)
        End Block
        Block Function read2X8 (Line 735:739)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
        End Block
        Block Function read8 (Line 746:754)
            Short           result          (LocalValTypVariableOffset=1)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
            Block If Then  (Line 750:752)
            End Block
        End Block
        Block Function readS8 (Line 761:764)
            Byte            result          (LocalValTypVariableOffset=1)
            Byte            reg             (LocalValTypVariableOffset=0)
        End Block
        Block Function read16 (Line 771:773)
            Byte            reg             (LocalValTypVariableOffset=0)
        End Block
        Block Function read16_LE (Line 775:777)
            Byte            reg             (LocalValTypVariableOffset=0)
        End Block
        Block Function readS16 (Line 784:796)
            Short           result          (LocalValTypVariableOffset=1)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
            Block If Then  (Line 787:790)
            End Block
            Block If Then  (Line 792:794)
            End Block
        End Block
        Block Function readS16_LE (Line 798:810)
            Short           result          (LocalValTypVariableOffset=1)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
            Block If Then  (Line 801:804)
            End Block
            Block If Then  (Line 806:808)
            End Block
        End Block
        Block Function read24 (Line 818:826)
            Integer         result          (LocalValTypVariableOffset=1)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Byte            reg             (LocalValTypVariableOffset=0)
            Block If Then  (Line 822:824)
            End Block
        End Block
        Block Sub readall (Line 837:845)
            ListOfByte      value           (LocalRefTypVariableOffset=0)
            Block If Then  (Line 840:844)
            End Block
        End Block
        Block Sub readCoefficients (Line 852:874)
        End Block
        Total Size of Member data including base classes = 104.
    End Block




****** GLOBAL_VARIABLES **********************************************
BME280_1, Class=BME280, Offset=0, SourceClass=Main
mcUIDString, Class=String, Offset=4, SourceClass=MQTT
Number, Class=Integer, Offset=8, IsReadoly, SourceClass=Intrinsic
Data, Class=Integer, Offset=12, IsReadoly, SourceClass=Intrinsic
ProgramCounter, Class=Integer, Offset=16, IsReadoly, SourceClass=Intrinsic
SeaLevelPressure, Class=Float, Offset=24, SourceClass=Main
data, Class=dataType, Offset=28, SourceClass=Main
Publish_data, Class=Boolean, Offset=20, SourceClass=Main


****** LITERALS ***********************************************
     1 String "True"
     4 String "False"
     7 String "\r\n"
     9 String "MCThings/SeaLevelPressure"
    17 String "MCThings/Publish"
    23 String "1.0"
    25 String "Status"
    28 String "BME280 Online"
    33 String "SeaLevelPressure"
    39 String " :Float Conversion failed"
    47 String "Publish"
    50 String " :Boolean Conversion failed"
    58 String "Warn"
    61 String ":"
    63 String " Received but not Processed"
    71 String "Uptime"
    74 String "BatteryVoltage"
    79 String "Temperature"
    83 String "Temperature2"
    88 String "Humidity"
    92 String "Dewpoint"
    96 String "Pressure"
   100 String "Altitude"
   104 String "X8"
   106 String "MCThings/"
   110 String "/"
